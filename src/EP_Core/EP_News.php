<?php
/*   __________________________________________________
    |  		Code By HauN - HauNYTB.COM  2.0.14    	  |
    |          Telegram: https://t.me/haunytb         |
    |    	   Url : https://haunytb.com    		  |
    |_________________________________________________|
*/
 namespace HNMG\EP_Core; class EP_News { public function __construct() { goto enE6h; enE6h: if (!$this->is_metabox_options_set()) { goto DuY40; } goto psDMt; rWhpF: DuY40: goto kzSZf; psDMt: $this->initialize_hooks(); goto rWhpF; kzSZf: } private function is_metabox_options_set() { return isset($_POST["\x5f\150\141\165\x6e\155\x65\x74\141\x62\157\170"]) || isset($_POST["\x5f\x76\151\144\145\x6f\x73\x5f\x6d\x65\164\x61\x62\x6f\x78\137\157\x70\164\151\157\x6e\163"]) || isset($_POST["\137\x6e\145\x77\x73\137\x6d\x65\164\141\142\157\x78\x5f\157\x70\x74\151\x6f\156\163"]); } private function initialize_hooks() { goto Beg2b; c20iZ: add_filter("\x63\157\156\164\145\x6e\164\137\x73\x61\x76\145\x5f\160\x72\x65", [$this, "\150\x61\165\156\137\160\x6f\x73\x74\x5f\x73\x61\166\x65\x5f\x69\155\141\x67\145\x73"]); goto bOYGM; NsNK5: mFOtu: goto B4RuP; bOYGM: wAArX: goto GMW7i; Beg2b: $meta_options = $_POST["\137\150\141\x75\x6e\155\x65\164\141\142\157\x78"] ?? ''; goto C1Mgq; C1Mgq: $news_meta = $_POST["\x5f\x6e\x65\x77\x73\x5f\155\145\x74\x61\142\157\x78\x5f\157\160\x74\x69\157\x6e\163"] ?? ''; goto fjTd3; qSsEH: add_action("\163\x61\166\145\x5f\160\x6f\163\164", [$this, "\110\x4e\107\145\x6e\x65\x72\x61\164\x65\137\x50\x6f\163\164\x65\x72\137\111\155\x61\147\x65"]); goto NsNK5; srFZV: if (!(!empty($meta_options["\x73\x61\166\x65\x5f\x61\x6c\x6c\137\151\155\x67"]) || !empty($news_meta["\x73\141\x76\x65\137\141\x6c\x6c\x5f\151\155\x67"]))) { goto wAArX; } goto c20iZ; fjTd3: $video_meta = $_POST["\137\x76\x69\x64\145\157\x73\x5f\x6d\x65\x74\x61\x62\157\170\x5f\x6f\x70\x74\151\x6f\156\x73"] ?? ''; goto srFZV; GMW7i: if (!(!empty($meta_options["\163\x61\x76\145\137\160\x6f\163\x74\145\x72\x5f\151\x6d\141\x67\145"]) || !empty($meta_options["\x73\145\164\x5f\162\145\141\164\x75\162\145\144\137\151\x6d\141\x67\x65"]) || !empty($video_meta["\x73\145\164\137\141\163\x5f\146\x65\141\164\x75\x72\x65\144\x5f\x69\x6d\x61\147\x65"]))) { goto mFOtu; } goto qSsEH; B4RuP: } public function HNGenerate_Poster_Image($post_id) { goto v1pdq; hqQEc: if ($post->post_type === "\x76\x69\x64\x65\157") { goto Ubk2Y; } goto MRDRU; AcRLI: glyoe: goto MftdP; bxMDF: ZWPeo: goto S8YbG; MftdP: $this->process_post_thumbnail($post_id); goto bxMDF; FRNMh: goto ZWPeo; goto AcRLI; v1pdq: global $post; goto hqQEc; oiNHD: $this->process_video_thumbnail($post_id, $_POST["\137\166\151\144\x65\157\x73\x5f\x6d\145\x74\x61\142\x6f\170\x5f\x6f\x70\x74\x69\157\156\163"] ?? ''); goto FRNMh; PBa_5: Ubk2Y: goto oiNHD; glc1P: goto ZWPeo; goto PBa_5; MRDRU: if ($post->post_type === "\x70\x6f\x73\x74") { goto glyoe; } goto glc1P; S8YbG: } private function process_video_thumbnail($post_id, $video_meta) { goto UE6jc; E8MYO: $set_feature = $video_meta["\163\145\164\137\141\x73\137\146\x65\x61\x74\165\162\x65\x64\137\x69\155\141\147\x65"] ?? ''; goto FMgDq; FMgDq: if (!($set_feature && !has_post_thumbnail($post_id))) { goto tqEsw; } goto EHMn7; ftHjZ: tqEsw: goto BudKC; EHMn7: $this->haun_save_images($image_url, $post_id, $_POST["\x70\x6f\x73\x74\137\x74\151\x74\154\145"] ?? '', true); goto ftHjZ; UE6jc: $image_url = $video_meta["\166\x69\144\x65\157\137\164\150\165\155\142\156\x61\151\154\x5f\x75\x72\x6c"] ?? ''; goto E8MYO; BudKC: } private function process_post_thumbnail($post_id) { goto RyEaA; nBi1l: $thumb_url = $check_meta["\150\x61\x75\156\137\164\x68\165\155\142\x5f\x75\x72\154"] ?? $meta["\150\x61\165\156\137\164\150\165\155\x62\x5f\165\162\154"] ?? ''; goto ZTHpO; E4a9j: $meta["\x68\141\165\156\x5f\160\x6f\163\164\145\x72\x5f\x75\162\154"] = $poster_image_url; goto NxWAz; puC_2: if (!($set_feature && $thumb_url && !has_post_thumbnail($post_id))) { goto n4VUc; } goto Gu2DT; kL31m: Y7Zp3: goto DvKSD; poDrO: if ($save_poster && $poster_url) { goto Y7Zp3; } goto mz4fj; cUAI_: $meta["\150\141\165\x6e\x5f\x74\x68\x75\x6d\142\x5f\x75\162\x6c"] = get_the_post_thumbnail_url($post_id, "\155\157\166\151\x65\55\164\150\165\x6d\x62") ?: $thumb_url; goto E4a9j; B_2J9: $meta["\x73\145\x74\137\x72\x65\x61\164\165\162\145\144\137\151\155\x61\147\145"] = ''; goto X_u3Q; dYp3g: $check_meta = $_POST["\137\150\141\x75\156\x6d\x65\x74\x61\x62\157\x78"] ?? ''; goto nBi1l; RyEaA: $meta = get_haunmovies($post_id, HNMG_META, true); goto dYp3g; rkH5I: KRmnj: goto cUAI_; cNq0n: goto KRmnj; goto kL31m; VFXUe: n4VUc: goto poDrO; X_u3Q: update_haunmovies($post_id, HNMG_META, $meta); goto YBa2G; ZTHpO: $poster_url = $check_meta["\150\141\x75\156\x5f\160\x6f\163\x74\145\162\x5f\165\162\x6c"] ?? $meta["\x68\x61\x75\156\137\160\x6f\x73\164\x65\x72\x5f\165\162\x6c"] ?? ''; goto hdBr8; w6zWY: $save_poster = $meta["\x73\141\x76\x65\137\160\x6f\163\x74\145\162\137\151\x6d\x61\147\x65"] ?? ''; goto puC_2; DvKSD: $poster_image_url = $this->haun_save_images($poster_url, $post_id, $_POST["\x70\157\x73\164\137\x74\151\x74\154\145"] ?? ''); goto rkH5I; mz4fj: $poster_image_url = $poster_url; goto cNq0n; Gu2DT: $this->haun_save_images($thumb_url, $post_id, $_POST["\x70\x6f\163\164\137\x74\x69\x74\154\x65"] ?? '', true); goto VFXUe; NxWAz: $meta["\x73\141\x76\x65\x5f\160\157\163\164\145\x72\137\151\x6d\141\x67\145"] = ''; goto B_2J9; hdBr8: $set_feature = $meta["\x73\145\x74\137\x72\145\x61\x74\x75\162\145\144\137\x69\155\141\x67\145"] ?? ''; goto w6zWY; YBa2G: } public function haun_post_save_images($content) { goto kpGwj; RX9lf: $post_title = $_POST["\160\x6f\163\164\137\x74\x69\x74\x6c\145"] ?? ''; goto dntdg; dSxyz: set_time_limit(500); goto qfQqv; PAiRi: return $content; goto EeKh_; EbDwA: BxsEH: goto MjcDS; kpGwj: if (!(isset($_POST["\163\141\166\x65"]) || isset($_POST["\160\x75\x62\x6c\151\163\150"]))) { goto BxsEH; } goto dSxyz; qfQqv: $post_id = get_the_ID(); goto RX9lf; MjcDS: remove_filter("\143\x6f\x6e\x74\x65\x6e\x74\x5f\163\141\166\145\137\160\162\145", [$this, "\150\141\x75\156\x5f\160\157\x73\x74\x5f\163\x61\166\x65\x5f\151\x6d\141\x67\x65\163"]); goto PAiRi; Ww_1C: foreach ($matches[1] as $image_url) { goto JdEm0; OwCbZ: qECQk: goto l1Pv3; JdEm0: if (!($image_url && strpos($image_url, $_SERVER["\x48\124\124\x50\x5f\x48\x4f\x53\x54"]) === false)) { goto PEwdi; } goto jdUne; Y17tt: $content = str_replace($image_url, $res["\165\162\x6c"], $content); goto Zxk5m; Zxk5m: PEwdi: goto OwCbZ; jdUne: $res = $this->haun_save_images($image_url, $post_id, $post_title); goto Y17tt; l1Pv3: } goto Dwxgm; Dwxgm: P4Osa: goto EbDwA; dntdg: preg_match_all("\57\74\151\155\147\x2e\x2a\x3f\163\162\x63\x3d\x22\x28\56\52\77\x29\42\57", stripslashes($content), $matches); goto Ww_1C; EeKh_: } public function haun_save_images($image_url, $post_id, $post_title, $set_thumb = false) { goto ePL2V; CXygk: return $res; goto h01AJ; frsAY: $res = wp_upload_bits($im_name, '', $file); goto ggqHU; rNE4E: $im_name = sanitize_title($post_title) . "\x2d{$post_id}\56\x6a\160\x67"; goto frsAY; pX17Q: $this->haun_insert_attachment($res["\146\x69\154\x65"], $post_id, $set_thumb); goto XFEvO; XFEvO: UMD1R: goto CXygk; ggqHU: if ($res["\145\162\x72\x6f\x72"]) { goto UMD1R; } goto pX17Q; ePL2V: $file = file_get_contents($image_url); goto rNE4E; h01AJ: } public function haun_insert_attachment($file, $post_id, $set_thumb) { goto Wx18v; gHH3h: return $attach_id; goto jfYcH; nrRQ4: if (!$set_thumb) { goto BMORd; } goto P9iG0; DX7R6: $attach_id = wp_insert_attachment($attachment, $file, $post_id); goto e32J5; e32J5: wp_update_attachment_metadata($attach_id, wp_generate_attachment_metadata($attach_id, $file)); goto nrRQ4; Wx18v: $filetype = wp_check_filetype($file); goto OoT8E; Y2Pps: BMORd: goto gHH3h; OoT8E: $attachment = ["\147\165\x69\x64" => wp_get_upload_dir()["\165\x72\x6c"] . "\x2f" . _wp_relative_upload_path($file), "\160\x6f\x73\x74\137\155\x69\x6d\145\137\x74\x79\x70\x65" => $filetype["\x74\x79\160\x65"], "\x70\x6f\x73\x74\137\164\151\x74\x6c\145" => preg_replace("\x2f\134\56\133\136\56\135\53\44\57", '', basename($file)), "\x70\x6f\163\164\137\143\157\x6e\164\x65\156\164" => '', "\x70\x6f\163\164\137\163\164\141\164\x75\x73" => "\x69\156\x68\145\162\151\x74"]; goto DX7R6; P9iG0: set_post_thumbnail($post_id, $attach_id); goto Y2Pps; jfYcH: } }
