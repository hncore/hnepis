<?php
/*   __________________________________________________
    |  		Code By HauN - HauNYTB.COM  2.0.14    	  |
    |          Telegram: https://t.me/haunytb         |
    |    	   Url : https://haunytb.com    		  |
    |_________________________________________________|
*/
 namespace HNMG\EP_Load; class EP_Cache { public $timeCache; public $folderCache; public function __construct() { goto ukOgi; lk22l: jnKUX: goto Yx531; T6tPC: wp_mkdir_p($this->folderCache); goto lk22l; e1dLo: if (is_dir($this->folderCache)) { goto jnKUX; } goto T6tPC; zLy70: $this->wp_filesystem = $wp_filesystem; goto fhcqj; CvEW0: if (!function_exists("\x57\x50\137\x46\x69\154\x65\x73\x79\163\x74\145\x6d")) { require_once ABSPATH . "\167\160\x2d\x61\x64\x6d\x69\156\57\x69\156\x63\154\165\144\145\163\x2f\146\151\x6c\x65\x2e\160\150\x70"; } goto s5vB7; s5vB7: global $wp_filesystem; goto JBhSV; ukOgi: $this->folderCache = HNMG_CACHE; goto e1dLo; JBhSV: WP_Filesystem(); goto zLy70; Yx531: $this->timeCache = 3600; goto CvEW0; fhcqj: } public function register() { goto EVmSD; pDEtx: D8_qT: goto XdaBH; kjAWS: add_action("\167\160\137\x61\x6a\141\170\137\x6e\157\x70\162\151\x76\x5f\x72\145\163\x65\x74\x5f\x70\154\x61\171\x65\x72\x5f\x63\141\143\150\x65", [$this, "\162\x65\x73\145\x74\137\160\154\141\x79\x65\x72\137\x63\141\143\x68\x65"]); goto sbgV8; sbgV8: add_filter("\x48\116\115\107\x2d\164\141\142\x73", [$this, "\x68\x6e\x61\x70\151\x73\157\144\145\x5f\x63\x61\x63\150\x65\137\155\145\x6e\x75"]); goto dNkkk; RExvs: add_action("\167\x70\x5f\141\152\141\x78\137\144\x65\154\145\164\x65\137\x61\154\x6c\137\x63\x61\143\x68\x65", [$this, "\144\145\154\x65\x74\x65\137\x61\x6c\154\x5f\x63\x61\143\x68\x65"]); goto jmUkW; EVmSD: if (!(HNCORE()->get_product_status() == "\143\157\156\156\x65\143\164\x65\x64")) { goto D8_qT; } goto y91s1; jmUkW: add_action("\167\x70\137\x61\x6a\x61\170\137\x6e\157\160\162\151\x76\x5f\x64\145\x6c\x65\x74\x65\x5f\x61\x6c\154\x5f\x63\x61\143\150\x65", [$this, "\144\x65\x6c\145\164\x65\137\141\154\154\x5f\x63\x61\x63\x68\145"]); goto pDEtx; dNkkk: add_filter("\110\116\x4d\107\55\x70\141\147\x65\x73", [$this, "\x68\156\141\x70\151\163\x6f\144\145\x5f\x63\141\x63\x68\145\137\x6d\x65\x6e\x75"]); goto RExvs; y91s1: add_action("\x77\160\137\141\152\x61\170\137\x72\x65\x73\x65\164\137\160\154\x61\x79\145\162\137\143\141\143\150\x65", [$this, "\162\145\163\x65\164\137\x70\154\x61\171\x65\x72\x5f\143\x61\x63\x68\x65"]); goto kjAWS; XdaBH: } public function hnapisode_cache_menu($nav) { $nav["\61\62\x30"] = array("\163\154\165\x67" => "\150\156\155\x67\55\143\x61\143\x68\x65\55\155\141\x6e\141\x67\x65\x72", "\x63\141\154\154\x62\x61\143\x6b" => array($this, "\x68\x6e\155\147\x5f\x63\x61\x63\150\145\137\155\141\156\x61\147\145\137\x70\x61\147\145"), "\x74\151\x74\154\145" => __("\x48\116\115\107\x20\103\141\x63\x68\145", "\150\156\x6d\147\145\160\x69\x73"), "\151\x63\157\156" => "\x66\141\55\160\x6c\141\171\x2d\x63\151\x72\143\x6c\x65"); return $nav; } public function hnmg_cache_manage_page() { goto M2OYy; Hgz1v: echo view("\x48\x4e\x4d\107\x3a\72\154\x61\x79\x6f\165\164\x73\56\x63\141\x63\x68\145", compact("\143\x61\x63\x68\145\x5f\143\157\x75\156\164", "\x67\x65\164\x5f\143\x61\143\x68\145")); goto L6qbs; M2OYy: $cache_count = json_decode($this->cacheCount()); goto oaeWa; oaeWa: $get_cache = json_decode($this->getCache()); goto Hgz1v; L6qbs: } public function delete_all_cache() { goto vsDVq; lvqv2: $status = "\x53\x75\x63\143\145\163\163\146\165\x6c\154\171"; goto VJ4NO; f3etb: wp_die(); goto QKyHI; RdGOF: $time_limit = $result["\x74\151\155\x65\137\154\x69\x6d\151\x74"] ?? 0; goto eZaBA; vsDVq: $result = json_decode($this->delAllCache(0), true); goto lvqv2; x4yCa: wp_send_json_success(["\163\164\141\164\x75\163" => $status, "\x74\x6f\164\x61\154\137\143\141\x63\150\145" => $total_cache, "\164\x69\x6d\x65\x5f\154\151\155\151\x74" => $time_limit, "\143\141\143\x68\145\137\144\x65\x6c\x65\x74\x65\144" => $cache_deleted]); goto f3etb; VJ4NO: $total_cache = $result["\x74\x6f\164\x61\x6c\137\x63\x61\143\150\145"] ?? 0; goto RdGOF; eZaBA: $cache_deleted = $result["\x63\141\143\150\x65\x5f\x64\x65\x6c\145\x74\x65\144"] ?? 0; goto x4yCa; QKyHI: } public function delAllCache($timeCache) { goto WJ8ST; md1Ut: if (!$getDirContents) { goto rc5ov; } goto vZMYR; xiUL3: owm77: goto XIoR7; WJC_I: return json_encode($result); goto dslYp; vZMYR: $i = $j = 0; goto UBxTI; UBxTI: foreach ($getDirContents as $key => $value) { goto SxDyg; KTnFa: if (!($timeCache <= time() - filemtime($value))) { goto xdfo_; } goto fVfLU; Mmlzm: $i++; goto KTnFa; zxQgA: $result["\x73\x74\x61\164\165\163"] = 1; goto q_ZWT; fVfLU: $j++; goto EUbkP; Q9ZIG: s0tGG: goto Ziril; q_ZWT: fLO_a: goto rZ3hy; rgyht: iYHol: goto Q9ZIG; SxDyg: if (!(strpos($value, "\56\164\x78\x74") !== false)) { goto iYHol; } goto Mmlzm; EUbkP: if (!unlink($value)) { goto fLO_a; } goto zxQgA; rZ3hy: xdfo_: goto rgyht; Ziril: } goto xiUL3; iG6sI: $this->removeEmptySubFolders($this->folderCache); goto WJC_I; OTq3l: $result["\x63\x61\x63\150\x65\x5f\144\x65\154\145\164\x65\144"] = $j; goto tGr1X; hRvVp: $getDirContents = $this->getDirContents($this->folderCache); goto md1Ut; XIoR7: $result["\x74\x6f\x74\x61\154\x5f\143\x61\x63\x68\145"] = $i; goto OTq3l; lLOSH: rc5ov: goto iG6sI; tGr1X: $result["\143\141\143\x68\145\137\143\x6f\x75\156\x74"] = $i - $j; goto lLOSH; WJ8ST: $result = array("\x73\164\x61\164\x75\163" => 0, "\164\157\x74\141\154\137\x63\141\x63\x68\x65" => 0, "\x74\151\155\x65\x5f\154\x69\x6d\x69\164" => $timeCache, "\143\x61\x63\x68\x65\x5f\x64\x65\x6c\x65\164\x65\144" => 0, "\143\x61\143\x68\x65\x5f\143\157\165\156\164" => 0); goto hRvVp; dslYp: } public function reset_player_cache() { goto Zojqe; tcTt6: $cacheData = $this->delCache($link); goto glfIO; nTJgi: $film_meta = get_post_meta($post_id, HNMG_EPS, true); goto xw79f; kqldT: $post_id = isset($_POST["\160\x6f\x73\x74\x5f\151\144"]) ? (int) $_POST["\160\x6f\163\164\137\151\x64"] : ''; goto f2M2K; mLLPm: $link = $data[$server - 1]["\150\x61\165\156\155\x6f\x76\151\145\x73\137\x73\x65\162\166\x65\x72\137\x64\141\x74\141"][$episode_slug]["\x68\x61\165\156\155\157\166\151\x65\163\x5f\145\x70\137\154\151\156\x6b"]; goto tcTt6; xw79f: $data = json_decode($film_meta, true); goto mLLPm; f2M2K: $episode_slug = isset($_POST["\145\x70\151\x73\157\144\x65\137\163\154\165\147"]) ? str_replace("\x2d", "\137", wp_strip_all_tags($_POST["\145\160\151\163\157\x64\x65\x5f\x73\x6c\x75\147"])) : ''; goto nTJgi; glfIO: wp_send_json($cacheData); goto m5XQ1; Zojqe: $server = isset($_POST["\x73\x65\162\x76\145\x72\x5f\151\x64"]) ? (int) $_POST["\x73\x65\162\166\x65\x72\137\x69\x64"] : ''; goto kqldT; m5XQ1: } public function readCache($name) { goto Hl7L7; MqDcg: goto dZEFW; goto cVQMh; DYWJy: if (!($this->timeCache > time() - filemtime($file))) { goto djcM7; } goto PZfjl; hqdQX: if (!file_exists($file)) { goto z1MLH; } goto y3yMq; Hl7L7: $name = md5(md5($name)); goto APDHi; V2u4l: $result = file_get_contents($file); goto MqDcg; APDHi: $result = ''; goto v5gsv; y3yMq: if ($this->timeCache != '') { goto a7Tzc; } goto V2u4l; XMEpE: return $result; goto MffNz; QEjjl: djcM7: goto p_9J6; v5gsv: $createFolderCache = $this->createFolderCache($name); goto MFzPd; PZfjl: $result = file_get_contents($file); goto QEjjl; p_9J6: dZEFW: goto HvMZF; cVQMh: a7Tzc: goto DYWJy; MFzPd: $file = $this->folderCache . "\57" . $createFolderCache . "\57" . $name . "\56\x74\x78\x74"; goto hqdQX; HvMZF: z1MLH: goto XMEpE; MffNz: } public function getCache() { goto K3MeX; c1NGP: return json_encode($result); goto jllaZ; LciKd: $getDirContents = $this->getDirContents($this->folderCache); goto foy3_; wfrgs: ZotSa: goto c1NGP; HrOfX: if (!$getDirContents) { goto zb2Gx; } goto e120D; K3MeX: $result = array(); goto LciKd; e120D: foreach ($getDirContents as $key => $value) { goto OOUqR; OOUqR: if (!strpos($value, "\x2e\164\x78\x74")) { goto EkUWt; } goto fz7xF; fz7xF: $result[] = array("\146\x69\154\x65" => $value); goto JMLhB; EQbDz: nsmzp: goto lNurx; JMLhB: EkUWt: goto EQbDz; lNurx: } goto wfrgs; foy3_: $i = 0; goto HrOfX; jllaZ: zb2Gx: goto HKSvW; HKSvW: } public function saveCache($name, $data) { goto tyFRg; Xx3fw: $this->wp_filesystem->put_contents($file, $data, FS_CHMOD_FILE); goto ik312; ik312: $index_file = WP_CONTENT_DIR . "\x2f\151\156\x64\x65\170\x2e\x70\150\x70"; goto CHD0r; cigLP: $dir = $this->folderCache . "\x2f" . $createFolderCache; goto T1Z2q; D4p3s: xB9wp: goto Xx3fw; xz0IU: UyjTc: goto Xb3Jq; Xb3Jq: if (chmod($this->folderCache, 0777)) { goto lUumV; } goto PDKzT; CHD0r: $this->wp_filesystem->put_contents($index_file, "\74\x3f\160\150\x70\x20\57\x2f\40\123\x69\x6c\x65\x6e\143\145\x20\x69\x73\40\147\157\154\144\145\156\x2e", FS_CHMOD_FILE); goto Dnj86; T1Z2q: $file = $dir . "\57" . $name . "\56\164\170\164"; goto Lq78f; Lq78f: if (is_dir($dir)) { goto xB9wp; } goto cFP6V; PDKzT: chmod($this->folderCache, 0777); goto s2ba2; cFP6V: mkdir($dir, 0777, true); goto D4p3s; IhBVv: $createFolderCache = $this->createFolderCache($name); goto s0lBO; sxekp: mkdir($this->folderCache, 0777, true); goto xz0IU; s0lBO: if (is_dir($this->folderCache)) { goto UyjTc; } goto sxekp; tyFRg: $name = md5(md5($name)); goto IhBVv; s2ba2: lUumV: goto cigLP; Dnj86: } public function delCache($name) { goto WrxG2; jvoeC: goto ql6NU; goto mD8hN; aCM31: vzKnQ: goto QpyTO; rn5kB: if (file_exists($file)) { goto v9VlU; } goto myg5x; e_T2Z: $result = array("\x73\x74\141\164\x75\x73" => 0, "\162\x65\x73\165\x6c\x74" => "\x44\x65\154\x65\164\145\40\x65\x72\x72\157\162"); goto jvoeC; hq37t: goto vzKnQ; goto UMVvr; AKPQd: $createFolderCache = $this->createFolderCache($name); goto TW2GS; WrxG2: $result = ''; goto p9Zxk; mD8hN: qC6Xi: goto tIf_O; Vc77L: ql6NU: goto aCM31; TW2GS: $file = $this->folderCache . "\57" . $createFolderCache . "\57" . $name . "\x2e\164\x78\164"; goto rn5kB; QpyTO: return $result; goto yrvtB; RGrL1: if (unlink($file)) { goto qC6Xi; } goto e_T2Z; p9Zxk: $name = md5(md5($name)); goto AKPQd; UMVvr: v9VlU: goto RGrL1; myg5x: $result = array("\x73\x74\x61\x74\165\163" => 0, "\x72\145\x73\x75\x6c\164" => "\x4c\x69\156\x6b\40\156\157\164\40\x65\x78\151\x73\164\x73"); goto hq37t; tIf_O: $result = array("\163\164\141\x74\165\x73" => 1, "\162\x65\x73\x75\154\x74" => "\x44\145\154\x65\164\145\x64"); goto Vc77L; yrvtB: } public function cacheCount() { goto FuPwv; FuPwv: $result = array(); goto inwwN; rwvmZ: kcGg3: goto gnLZU; J332j: if (!$getDirContents) { goto kcGg3; } goto m0Vnk; m0Vnk: foreach ($getDirContents as $key => $value) { goto Akzx8; SeV0G: $result["\164\x6f\x74\141\x6c\x5f\143\x61\x63\x68\x65"] = $i; goto zug93; SG3ZU: $result["\162\x65\163\x75\154\164"] = 1; goto SeV0G; Akzx8: if (!strpos($value, "\x2e\164\x78\x74")) { goto G6t_7; } goto SG3ZU; zug93: $i++; goto NTh3C; SaPN3: tExYg: goto mjv3J; NTh3C: G6t_7: goto SaPN3; mjv3J: } goto xHsNK; inwwN: $getDirContents = $this->getDirContents($this->folderCache); goto FgVyY; xHsNK: MLtoS: goto rwvmZ; gnLZU: return json_encode($result); goto MxKTp; FgVyY: $i = 1; goto J332j; MxKTp: } private function createFolderCache($name) { goto gETTm; BnegJ: $folder2 = substr($name, 2, 2); goto lX4eY; gETTm: $folder1 = substr($name, 0, 2); goto BnegJ; lX4eY: return $folder1 . "\57" . $folder2; goto ZTiXY; ZTiXY: } private function getDirContents($dir, &$results = array()) { goto rt0yU; MjNqc: SZwLn: goto XK1Xn; rt0yU: $files = scandir($dir); goto cX9E8; cX9E8: foreach ($files as $key => $value) { goto A4Wjh; A4Wjh: $path = realpath($dir . DIRECTORY_SEPARATOR . $value); goto UxpoL; qm9PC: goto avXvc; goto lxFjY; lxFjY: cVl3X: goto UcLGN; JGtNi: $this->getDirContents($path, $results); goto BmB7J; Rw7uX: C5iEx: goto qm9PC; UxpoL: if (!is_dir($path)) { goto cVl3X; } goto BqJBF; BqJBF: if (!($value != "\56" && $value != "\56\x2e")) { goto C5iEx; } goto JGtNi; UcLGN: $results[] = $path; goto odMJi; BmB7J: $results[] = $path; goto Rw7uX; odMJi: avXvc: goto cTEm2; cTEm2: vV8EI: goto G29yh; G29yh: } goto MjNqc; XK1Xn: return $results; goto Q5ieG; Q5ieG: } private function removeEmptySubFolders($path) { goto wTx6O; wTx6O: $empty = true; goto LiCxp; LiCxp: foreach (glob($path . DIRECTORY_SEPARATOR . "\52") as $file) { $empty &= is_dir($file) && $this->removeEmptySubFolders($file); TTmTa: } goto WgV1i; d1Rfn: return $empty && @rmdir($path); goto zVkmS; WgV1i: Y5ovu: goto d1Rfn; zVkmS: } }
