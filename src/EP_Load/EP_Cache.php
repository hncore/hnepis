<?php
/*   __________________________________________________
    |  		Code By HauN - HauNYTB.COM  2.0.14    	  |
    |          Telegram: https://t.me/haunytb         |
    |    	   Url : https://haunytb.com    		  |
    |_________________________________________________|
*/
 namespace HNMG\EP_Load; class EP_Cache { public $timeCache; public $folderCache; public function __construct() { goto jzDI7; jzDI7: $this->folderCache = WP_CONTENT_DIR . "\x2f\146\151\x6c\x6d\x2d\x63\x61\143\150\145"; goto CPOCm; Dick_: $this->wp_filesystem = $wp_filesystem; goto j1Bhy; CPOCm: $this->timeCache = 3600; goto W7D2C; cUk31: WP_Filesystem(); goto Dick_; G8wHj: global $wp_filesystem; goto cUk31; W7D2C: if (!function_exists("\127\120\x5f\x46\x69\154\x65\163\171\163\x74\145\x6d")) { require_once ABSPATH . "\167\160\x2d\141\x64\155\x69\x6e\57\x69\156\x63\154\x75\144\x65\163\57\x66\151\x6c\145\56\x70\x68\160"; } goto G8wHj; j1Bhy: } public function register() { goto E6iLH; r04vX: add_action("\x77\x70\x5f\x61\152\x61\170\137\156\x6f\160\162\151\x76\137\162\x65\x73\x65\x74\x5f\x70\x6c\x61\171\145\x72\137\x63\141\143\150\145", [$this, "\x72\x65\x73\x65\164\x5f\160\154\x61\171\145\x72\x5f\x63\141\143\150\x65"]); goto EuKNj; R9Xz6: add_action("\x77\x70\137\141\x6a\141\x78\137\144\145\x6c\145\164\145\x5f\x61\x6c\x6c\x5f\143\x61\x63\x68\145", [$this, "\144\145\x6c\145\164\x65\137\141\x6c\x6c\x5f\143\x61\143\x68\x65"]); goto rZhnw; EuKNj: add_filter("\110\x4e\115\x47\55\x74\x61\142\163", [$this, "\150\156\141\160\x69\x73\x6f\144\x65\137\143\x61\143\150\x65\x5f\155\x65\x6e\x75"]); goto BvgkU; rZhnw: add_action("\x77\x70\137\x61\x6a\x61\170\x5f\x6e\157\160\162\151\166\x5f\x64\145\x6c\x65\x74\x65\x5f\x61\154\154\x5f\x63\141\x63\150\145", [$this, "\144\x65\154\x65\164\145\x5f\141\x6c\154\137\x63\141\x63\150\145"]); goto KJx4h; E6iLH: add_action("\167\x70\137\141\x6a\x61\x78\137\x72\x65\163\145\164\137\x70\154\x61\171\x65\162\x5f\143\x61\143\x68\145", [$this, "\x72\x65\163\x65\x74\x5f\x70\154\x61\x79\145\162\137\x63\141\x63\150\145"]); goto r04vX; BvgkU: add_filter("\x48\116\x4d\107\55\160\141\x67\x65\163", [$this, "\x68\x6e\141\160\x69\x73\157\144\x65\x5f\143\141\x63\150\x65\137\155\x65\x6e\x75"]); goto R9Xz6; KJx4h: } public function hnapisode_cache_menu($nav) { $nav["\61\x32\60"] = array("\x73\154\x75\147" => "\x68\156\x6d\147\x2d\143\141\143\150\x65\x2d\x6d\141\x6e\x61\147\145\x72", "\143\x61\x6c\154\142\x61\143\x6b" => array($this, "\x68\156\155\147\x5f\143\141\143\x68\145\x5f\155\x61\156\x61\147\x65\137\x70\141\147\145"), "\164\151\164\x6c\x65" => __("\110\116\x4d\107\x20\103\141\143\x68\x65", "\150\x6e\x6d\147\145\x70\151\163"), "\151\x63\x6f\156" => "\146\x61\x2d\160\x6c\141\171\x2d\143\151\162\143\x6c\145"); return $nav; } public function hnmg_cache_manage_page() { goto I5Nji; Ion_m: $get_cache = json_decode($this->getCache()); goto Bu6CD; I5Nji: $cache_count = json_decode($this->cacheCount()); goto Ion_m; Bu6CD: echo view("\x48\x4e\x4d\x47\72\x3a\154\x61\171\x6f\x75\x74\x73\56\x63\x61\x63\150\145", compact("\143\141\x63\x68\x65\x5f\143\157\x75\156\x74", "\147\x65\x74\137\143\x61\x63\x68\x65")); goto B_OOY; B_OOY: } public function delete_all_cache() { goto DYead; DYead: $result = json_decode($this->delAllCache(0), true); goto tbXlf; X93cx: wp_send_json_success(["\163\164\141\x74\165\163" => $status, "\164\x6f\x74\x61\x6c\x5f\x63\141\143\150\x65" => $total_cache, "\x74\x69\155\x65\137\x6c\x69\x6d\151\164" => $time_limit, "\143\141\x63\150\x65\x5f\x64\145\x6c\x65\x74\x65\x64" => $cache_deleted]); goto xZ957; Kmic0: $total_cache = $result["\164\x6f\x74\x61\x6c\137\143\141\x63\150\x65"] ?? 0; goto E91wW; xZ957: wp_die(); goto ywY22; tbXlf: $status = "\x53\x75\x63\143\x65\163\163\x66\x75\x6c\x6c\171"; goto Kmic0; E91wW: $time_limit = $result["\x74\x69\155\145\x5f\154\151\155\151\164"] ?? 0; goto cBMcJ; cBMcJ: $cache_deleted = $result["\143\141\143\x68\x65\x5f\x64\145\x6c\145\x74\x65\144"] ?? 0; goto X93cx; ywY22: } public function delAllCache($timeCache) { goto dyKAd; U5e6M: $i = $j = 0; goto aytT_; x9CbL: LyhNZ: goto w9Fzg; aytT_: foreach ($getDirContents as $key => $value) { goto HtBVZ; VaKLx: TlZC7: goto SbZ9s; cZ0Zy: yufwN: goto TOYFv; rihqP: $j++; goto DkCLv; HtBVZ: if (!(strpos($value, "\x2e\x74\x78\x74") !== false)) { goto TlZC7; } goto aSCiK; DkCLv: if (!unlink($value)) { goto yufwN; } goto Ojozj; cYiDo: if (!($timeCache <= time() - filemtime($value))) { goto junnE; } goto rihqP; Ojozj: $result["\x73\164\141\x74\x75\x73"] = 1; goto cZ0Zy; TOYFv: junnE: goto VaKLx; aSCiK: $i++; goto cYiDo; SbZ9s: wwRRx: goto gNgSk; gNgSk: } goto wziRI; NEd1A: $result["\143\x61\143\150\x65\137\x64\145\154\145\x74\145\x64"] = $j; goto eHVW0; OTBEB: if (!$getDirContents) { goto LyhNZ; } goto U5e6M; w9Fzg: $this->removeEmptySubFolders($this->folderCache); goto Cd41E; wziRI: I1Y8C: goto YitFy; Jd5K4: $getDirContents = $this->getDirContents($this->folderCache); goto OTBEB; YitFy: $result["\164\157\164\x61\x6c\x5f\x63\x61\143\150\x65"] = $i; goto NEd1A; eHVW0: $result["\x63\x61\x63\x68\x65\137\143\x6f\165\156\x74"] = $i - $j; goto x9CbL; dyKAd: $result = array("\163\x74\141\x74\x75\x73" => 0, "\x74\x6f\164\141\x6c\137\143\141\143\x68\145" => 0, "\x74\x69\x6d\x65\x5f\154\151\x6d\151\x74" => $timeCache, "\x63\x61\143\x68\145\x5f\144\145\154\145\164\x65\x64" => 0, "\143\141\143\x68\x65\137\x63\157\165\x6e\164" => 0); goto Jd5K4; Cd41E: return json_encode($result); goto aqct6; aqct6: } public function reset_player_cache() { goto AalKw; j8hH1: $film_meta = get_post_meta($post_id, HNMG_EPS, true); goto CDunj; SbWcd: $episode_slug = isset($_POST["\x65\x70\151\x73\x6f\x64\145\x5f\x73\x6c\165\147"]) ? str_replace("\x2d", "\x5f", wp_strip_all_tags($_POST["\145\160\151\x73\x6f\x64\x65\x5f\163\x6c\x75\147"])) : ''; goto j8hH1; sez0B: $post_id = isset($_POST["\x70\x6f\163\x74\x5f\151\144"]) ? (int) $_POST["\x70\x6f\163\x74\x5f\x69\144"] : ''; goto SbWcd; looW6: $link = $data[$server - 1]["\150\x61\165\156\155\157\x76\x69\x65\163\137\163\x65\162\x76\145\162\x5f\144\x61\164\141"][$episode_slug]["\150\141\x75\x6e\x6d\157\166\x69\145\163\x5f\x65\x70\x5f\154\x69\156\x6b"]; goto DXYJE; AalKw: $server = isset($_POST["\x73\x65\162\x76\x65\x72\137\x69\144"]) ? (int) $_POST["\x73\x65\162\x76\145\x72\137\x69\144"] : ''; goto sez0B; CDunj: $data = json_decode($film_meta, true); goto looW6; pl0md: wp_send_json($cacheData); goto RvPXa; DXYJE: $cacheData = $this->delCache($link); goto pl0md; RvPXa: } public function readCache($name) { goto qJIqL; qJIqL: $name = md5(md5($name)); goto WJGvw; uMm85: $result = file_get_contents($file); goto Cvah7; Cvah7: goto Mq1rL; goto IyXHd; eNgcb: return $result; goto OuVIx; FU2qp: if ($this->timeCache != '') { goto tZ6IW; } goto uMm85; lzZx1: Mq1rL: goto eCq75; snB_a: VnGoQ: goto lzZx1; PB8p9: if (!file_exists($file)) { goto ENDTF; } goto FU2qp; Seqk_: $result = file_get_contents($file); goto snB_a; AF_Xu: if (!($this->timeCache > time() - filemtime($file))) { goto VnGoQ; } goto Seqk_; S43lV: $createFolderCache = $this->createFolderCache($name); goto bx5Fn; bx5Fn: $file = $this->folderCache . "\57" . $createFolderCache . "\x2f" . $name . "\56\164\x78\x74"; goto PB8p9; WJGvw: $result = ''; goto S43lV; eCq75: ENDTF: goto eNgcb; IyXHd: tZ6IW: goto AF_Xu; OuVIx: } public function getCache() { goto TzaUW; BzXta: rZqUf: goto fIq2Z; ahctL: foreach ($getDirContents as $key => $value) { goto iriRe; mIm7k: $result[] = array("\x66\x69\154\145" => $value); goto rLdg5; rLdg5: cmBfQ: goto ngyd8; ngyd8: Jg9LU: goto Jyf_a; iriRe: if (!strpos($value, "\56\x74\170\164")) { goto cmBfQ; } goto mIm7k; Jyf_a: } goto BzXta; TzaUW: $result = array(); goto ut8Xl; ut8Xl: $getDirContents = $this->getDirContents($this->folderCache); goto KtEbV; JMvY3: BHOVj: goto wFoQ0; vsaSa: if (!$getDirContents) { goto BHOVj; } goto ahctL; KtEbV: $i = 0; goto vsaSa; fIq2Z: return json_encode($result); goto JMvY3; wFoQ0: } public function saveCache($name, $data) { goto IT3or; sVcm4: $index_file = WP_CONTENT_DIR . "\57\x66\x69\x6c\155\x2d\143\x61\x63\x68\145\x2f\x69\156\x64\145\170\56\x70\150\160"; goto dxy4Y; yfHTu: $dir = $this->folderCache . "\57" . $createFolderCache; goto NGXCW; dxy4Y: $this->wp_filesystem->put_contents($index_file, "\74\x3f\160\150\x70\40\x2f\x2f\40\123\x69\x6c\x65\x6e\x63\145\x20\151\163\x20\x67\x6f\154\144\145\156\x2e", FS_CHMOD_FILE); goto dkcIA; uqPw9: bVaOL: goto yfHTu; L1mDX: chmod($this->folderCache, 0777); goto uqPw9; IT3or: $name = md5(md5($name)); goto NxH4X; IqYkF: mkdir($this->folderCache, 0777, true); goto TWE8K; gJ9gV: if (is_dir($dir)) { goto Jj7gX; } goto t8d5T; NGXCW: $file = $dir . "\x2f" . $name . "\x2e\x74\x78\164"; goto gJ9gV; NxH4X: $createFolderCache = $this->createFolderCache($name); goto LY3ix; l0hVS: $this->wp_filesystem->put_contents($file, $data, FS_CHMOD_FILE); goto sVcm4; P6BRC: if (chmod($this->folderCache, 0777)) { goto bVaOL; } goto L1mDX; TWE8K: yVmOw: goto P6BRC; t8d5T: mkdir($dir, 0777, true); goto kU1oN; kU1oN: Jj7gX: goto l0hVS; LY3ix: if (is_dir($this->folderCache)) { goto yVmOw; } goto IqYkF; dkcIA: } public function delCache($name) { goto QNFDl; ucRZK: $file = $this->folderCache . "\x2f" . $createFolderCache . "\x2f" . $name . "\x2e\x74\x78\x74"; goto JGOom; lk1K_: return $result; goto wO3V8; qhJJS: hevxI: goto iEvQa; XC8n9: $result = array("\163\x74\x61\x74\165\x73" => 1, "\x72\145\x73\x75\x6c\x74" => "\104\x65\154\x65\164\145\x64"); goto DrQ5M; tiaXy: $result = array("\163\164\141\x74\x75\163" => 0, "\162\145\x73\x75\154\164" => "\104\145\x6c\x65\x74\x65\x20\145\162\162\157\x72"); goto KihRo; J2eFo: kVw_5: goto XC8n9; JGOom: if (file_exists($file)) { goto hevxI; } goto UqsES; UqsES: $result = array("\163\x74\x61\x74\x75\x73" => 0, "\162\x65\x73\165\154\x74" => "\114\151\x6e\x6b\x20\x6e\x6f\x74\x20\x65\x78\151\x73\x74\x73"); goto RCF1x; DrQ5M: SJwZ9: goto uuqqJ; zE8Pe: $name = md5(md5($name)); goto rDzwH; RCF1x: goto GjjXL; goto qhJJS; iEvQa: if (unlink($file)) { goto kVw_5; } goto tiaXy; uuqqJ: GjjXL: goto lk1K_; QNFDl: $result = ''; goto zE8Pe; rDzwH: $createFolderCache = $this->createFolderCache($name); goto ucRZK; KihRo: goto SJwZ9; goto J2eFo; wO3V8: } public function cacheCount() { goto gzUuz; fyXZ5: return json_encode($result); goto Mhw1e; Eayw0: $getDirContents = $this->getDirContents($this->folderCache); goto eNu69; gzUuz: $result = array(); goto Eayw0; AQvAS: cICDU: goto fyXZ5; eNu69: $i = 1; goto vUE7J; XOJQg: foreach ($getDirContents as $key => $value) { goto WAi9w; ujxc6: $result["\162\145\163\x75\x6c\x74"] = 1; goto d3MaI; D2FSQ: $i++; goto Tu6xB; Tu6xB: CKy4e: goto ZPRbu; ZPRbu: ljvmR: goto pIscK; WAi9w: if (!strpos($value, "\x2e\164\x78\x74")) { goto CKy4e; } goto ujxc6; d3MaI: $result["\164\157\x74\x61\x6c\x5f\x63\x61\143\150\x65"] = $i; goto D2FSQ; pIscK: } goto vIMg3; vIMg3: mz594: goto AQvAS; vUE7J: if (!$getDirContents) { goto cICDU; } goto XOJQg; Mhw1e: } private function createFolderCache($name) { goto l7Zgo; mCT8B: $folder2 = substr($name, 2, 2); goto O5yIR; l7Zgo: $folder1 = substr($name, 0, 2); goto mCT8B; O5yIR: return $folder1 . "\x2f" . $folder2; goto cg6fh; cg6fh: } private function getDirContents($dir, &$results = array()) { goto FqxLC; EiGdx: Wbmp8: goto Cikab; Cikab: return $results; goto PkSZZ; Hyxg0: foreach ($files as $key => $value) { goto W5l5H; mmf8s: coInr: goto OA__e; TURDz: $results[] = $path; goto A4WrU; RVelC: if (!($value != "\x2e" && $value != "\56\56")) { goto ER_kv; } goto oPwcV; fhRAL: $results[] = $path; goto SRWhV; FkoLx: qGgJM: goto fhRAL; qP8Bf: goto L03Te; goto FkoLx; tRwSg: if (!is_dir($path)) { goto qGgJM; } goto RVelC; A4WrU: ER_kv: goto qP8Bf; SRWhV: L03Te: goto mmf8s; oPwcV: $this->getDirContents($path, $results); goto TURDz; W5l5H: $path = realpath($dir . DIRECTORY_SEPARATOR . $value); goto tRwSg; OA__e: } goto EiGdx; FqxLC: $files = scandir($dir); goto Hyxg0; PkSZZ: } private function removeEmptySubFolders($path) { goto OsA3Z; oM2P4: zskVd: goto AXlPy; AXlPy: return $empty && @rmdir($path); goto Lv4XA; OsA3Z: $empty = true; goto U9BOo; U9BOo: foreach (glob($path . DIRECTORY_SEPARATOR . "\52") as $file) { $empty &= is_dir($file) && $this->removeEmptySubFolders($file); ug81D: } goto oM2P4; Lv4XA: } }
