<?php
/*   __________________________________________________
    |  		Code By HauN - HauNYTB.COM  2.0.14    	  |
    |          Telegram: https://t.me/haunytb         |
    |    	   Url : https://haunytb.com    		  |
    |_________________________________________________|
*/
 namespace HNMG\EP_Load; class EP_Cache { public $timeCache; public $folderCache; public function __construct() { goto G25ze; G25ze: $this->folderCache = HNMG_CACHE; goto fttPx; hYrCn: wp_mkdir_p($this->folderCache); goto EMbrd; WIE0e: WP_Filesystem(); goto bgGog; gPSOJ: global $wp_filesystem; goto WIE0e; FzFek: if (!function_exists("\127\120\x5f\x46\x69\x6c\145\x73\171\x73\x74\x65\x6d")) { require_once ABSPATH . "\167\x70\55\141\x64\155\151\156\57\x69\x6e\143\154\165\x64\x65\x73\x2f\146\151\x6c\145\x2e\x70\150\x70"; } goto gPSOJ; EMbrd: I7vNc: goto KUIxc; KUIxc: $this->timeCache = 3600; goto FzFek; bgGog: $this->wp_filesystem = $wp_filesystem; goto Amtvq; fttPx: if (is_dir($this->folderCache)) { goto I7vNc; } goto hYrCn; Amtvq: } public function register() { goto VZsSp; VCU3e: add_action("\x77\x70\x5f\141\152\x61\170\x5f\156\157\x70\x72\151\166\x5f\x72\145\x73\145\x74\137\x70\x6c\x61\x79\x65\162\x5f\143\141\143\150\x65", [$this, "\x72\145\x73\145\164\137\160\x6c\x61\171\x65\162\x5f\143\141\143\150\x65"]); goto fgOH3; ZyAzz: add_action("\167\x70\137\x61\152\141\x78\137\x64\x65\x6c\x65\164\x65\137\x61\154\x6c\137\x63\x61\x63\x68\145", [$this, "\x64\145\154\x65\x74\x65\137\x61\x6c\154\x5f\143\141\143\x68\x65"]); goto DzvwO; LHNjA: add_filter("\110\116\x4d\x47\55\160\141\147\145\x73", [$this, "\150\156\x61\x70\x69\x73\x6f\144\145\137\x63\141\x63\150\x65\x5f\155\x65\156\165"]); goto ZyAzz; DzvwO: add_action("\x77\x70\137\141\x6a\141\170\137\156\x6f\160\162\x69\x76\x5f\144\145\154\145\164\145\x5f\x61\x6c\154\x5f\143\141\x63\150\x65", [$this, "\x64\x65\x6c\145\164\x65\137\x61\154\x6c\137\143\141\x63\x68\145"]); goto Vp0Vb; Vp0Vb: tBIJc: goto Nsv6i; fgOH3: add_filter("\x48\116\x4d\107\55\164\141\x62\x73", [$this, "\x68\156\141\160\x69\163\157\x64\145\x5f\143\141\143\150\145\x5f\x6d\145\x6e\x75"]); goto LHNjA; lvX2e: add_action("\x77\x70\x5f\x61\152\x61\170\x5f\162\145\163\145\x74\x5f\160\x6c\x61\171\145\x72\137\143\x61\143\x68\x65", [$this, "\x72\x65\163\145\164\x5f\160\x6c\141\171\x65\x72\137\x63\x61\143\150\145"]); goto VCU3e; VZsSp: if (!(HNCORE()->get_product_status() == "\x63\x6f\156\156\x65\143\164\145\x64")) { goto tBIJc; } goto lvX2e; Nsv6i: } public function hnapisode_cache_menu($nav) { $nav["\61\62\x30"] = array("\x73\x6c\x75\x67" => "\150\x6e\155\x67\55\143\x61\143\150\x65\55\x6d\x61\x6e\x61\147\145\x72", "\143\x61\154\x6c\x62\141\143\x6b" => array($this, "\x68\156\x6d\x67\137\143\141\x63\150\145\137\155\141\156\x61\147\x65\x5f\x70\141\x67\145"), "\164\151\x74\154\x65" => __("\110\116\x4d\107\x20\103\x61\143\150\x65", "\x68\x6e\x6d\147\145\160\x69\163"), "\x69\x63\157\156" => "\146\x61\x2d\160\x6c\x61\x79\55\x63\x69\x72\x63\x6c\x65"); return $nav; } public function hnmg_cache_manage_page() { goto o5m2r; o5m2r: $cache_count = json_decode($this->cacheCount()); goto kT22d; Oqz2Y: echo view("\110\116\115\107\x3a\72\154\141\171\157\165\x74\x73\x2e\x63\x61\143\150\x65", compact("\x63\141\x63\x68\x65\x5f\143\157\x75\156\x74", "\x67\x65\x74\x5f\143\x61\x63\x68\145")); goto WLayA; kT22d: $get_cache = json_decode($this->getCache()); goto Oqz2Y; WLayA: } public function delete_all_cache() { goto FMzqu; pWI9j: $cache_deleted = $result["\x63\x61\x63\150\x65\137\x64\x65\x6c\145\164\x65\144"] ?? 0; goto BI_E_; AF0bb: $total_cache = $result["\x74\157\164\x61\x6c\x5f\143\x61\143\150\145"] ?? 0; goto q1Asa; efxkI: $status = "\123\165\x63\x63\x65\x73\x73\146\x75\154\x6c\171"; goto AF0bb; FMzqu: $result = json_decode($this->delAllCache(0), true); goto efxkI; q1Asa: $time_limit = $result["\x74\151\155\145\137\154\151\155\x69\x74"] ?? 0; goto pWI9j; BI_E_: wp_send_json_success(["\163\164\x61\x74\x75\163" => $status, "\x74\157\x74\141\154\x5f\143\x61\x63\x68\145" => $total_cache, "\164\151\x6d\145\137\x6c\151\x6d\x69\164" => $time_limit, "\x63\x61\143\x68\145\x5f\x64\145\154\145\164\x65\x64" => $cache_deleted]); goto fKsz6; fKsz6: wp_die(); goto tMbJs; tMbJs: } public function delAllCache($timeCache) { goto ARfqP; NRWld: $getDirContents = $this->getDirContents($this->folderCache); goto YJYlw; ijxS8: $result["\143\x61\143\x68\x65\x5f\143\157\165\156\164"] = $i - $j; goto uakha; HHZ5E: foreach ($getDirContents as $key => $value) { goto Wd5HV; BQ4fd: Klonr: goto Z4s9z; SuVFV: Jhrqe: goto TY9ni; DTL50: EyyIB: goto SuVFV; NB5b3: if (!($timeCache <= time() - filemtime($value))) { goto KGCzN; } goto qvN3x; Wd5HV: if (!(strpos($value, "\56\164\x78\x74") !== false)) { goto EyyIB; } goto KK8ox; Z4s9z: KGCzN: goto DTL50; MaX9Y: if (!unlink($value)) { goto Klonr; } goto A6qJo; KK8ox: $i++; goto NB5b3; A6qJo: $result["\163\x74\141\x74\165\x73"] = 1; goto BQ4fd; qvN3x: $j++; goto MaX9Y; TY9ni: } goto hPnYd; Lbg76: $result["\143\141\143\x68\145\x5f\144\145\154\145\x74\145\144"] = $j; goto ijxS8; vN08w: $result["\x74\x6f\x74\141\154\137\143\x61\143\x68\x65"] = $i; goto Lbg76; JT1eb: $i = $j = 0; goto HHZ5E; Ob3yf: return json_encode($result); goto PYbxa; icTDR: $this->removeEmptySubFolders($this->folderCache); goto Ob3yf; hPnYd: LCHgF: goto vN08w; ARfqP: $result = array("\x73\164\x61\164\x75\x73" => 0, "\x74\157\164\141\x6c\137\x63\x61\x63\150\x65" => 0, "\x74\x69\x6d\x65\x5f\x6c\x69\x6d\151\164" => $timeCache, "\x63\141\x63\x68\145\137\x64\145\154\x65\164\x65\x64" => 0, "\x63\141\143\x68\x65\137\143\x6f\x75\156\164" => 0); goto NRWld; YJYlw: if (!$getDirContents) { goto RcDC0; } goto JT1eb; uakha: RcDC0: goto icTDR; PYbxa: } public function reset_player_cache() { goto xNUrY; RVgwL: $film_meta = get_haunmovies($post_id, HNMG_EPS, true); goto D7vfv; Bvf1t: $link = $data[$server - 1]["\150\141\165\x6e\x6d\x6f\x76\x69\x65\x73\137\163\145\x72\x76\x65\x72\137\144\141\x74\x61"][$episode_slug]["\150\x61\165\156\x6d\x6f\166\151\x65\x73\137\145\160\x5f\154\151\156\153"]; goto f9ytG; f9ytG: $cacheData = $this->delCache($link); goto VIAMQ; VIAMQ: wp_send_json($cacheData); goto r3Gjw; D7vfv: $data = json_decode($film_meta, true); goto Bvf1t; aVnEZ: $post_id = isset($_POST["\x70\157\x73\x74\x5f\x69\144"]) ? (int) $_POST["\x70\157\163\x74\137\151\144"] : ''; goto wGca4; xNUrY: $server = isset($_POST["\x73\x65\x72\166\x65\x72\137\x69\144"]) ? (int) $_POST["\163\145\x72\x76\145\162\x5f\x69\x64"] : ''; goto aVnEZ; wGca4: $episode_slug = isset($_POST["\x65\x70\x69\163\x6f\144\x65\137\163\154\165\x67"]) ? str_replace("\x2d", "\x5f", wp_strip_all_tags($_POST["\145\160\x69\163\x6f\144\x65\137\163\x6c\165\147"])) : ''; goto RVgwL; r3Gjw: } public function readCache($name) { goto L6TXh; onAJ5: $result = ''; goto dgsCq; GMDlM: e3EGh: goto bqzdr; WT2qJ: if (!($this->timeCache > time() - filemtime($file))) { goto qc62f; } goto V2Qv6; WvCV1: lZQl7: goto WT2qJ; V2Qv6: $result = file_get_contents($file); goto CQF5g; dgsCq: $createFolderCache = $this->createFolderCache($name); goto f2qcO; uK1V_: Adm_Z: goto GMDlM; XWukP: if ($this->timeCache != '') { goto lZQl7; } goto YC2xU; wr_Wg: if (!file_exists($file)) { goto e3EGh; } goto XWukP; qTRzZ: goto Adm_Z; goto WvCV1; f2qcO: $file = $this->folderCache . "\x2f" . $createFolderCache . "\x2f" . $name . "\56\164\x78\x74"; goto wr_Wg; bqzdr: return $result; goto jbpqW; L6TXh: $name = md5(md5($name)); goto onAJ5; CQF5g: qc62f: goto uK1V_; YC2xU: $result = file_get_contents($file); goto qTRzZ; jbpqW: } public function getCache() { goto iOrxN; ZDKdr: $getDirContents = $this->getDirContents($this->folderCache); goto IlDB1; IlDB1: $i = 0; goto rKB4r; Wf6OO: IpkwD: goto h3bHC; O20Mx: foreach ($getDirContents as $key => $value) { goto wQKV2; Lx2K4: wBCt2: goto RLor5; TVkjn: lBxuv: goto Lx2K4; rBmou: $result[] = array("\x66\151\154\145" => $value); goto TVkjn; wQKV2: if (!strpos($value, "\x2e\x74\170\x74")) { goto lBxuv; } goto rBmou; RLor5: } goto Wf6OO; Lv1xz: MOLQG: goto vCVlc; h3bHC: return json_encode($result); goto Lv1xz; iOrxN: $result = array(); goto ZDKdr; rKB4r: if (!$getDirContents) { goto MOLQG; } goto O20Mx; vCVlc: } public function saveCache($name, $data) { goto XMw66; rwZze: mkdir($this->folderCache, 0777, true); goto FoiVF; cijSe: $this->wp_filesystem->put_contents($index_file, "\x3c\77\x70\x68\160\40\x2f\57\40\x53\x69\154\x65\156\x63\145\40\x69\x73\40\x67\157\154\x64\x65\156\56", FS_CHMOD_FILE); goto JXMB2; fncdK: if (is_dir($dir)) { goto RI0UH; } goto c9aN0; FoiVF: mnW3b: goto meb6m; voLLj: if (is_dir($this->folderCache)) { goto mnW3b; } goto rwZze; R0jg1: $this->wp_filesystem->put_contents($file, $data, FS_CHMOD_FILE); goto bVGY0; IgH_h: RI0UH: goto R0jg1; XMw66: $name = md5(md5($name)); goto V2Nyn; c9aN0: mkdir($dir, 0777, true); goto IgH_h; V2Nyn: $createFolderCache = $this->createFolderCache($name); goto voLLj; XDcX3: Dj7YC: goto zhh_w; TwGsh: chmod($this->folderCache, 0777); goto XDcX3; meb6m: if (chmod($this->folderCache, 0777)) { goto Dj7YC; } goto TwGsh; zhh_w: $dir = $this->folderCache . "\57" . $createFolderCache; goto Uti2u; bVGY0: $index_file = WP_CONTENT_DIR . "\57\x69\156\x64\x65\x78\x2e\160\150\x70"; goto cijSe; Uti2u: $file = $dir . "\x2f" . $name . "\x2e\x74\170\x74"; goto fncdK; JXMB2: } public function delCache($name) { goto NUOzV; Yh9gm: $result = array("\163\x74\x61\x74\x75\x73" => 0, "\x72\x65\163\165\154\164" => "\x44\x65\x6c\x65\x74\x65\x20\x65\162\x72\x6f\162"); goto AuZXc; AuZXc: goto kNvYi; goto rlrPA; REPIg: $result = array("\163\x74\141\x74\x75\163" => 0, "\x72\145\x73\165\x6c\164" => "\x4c\x69\156\x6b\40\x6e\157\x74\40\x65\170\x69\x73\164\163"); goto ETHEq; CVLMe: kNvYi: goto ksalY; jDDGe: return $result; goto YipfS; WJnzG: $result = array("\163\x74\141\164\x75\163" => 1, "\x72\145\163\x75\x6c\x74" => "\x44\x65\x6c\145\164\x65\144"); goto CVLMe; rlrPA: LlQWX: goto WJnzG; NUOzV: $result = ''; goto grkyh; lMMKw: $file = $this->folderCache . "\x2f" . $createFolderCache . "\x2f" . $name . "\x2e\x74\170\x74"; goto DXLjD; ksalY: hk16H: goto jDDGe; puOvz: jtzDf: goto h8g2L; oeVUU: $createFolderCache = $this->createFolderCache($name); goto lMMKw; DXLjD: if (file_exists($file)) { goto jtzDf; } goto REPIg; ETHEq: goto hk16H; goto puOvz; h8g2L: if (unlink($file)) { goto LlQWX; } goto Yh9gm; grkyh: $name = md5(md5($name)); goto oeVUU; YipfS: } public function cacheCount() { goto Ponxp; C7Xg0: $i = 1; goto yHsd7; fAjUz: $getDirContents = $this->getDirContents($this->folderCache); goto C7Xg0; h960e: XNcKV: goto WWeFm; WWeFm: AKBTU: goto iZDPV; yHsd7: if (!$getDirContents) { goto AKBTU; } goto RjYib; RjYib: foreach ($getDirContents as $key => $value) { goto yY8vZ; yY8vZ: if (!strpos($value, "\56\164\170\x74")) { goto nCOA8; } goto IuW5D; IuW5D: $result["\162\x65\x73\165\154\x74"] = 1; goto XExY2; cmzDU: nCOA8: goto FUTL3; AnVWF: $i++; goto cmzDU; FUTL3: ESgVk: goto BVuco; XExY2: $result["\164\157\164\141\x6c\137\143\x61\x63\x68\145"] = $i; goto AnVWF; BVuco: } goto h960e; Ponxp: $result = array(); goto fAjUz; iZDPV: return json_encode($result); goto pZIU1; pZIU1: } private function createFolderCache($name) { goto NeB9v; hcjTr: $folder2 = substr($name, 2, 2); goto KP368; KP368: return $folder1 . "\57" . $folder2; goto isa_t; NeB9v: $folder1 = substr($name, 0, 2); goto hcjTr; isa_t: } private function getDirContents($dir, &$results = array()) { goto W0RgG; nVLzY: foreach ($files as $key => $value) { goto Gfej0; zOIBF: zcseU: goto PFzwA; FK9H9: $results[] = $path; goto YTrk_; Gfej0: $path = realpath($dir . DIRECTORY_SEPARATOR . $value); goto HRAum; PFzwA: $results[] = $path; goto etp30; HRAum: if (!is_dir($path)) { goto zcseU; } goto htgI0; htgI0: if (!($value != "\56" && $value != "\x2e\x2e")) { goto uSBfx; } goto zDDhL; EkMbR: goto pPY2m; goto zOIBF; YTrk_: uSBfx: goto EkMbR; zDDhL: $this->getDirContents($path, $results); goto FK9H9; etp30: pPY2m: goto O3pIt; O3pIt: D5FZC: goto dmY5h; dmY5h: } goto QrwAO; nZ9Cs: return $results; goto gQN57; W0RgG: $files = scandir($dir); goto nVLzY; QrwAO: MZK0f: goto nZ9Cs; gQN57: } private function removeEmptySubFolders($path) { goto Q3yoC; J9r5A: yk4Ty: goto dmoGt; GZkHS: foreach (glob($path . DIRECTORY_SEPARATOR . "\x2a") as $file) { $empty &= is_dir($file) && $this->removeEmptySubFolders($file); rJDam: } goto J9r5A; dmoGt: return $empty && @rmdir($path); goto ED0Q_; Q3yoC: $empty = true; goto GZkHS; ED0Q_: } }
