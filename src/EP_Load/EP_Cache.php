<?php
/*   __________________________________________________
    |  		Code By HauN - HauNYTB.COM  2.0.14    	  |
    |          Telegram: https://t.me/haunytb         |
    |    	   Url : https://haunytb.com    		  |
    |_________________________________________________|
*/
 namespace HNMG\EP_Load; class EP_Cache { public $timeCache; public $folderCache; public function __construct() { goto cvcIP; bZyLb: if (!function_exists("\x57\120\137\x46\151\x6c\x65\x73\171\x73\x74\145\x6d")) { require_once ABSPATH . "\x77\160\x2d\x61\x64\155\x69\x6e\x2f\151\x6e\143\x6c\165\144\145\x73\57\x66\x69\x6c\x65\56\160\150\160"; } goto iqEX1; DWU0i: WP_Filesystem(); goto Wu1Dc; Wu1Dc: $this->wp_filesystem = $wp_filesystem; goto vWRyW; cvcIP: $this->folderCache = HNMG_CACHE; goto vp_aF; vp_aF: if (is_dir($this->folderCache)) { goto XvMYu; } goto C1shi; SZ_1q: XvMYu: goto PMW0I; PMW0I: $this->timeCache = 3600; goto bZyLb; C1shi: wp_mkdir_p($this->folderCache); goto SZ_1q; iqEX1: global $wp_filesystem; goto DWU0i; vWRyW: } public function register() { goto LQdey; tWZsR: add_action("\x77\160\137\x61\x6a\x61\170\x5f\x64\145\x6c\145\x74\x65\x5f\x61\x6c\154\x5f\x63\x61\x63\x68\145", [$this, "\x64\x65\x6c\x65\x74\x65\x5f\x61\154\154\137\143\141\x63\150\x65"]); goto dU82Z; o0o96: add_filter("\x48\116\115\x47\x2d\x74\x61\142\x73", [$this, "\x68\x6e\x61\x70\151\163\x6f\144\145\x5f\x63\x61\143\x68\145\x5f\x6d\145\x6e\x75"]); goto s2NKz; LQdey: if (!(HNCORE()->get_product_status() == "\143\x6f\156\x6e\145\143\x74\145\x64")) { goto huHYN; } goto L0_tC; L0_tC: add_action("\167\x70\x5f\141\152\141\170\x5f\x72\x65\x73\x65\x74\137\x70\x6c\x61\171\x65\162\x5f\x63\141\143\x68\x65", [$this, "\162\x65\163\145\x74\137\160\154\x61\x79\x65\162\x5f\143\141\x63\x68\145"]); goto szRFA; s2NKz: add_filter("\x48\116\x4d\x47\x2d\160\141\x67\x65\x73", [$this, "\150\x6e\x61\160\x69\163\x6f\144\x65\x5f\x63\141\143\x68\145\137\155\145\156\165"]); goto tWZsR; dU82Z: add_action("\x77\160\x5f\x61\x6a\x61\x78\137\156\x6f\160\x72\x69\166\x5f\x64\145\x6c\145\x74\x65\137\x61\154\154\137\x63\x61\143\150\145", [$this, "\144\x65\154\145\x74\145\x5f\x61\154\154\x5f\143\141\x63\x68\145"]); goto oJPHI; oJPHI: huHYN: goto HgzjH; szRFA: add_action("\x77\x70\x5f\x61\x6a\x61\x78\x5f\x6e\x6f\x70\x72\151\166\137\x72\x65\x73\x65\x74\x5f\160\154\x61\x79\x65\162\137\x63\x61\143\x68\145", [$this, "\x72\145\x73\145\164\137\160\154\141\x79\x65\x72\137\x63\x61\x63\x68\145"]); goto o0o96; HgzjH: } public function hnapisode_cache_menu($nav) { $nav["\x31\62\x30"] = array("\163\154\x75\147" => "\x68\x6e\x6d\147\55\143\141\143\x68\x65\x2d\x6d\x61\156\141\147\x65\162", "\x63\141\x6c\154\x62\141\x63\153" => array($this, "\150\x6e\155\147\x5f\143\141\x63\150\145\137\155\x61\156\x61\147\x65\x5f\x70\x61\147\145"), "\x74\151\164\x6c\145" => __("\110\x4e\x4d\107\x20\x43\141\x63\150\x65", "\150\x6e\x6d\147\145\x70\x69\163"), "\151\143\157\156" => "\x66\141\x2d\x70\x6c\141\171\55\143\x69\x72\143\154\x65"); return $nav; } public function hnmg_cache_manage_page() { goto nr2zm; p6xME: echo view("\x48\x4e\x4d\x47\x3a\x3a\x6c\141\x79\x6f\165\x74\163\x2e\143\x61\x63\x68\145", compact("\x63\141\143\x68\x65\x5f\143\x6f\x75\x6e\x74", "\x67\145\164\137\x63\x61\143\150\x65")); goto R5I5D; y2g2F: $get_cache = json_decode($this->getCache()); goto p6xME; nr2zm: $cache_count = json_decode($this->cacheCount()); goto y2g2F; R5I5D: } public function delete_all_cache() { goto NfqDS; a0KUV: wp_send_json_success(["\x73\164\x61\164\165\x73" => $status, "\x74\x6f\x74\141\154\x5f\x63\141\143\x68\145" => $total_cache, "\164\x69\155\x65\137\x6c\x69\x6d\x69\x74" => $time_limit, "\143\x61\143\150\x65\x5f\x64\145\154\145\x74\145\144" => $cache_deleted]); goto EFXu4; NfqDS: $result = json_decode($this->delAllCache(0), true); goto HnyPo; Hyk4S: $time_limit = $result["\x74\x69\x6d\145\137\x6c\x69\x6d\x69\x74"] ?? 0; goto rx_Ld; L1iXA: $total_cache = $result["\164\157\x74\141\x6c\x5f\x63\x61\x63\150\x65"] ?? 0; goto Hyk4S; rx_Ld: $cache_deleted = $result["\143\141\x63\150\x65\x5f\144\145\154\x65\x74\145\x64"] ?? 0; goto a0KUV; EFXu4: wp_die(); goto g7gqp; HnyPo: $status = "\x53\x75\x63\x63\x65\163\163\x66\x75\154\x6c\x79"; goto L1iXA; g7gqp: } public function delAllCache($timeCache) { goto kwW9w; XR30T: $result["\164\x6f\164\x61\154\x5f\143\x61\x63\x68\x65"] = $i; goto Frn1A; kwW9w: $result = array("\163\164\141\164\x75\163" => 0, "\164\x6f\x74\141\x6c\137\143\x61\x63\x68\145" => 0, "\x74\151\155\x65\x5f\x6c\x69\155\x69\164" => $timeCache, "\143\x61\x63\x68\x65\x5f\144\145\154\145\x74\145\144" => 0, "\x63\x61\143\150\x65\x5f\x63\157\165\x6e\164" => 0); goto iUWwH; ewbF5: return json_encode($result); goto LCNEc; YtKd4: foreach ($getDirContents as $key => $value) { goto Vaq1I; ataCR: ONQSB: goto xOdTF; K21GE: $j++; goto g7saS; kg3lt: gzGHt: goto m8di8; UT9MH: $i++; goto Y7xnh; Y7xnh: if (!($timeCache <= time() - filemtime($value))) { goto Q9jGG; } goto K21GE; g7saS: if (!unlink($value)) { goto gzGHt; } goto zgOA4; N8X4I: OgYLq: goto ataCR; Vaq1I: if (!(strpos($value, "\x2e\164\x78\x74") !== false)) { goto OgYLq; } goto UT9MH; zgOA4: $result["\x73\x74\x61\164\x75\163"] = 1; goto kg3lt; m8di8: Q9jGG: goto N8X4I; xOdTF: } goto BpEl8; smBJp: $this->removeEmptySubFolders($this->folderCache); goto ewbF5; Frn1A: $result["\143\x61\x63\x68\145\137\x64\145\x6c\145\x74\x65\x64"] = $j; goto C3KzU; rvObY: $i = $j = 0; goto YtKd4; YNXB1: if (!$getDirContents) { goto RqzYv; } goto rvObY; C3KzU: $result["\x63\141\x63\150\145\137\x63\x6f\165\156\x74"] = $i - $j; goto ZD3TO; BpEl8: M6YAU: goto XR30T; ZD3TO: RqzYv: goto smBJp; iUWwH: $getDirContents = $this->getDirContents($this->folderCache); goto YNXB1; LCNEc: } public function reset_player_cache() { goto WeH_K; SKceY: $cacheData = $this->delCache($link); goto u2_QC; qrSim: $post_id = isset($_POST["\x70\x6f\163\164\137\x69\144"]) ? (int) $_POST["\x70\x6f\163\164\x5f\151\x64"] : ''; goto TKCll; yRvgJ: $film_meta = get_post_meta($post_id, HNMG_EPS, true); goto gvjQ4; u2_QC: wp_send_json($cacheData); goto meDwQ; TKCll: $episode_slug = isset($_POST["\x65\x70\x69\163\x6f\144\145\137\163\x6c\165\147"]) ? str_replace("\55", "\137", wp_strip_all_tags($_POST["\x65\x70\151\163\157\x64\x65\137\163\154\165\x67"])) : ''; goto yRvgJ; lfvRx: $link = $data[$server - 1]["\150\x61\x75\156\155\157\x76\151\145\x73\137\163\x65\162\x76\145\162\137\144\x61\164\141"][$episode_slug]["\x68\141\165\x6e\155\157\x76\x69\x65\x73\137\145\x70\x5f\154\151\156\153"]; goto SKceY; WeH_K: $server = isset($_POST["\163\145\162\x76\x65\162\x5f\151\x64"]) ? (int) $_POST["\x73\x65\x72\166\x65\x72\x5f\151\144"] : ''; goto qrSim; gvjQ4: $data = json_decode($film_meta, true); goto lfvRx; meDwQ: } public function readCache($name) { goto bRv0P; yqecQ: $createFolderCache = $this->createFolderCache($name); goto I3T0c; ifUCE: S4TL1: goto LYj9c; TXvWu: $result = file_get_contents($file); goto yG4Fm; s59bg: $result = file_get_contents($file); goto t9QF1; I3T0c: $file = $this->folderCache . "\57" . $createFolderCache . "\57" . $name . "\56\x74\x78\164"; goto q8xOX; m1uuZ: rdVdz: goto uEENY; Qg1LO: $result = ''; goto yqecQ; yG4Fm: goto cUdcu; goto ifUCE; Pu5JK: cUdcu: goto m1uuZ; LYj9c: if (!($this->timeCache > time() - filemtime($file))) { goto InlZ2; } goto s59bg; bRv0P: $name = md5(md5($name)); goto Qg1LO; bJKI4: if ($this->timeCache != '') { goto S4TL1; } goto TXvWu; uEENY: return $result; goto LE5Hk; t9QF1: InlZ2: goto Pu5JK; q8xOX: if (!file_exists($file)) { goto rdVdz; } goto bJKI4; LE5Hk: } public function getCache() { goto wK9Bm; ir5c1: vran1: goto XQaiB; Sw1em: foreach ($getDirContents as $key => $value) { goto ms4RJ; N1CNi: YIXaf: goto iCbNH; TwhqS: d4q39: goto N1CNi; ISmJe: $result[] = array("\146\151\x6c\145" => $value); goto TwhqS; ms4RJ: if (!strpos($value, "\56\x74\x78\x74")) { goto d4q39; } goto ISmJe; iCbNH: } goto ir5c1; pEfkv: $i = 0; goto A97Wo; ni10M: SA8CE: goto GGi39; Gh3N4: $getDirContents = $this->getDirContents($this->folderCache); goto pEfkv; A97Wo: if (!$getDirContents) { goto SA8CE; } goto Sw1em; wK9Bm: $result = array(); goto Gh3N4; XQaiB: return json_encode($result); goto ni10M; GGi39: } public function saveCache($name, $data) { goto xmbqJ; vO09Z: mkdir($dir, 0777, true); goto NF6h8; P4LT0: if (chmod($this->folderCache, 0777)) { goto DFt0F; } goto kn5up; VX6if: $index_file = WP_CONTENT_DIR . "\x2f\x69\156\x64\x65\x78\56\x70\150\160"; goto UvffA; hFG9A: iFX0D: goto P4LT0; kn5up: chmod($this->folderCache, 0777); goto tpEoi; bVuMi: $this->wp_filesystem->put_contents($file, $data, FS_CHMOD_FILE); goto VX6if; lN9A7: $createFolderCache = $this->createFolderCache($name); goto oTPxZ; UvffA: $this->wp_filesystem->put_contents($index_file, "\74\x3f\160\150\160\40\57\x2f\40\x53\x69\154\x65\x6e\x63\x65\40\x69\x73\40\x67\x6f\x6c\x64\x65\156\56", FS_CHMOD_FILE); goto VkiTC; K5kCU: if (is_dir($dir)) { goto BWFDe; } goto vO09Z; xmbqJ: $name = md5(md5($name)); goto lN9A7; eYJha: mkdir($this->folderCache, 0777, true); goto hFG9A; iK1f9: $file = $dir . "\57" . $name . "\56\x74\170\164"; goto K5kCU; oTPxZ: if (is_dir($this->folderCache)) { goto iFX0D; } goto eYJha; R1PUE: $dir = $this->folderCache . "\57" . $createFolderCache; goto iK1f9; NF6h8: BWFDe: goto bVuMi; tpEoi: DFt0F: goto R1PUE; VkiTC: } public function delCache($name) { goto uQaOa; oKlXP: $result = array("\163\x74\x61\x74\x75\x73" => 1, "\x72\x65\x73\165\x6c\x74" => "\x44\145\154\145\x74\x65\144"); goto mizMp; qEh0o: $result = array("\x73\164\x61\164\165\x73" => 0, "\x72\145\163\x75\x6c\164" => "\114\x69\156\153\x20\156\x6f\164\x20\145\x78\x69\x73\x74\163"); goto HKUP_; OGAJa: Xt6Vs: goto oKlXP; sQjVQ: $file = $this->folderCache . "\57" . $createFolderCache . "\57" . $name . "\56\164\x78\164"; goto qU6eg; IuS5G: J0n0s: goto xxBPB; H3ywa: b1Ts4: goto P0_yn; P0_yn: if (unlink($file)) { goto Xt6Vs; } goto U2V6C; uQaOa: $result = ''; goto Nyi_2; Nyi_2: $name = md5(md5($name)); goto Ll1fw; mizMp: UvaFM: goto IuS5G; xxBPB: return $result; goto iA2Uh; qU6eg: if (file_exists($file)) { goto b1Ts4; } goto qEh0o; HKUP_: goto J0n0s; goto H3ywa; UzjHo: goto UvaFM; goto OGAJa; Ll1fw: $createFolderCache = $this->createFolderCache($name); goto sQjVQ; U2V6C: $result = array("\x73\x74\141\x74\165\163" => 0, "\x72\x65\163\165\154\x74" => "\x44\145\x6c\x65\x74\x65\x20\x65\162\x72\157\x72"); goto UzjHo; iA2Uh: } public function cacheCount() { goto T53qA; Alff0: $getDirContents = $this->getDirContents($this->folderCache); goto xtUua; x9w4W: foreach ($getDirContents as $key => $value) { goto JQTdv; Tsnte: $result["\164\157\x74\x61\154\137\x63\141\x63\150\x65"] = $i; goto Upj6U; nZkXP: $result["\x72\x65\163\165\154\x74"] = 1; goto Tsnte; Upj6U: $i++; goto Nct06; JQTdv: if (!strpos($value, "\x2e\x74\170\x74")) { goto Nxhgm; } goto nZkXP; u4E50: KlLFh: goto SHXIM; Nct06: Nxhgm: goto u4E50; SHXIM: } goto or4VT; fwWrn: if (!$getDirContents) { goto Ao60R; } goto x9w4W; T53qA: $result = array(); goto Alff0; xtUua: $i = 1; goto fwWrn; or4VT: DZucR: goto rttDp; G0_G8: return json_encode($result); goto s6EGV; rttDp: Ao60R: goto G0_G8; s6EGV: } private function createFolderCache($name) { goto toSvG; toSvG: $folder1 = substr($name, 0, 2); goto N8m0c; N8m0c: $folder2 = substr($name, 2, 2); goto ldzpn; ldzpn: return $folder1 . "\x2f" . $folder2; goto mt8zS; mt8zS: } private function getDirContents($dir, &$results = array()) { goto fgGUb; PI0Qo: return $results; goto ObjjL; QIZRi: rBjUc: goto PI0Qo; eWhxf: foreach ($files as $key => $value) { goto zc7L8; CNHwg: if (!is_dir($path)) { goto JziHy; } goto nujTU; HrYFX: goto lkwlU; goto f2Y5X; a2A2T: lkwlU: goto HC9rV; W1s6l: $results[] = $path; goto a2A2T; zc7L8: $path = realpath($dir . DIRECTORY_SEPARATOR . $value); goto CNHwg; Kq7il: $results[] = $path; goto WqdrI; nzOjQ: $this->getDirContents($path, $results); goto Kq7il; f2Y5X: JziHy: goto W1s6l; WqdrI: Yehxr: goto HrYFX; nujTU: if (!($value != "\x2e" && $value != "\x2e\56")) { goto Yehxr; } goto nzOjQ; HC9rV: sGcmk: goto Dv3qO; Dv3qO: } goto QIZRi; fgGUb: $files = scandir($dir); goto eWhxf; ObjjL: } private function removeEmptySubFolders($path) { goto FGvXw; U5cZE: foreach (glob($path . DIRECTORY_SEPARATOR . "\x2a") as $file) { $empty &= is_dir($file) && $this->removeEmptySubFolders($file); kLmKE: } goto pPsa9; mwdS3: return $empty && @rmdir($path); goto YHrqG; pPsa9: H88bV: goto mwdS3; FGvXw: $empty = true; goto U5cZE; YHrqG: } }
