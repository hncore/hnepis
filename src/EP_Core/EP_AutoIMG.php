<?php
/*   __________________________________________________
    |  		Code By HauN - HauNYTB.COM  2.0.14    	  |
    |          Telegram: https://t.me/haunytb         |
    |    	   Url : https://haunytb.com    		  |
    |_________________________________________________|
*/
 namespace HNMG\EP_Core; class EP_AutoIMG { public function __construct() { goto FNlvH; FNlvH: if (!$this->is_metabox_options_set()) { goto QdK8M; } goto UF8uK; UF8uK: $this->initialize_hooks(); goto WM41C; WM41C: QdK8M: goto VVAYc; VVAYc: } private function is_metabox_options_set() { return isset($_POST["\137\x68\141\x75\x6e\x6d\145\164\141\142\157\x78"]) || isset($_POST["\x5f\x76\x69\144\x65\157\x73\137\x6d\x65\x74\x61\x62\x6f\x78\137\157\160\164\151\157\156\163"]) || isset($_POST["\x5f\156\145\167\163\x5f\155\x65\x74\141\x62\157\x78\137\157\x70\x74\x69\157\x6e\x73"]); } private function initialize_hooks() { goto Cb0jT; Cb0jT: $meta_options = $_POST["\137\150\x61\165\156\x6d\145\164\x61\x62\x6f\170"] ?? ''; goto ZBOxA; aMwYO: if (!(!empty($meta_options["\163\141\x76\x65\x5f\160\157\163\x74\145\x72\x5f\x69\x6d\x61\147\x65"]) || !empty($meta_options["\x73\x65\164\x5f\x72\145\x61\x74\165\162\x65\x64\x5f\151\x6d\x61\x67\145"]) || !empty($video_meta["\x73\x65\x74\x5f\141\x73\137\x66\x65\x61\x74\165\162\x65\144\x5f\151\x6d\141\x67\145"]))) { goto j0tSh; } goto UkAYl; KZG2p: pXspa: goto aMwYO; UkAYl: add_action("\163\141\x76\145\x5f\160\x6f\x73\164", [$this, "\110\x4e\107\145\156\145\162\x61\164\x65\x5f\120\157\163\164\145\162\x5f\x49\x6d\x61\147\145"]); goto SS03g; ZBOxA: $news_meta = $_POST["\x5f\156\x65\x77\163\137\155\x65\164\x61\142\x6f\x78\x5f\x6f\x70\x74\151\x6f\156\163"] ?? ''; goto AJZHJ; SS03g: j0tSh: goto GWpjn; Pao1h: add_filter("\143\x6f\x6e\x74\x65\156\x74\x5f\163\141\x76\x65\x5f\160\x72\x65", [$this, "\150\141\x75\x6e\x5f\x70\157\163\164\137\163\x61\x76\x65\137\151\155\x61\147\145\x73"]); goto KZG2p; uLt7s: if (!(!empty($meta_options["\x73\x61\166\145\x5f\141\154\x6c\x5f\x69\x6d\147"]) || !empty($news_meta["\163\141\x76\145\137\141\154\154\x5f\151\x6d\x67"]))) { goto pXspa; } goto Pao1h; AJZHJ: $video_meta = $_POST["\x5f\166\x69\144\145\157\163\137\155\145\164\x61\142\157\170\137\x6f\160\x74\x69\x6f\156\163"] ?? ''; goto uLt7s; GWpjn: } public function HNGenerate_Poster_Image($post_id) { goto M8w5x; lKPri: y_gGH: goto mygn6; xPO7X: if ($post->post_type === "\160\x6f\x73\164") { goto LH3Hx; } goto YFVZ2; Oc0cA: if ($post->post_type === "\x76\151\x64\x65\157") { goto uoCxR; } goto xPO7X; rOxzm: uoCxR: goto Peu0I; aGHjH: LH3Hx: goto V3u6o; YFVZ2: goto y_gGH; goto rOxzm; V3u6o: $this->process_post_thumbnail($post_id); goto lKPri; M8w5x: global $post; goto Oc0cA; nKaAQ: goto y_gGH; goto aGHjH; Peu0I: $this->process_video_thumbnail($post_id, $_POST["\137\x76\151\144\145\157\163\x5f\155\x65\164\141\142\157\170\x5f\x6f\160\164\151\x6f\156\163"] ?? ''); goto nKaAQ; mygn6: } private function process_video_thumbnail($post_id, $video_meta) { goto rVgnF; VY67r: $this->haun_save_images($image_url, $post_id, $_POST["\160\157\x73\x74\137\164\x69\164\x6c\x65"] ?? '', true); goto KR5BT; KtBCi: $set_feature = $video_meta["\163\145\164\137\141\163\137\146\x65\x61\x74\165\x72\x65\x64\137\151\155\141\147\145"] ?? ''; goto d4S5g; rVgnF: $image_url = $video_meta["\x76\151\144\x65\157\x5f\x74\150\165\x6d\142\156\141\x69\x6c\x5f\165\x72\x6c"] ?? ''; goto KtBCi; d4S5g: if (!($set_feature && !has_post_thumbnail($post_id))) { goto lDh38; } goto VY67r; KR5BT: lDh38: goto FJKaR; FJKaR: } private function process_post_thumbnail($post_id) { goto T7DKQ; VpKKL: if ($save_poster && $poster_url) { goto RbEQf; } goto w9V7W; w9V7W: $poster_image_url = $poster_url; goto YZZjq; aMGSI: $this->haun_save_images($thumb_url, $post_id, $_POST["\160\157\x73\164\137\164\x69\164\x6c\145"] ?? '', true); goto lXNjA; RSu7K: RbEQf: goto SFn05; YZZjq: goto BgSeA; goto RSu7K; CEv6k: $poster_url = $check_meta["\150\141\x75\156\x5f\x70\157\x73\164\145\x72\x5f\165\162\154"] ?? $meta["\150\141\165\x6e\x5f\x70\x6f\163\164\x65\162\x5f\x75\x72\x6c"] ?? ''; goto pGvsd; V6acZ: update_haunmovies($post_id, HNMG_META, $meta); goto NGkJ5; T7DKQ: $meta = get_haunmovies($post_id, HNMG_META, true); goto ltT3v; dmiQC: $meta["\x68\x61\165\156\137\160\x6f\163\x74\x65\x72\137\x75\162\x6c"] = $poster_image_url; goto fuKHr; ltT3v: $check_meta = $_POST["\x5f\150\x61\x75\x6e\155\145\164\141\142\x6f\170"] ?? ''; goto EaEWt; XzlIU: $meta["\x68\141\x75\156\137\164\150\x75\155\142\137\x75\x72\x6c"] = get_the_post_thumbnail_url($post_id, "\x6d\x6f\x76\151\145\x2d\x74\x68\x75\155\142") ?: $thumb_url; goto dmiQC; SFn05: $poster_image_url = $this->haun_save_images($poster_url, $post_id, $_POST["\160\157\163\164\137\164\151\164\x6c\x65"] ?? ''); goto vVcPR; eX5BI: if (!($set_feature && $thumb_url && !has_post_thumbnail($post_id))) { goto mKSXM; } goto aMGSI; Q1nGX: $meta["\x73\145\x74\x5f\x72\x65\141\x74\165\x72\145\x64\137\151\155\141\147\145"] = ''; goto V6acZ; pGvsd: $set_feature = $meta["\x73\x65\164\137\x72\145\x61\164\x75\162\145\x64\x5f\151\155\x61\147\x65"] ?? ''; goto l6G64; lXNjA: mKSXM: goto VpKKL; vVcPR: BgSeA: goto XzlIU; l6G64: $save_poster = $meta["\163\141\166\x65\137\x70\x6f\163\x74\145\162\137\151\155\141\x67\145"] ?? ''; goto eX5BI; EaEWt: $thumb_url = $check_meta["\x68\x61\x75\156\x5f\x74\150\165\155\142\x5f\x75\162\x6c"] ?? $meta["\x68\x61\165\156\x5f\164\150\165\x6d\x62\x5f\x75\162\x6c"] ?? ''; goto CEv6k; fuKHr: $meta["\x73\x61\166\145\x5f\160\157\x73\x74\x65\x72\137\151\155\x61\x67\145"] = ''; goto Q1nGX; NGkJ5: } public function haun_post_save_images($content) { goto WlSs9; M8VQ7: preg_match_all("\57\x3c\x69\155\147\x2e\x2a\x3f\163\x72\143\75\x22\50\56\x2a\77\x29\x22\x2f", stripslashes($content), $matches); goto A7KJC; A7KJC: foreach ($matches[1] as $image_url) { goto yoorF; HVLhD: F2sbU: goto nfQNu; yoorF: if (!($image_url && strpos($image_url, $_SERVER["\x48\x54\x54\120\137\110\x4f\123\x54"]) === false)) { goto uvhft; } goto wEDx1; GEPXG: $content = str_replace($image_url, $res["\x75\x72\x6c"], $content); goto iEhLC; iEhLC: uvhft: goto HVLhD; wEDx1: $res = $this->haun_save_images($image_url, $post_id, $post_title); goto GEPXG; nfQNu: } goto uHruO; dgSW6: return $content; goto yIG4Q; Mqeob: remove_filter("\x63\x6f\156\164\145\x6e\x74\137\163\141\166\x65\137\160\x72\x65", [$this, "\x68\141\x75\x6e\x5f\x70\x6f\x73\x74\x5f\x73\141\166\145\137\x69\x6d\141\147\145\163"]); goto dgSW6; HoSH6: CDmVe: goto Mqeob; dj4b5: $post_id = get_the_ID(); goto MeYIf; f0Z03: set_time_limit(500); goto dj4b5; uHruO: n3PJU: goto HoSH6; MeYIf: $post_title = $_POST["\x70\x6f\163\164\x5f\x74\151\164\x6c\x65"] ?? ''; goto M8VQ7; WlSs9: if (!(isset($_POST["\163\x61\x76\x65"]) || isset($_POST["\x70\165\142\154\151\x73\150"]))) { goto CDmVe; } goto f0Z03; yIG4Q: } public function haun_save_images($image_url, $post_id, $post_title, $set_thumb = false) { goto eOcXD; nxAIg: if ($res["\145\x72\x72\x6f\162"]) { goto aIord; } goto GFdMd; BYPEa: $res = wp_upload_bits($im_name, '', $file); goto nxAIg; Y9HuF: return $res; goto sactz; eOcXD: $file = file_get_contents($image_url); goto y7EjL; y7EjL: $im_name = sanitize_title($post_title) . "\55{$post_id}\56\152\x70\x67"; goto BYPEa; Iy4Hc: aIord: goto Y9HuF; GFdMd: $this->haun_insert_attachment($res["\146\151\154\x65"], $post_id, $set_thumb); goto Iy4Hc; sactz: } public function haun_insert_attachment($file, $post_id, $set_thumb) { goto awFGt; t0MKh: if (!$set_thumb) { goto mSQo8; } goto jMtMO; WQNxx: $attach_id = wp_insert_attachment($attachment, $file, $post_id); goto baf0x; awFGt: $filetype = wp_check_filetype($file); goto dSvbR; Kqeu6: mSQo8: goto q41Of; baf0x: wp_update_attachment_metadata($attach_id, wp_generate_attachment_metadata($attach_id, $file)); goto t0MKh; dSvbR: $attachment = ["\x67\x75\x69\x64" => wp_get_upload_dir()["\x75\162\154"] . "\x2f" . _wp_relative_upload_path($file), "\160\157\x73\x74\137\x6d\x69\155\x65\137\164\x79\x70\145" => $filetype["\x74\x79\160\x65"], "\x70\x6f\x73\x74\x5f\164\x69\x74\154\x65" => preg_replace("\57\134\x2e\133\136\56\135\x2b\44\x2f", '', basename($file)), "\160\x6f\163\164\x5f\x63\157\156\x74\x65\156\164" => '', "\x70\x6f\x73\x74\137\x73\x74\x61\164\165\163" => "\151\x6e\150\x65\x72\x69\164"]; goto WQNxx; jMtMO: set_post_thumbnail($post_id, $attach_id); goto Kqeu6; q41Of: return $attach_id; goto D34ys; D34ys: } }
