<?php
/*   __________________________________________________
    |  		Code By HauN - HauNYTB.COM  2.0.14    	  |
    |          Telegram: https://t.me/haunytb         |
    |    	   Url : https://haunytb.com    		  |
    |_________________________________________________|
*/
 namespace HNMG\EP_Core; class EP_News { public function __construct() { goto Y0Vpo; cdDpI: KsNGj: goto OuSbh; yaiMB: $this->initialize_hooks(); goto cdDpI; Y0Vpo: if (!$this->is_metabox_options_set()) { goto KsNGj; } goto yaiMB; OuSbh: } private function is_metabox_options_set() { return isset($_POST["\x5f\150\141\x75\156\155\145\164\x61\142\157\170"]) || isset($_POST["\137\x76\151\144\x65\157\x73\137\x6d\x65\164\141\142\157\170\x5f\157\x70\164\x69\x6f\156\163"]) || isset($_POST["\x5f\x6e\x65\167\x73\137\155\145\164\141\x62\157\170\137\157\160\x74\x69\157\156\x73"]); } private function initialize_hooks() { goto ttVQW; I_dk8: add_filter("\143\x6f\156\164\x65\156\164\137\163\x61\x76\145\137\160\162\145", [$this, "\150\x61\165\156\137\x70\157\x73\x74\137\163\141\166\x65\137\151\x6d\141\147\145\x73"]); goto RRvuh; ttVQW: $meta_options = $_POST["\137\x68\x61\x75\x6e\155\145\164\x61\142\157\170"] ?? ''; goto EFfZQ; RRvuh: atcf2: goto Qt829; q07us: add_action("\163\x61\x76\145\137\x70\x6f\163\x74", [$this, "\110\116\107\145\x6e\145\162\141\x74\x65\x5f\x50\x6f\163\164\x65\162\x5f\111\x6d\x61\147\x65"]); goto Vew2o; uSA0x: $video_meta = $_POST["\x5f\166\151\144\x65\x6f\x73\x5f\155\x65\164\x61\142\x6f\170\x5f\x6f\160\x74\x69\x6f\x6e\x73"] ?? ''; goto NurO_; Vew2o: ZVpcg: goto a9uDO; Qt829: if (!(!empty($meta_options["\163\141\x76\145\x5f\160\x6f\163\164\x65\162\x5f\x69\x6d\x61\147\145"]) || !empty($meta_options["\x73\x65\x74\137\162\x65\x61\x74\165\162\145\144\x5f\x69\x6d\141\x67\145"]) || !empty($video_meta["\x73\x65\x74\137\141\x73\x5f\146\145\x61\164\x75\x72\x65\x64\x5f\151\155\x61\147\x65"]))) { goto ZVpcg; } goto q07us; NurO_: if (!(!empty($meta_options["\x73\141\x76\145\x5f\141\x6c\x6c\x5f\x69\x6d\x67"]) || !empty($news_meta["\x73\x61\x76\x65\x5f\x61\154\x6c\137\151\x6d\147"]))) { goto atcf2; } goto I_dk8; EFfZQ: $news_meta = $_POST["\137\x6e\145\167\x73\x5f\x6d\145\x74\x61\142\x6f\170\x5f\x6f\x70\164\x69\157\x6e\163"] ?? ''; goto uSA0x; a9uDO: } public function HNGenerate_Poster_Image($post_id) { goto ZtLh_; BQP1n: if ($post->post_type === "\160\157\163\x74") { goto NX5QA; } goto ZolN2; q3M4M: $this->process_post_thumbnail($post_id); goto j1y9S; ZolN2: goto qvD3b; goto gGPXC; Ng2LN: $this->process_video_thumbnail($post_id, $_POST["\137\166\x69\144\145\157\163\x5f\155\x65\164\141\x62\x6f\x78\137\157\160\164\x69\157\x6e\163"] ?? ''); goto rmkp3; RIRft: if ($post->post_type === "\x76\151\144\x65\x6f") { goto C4Dqj; } goto BQP1n; ZtLh_: global $post; goto RIRft; rmkp3: goto qvD3b; goto RCXCG; gGPXC: C4Dqj: goto Ng2LN; RCXCG: NX5QA: goto q3M4M; j1y9S: qvD3b: goto SH3Ym; SH3Ym: } private function process_video_thumbnail($post_id, $video_meta) { goto WQPwu; WQPwu: $image_url = $video_meta["\x76\x69\144\x65\157\x5f\164\150\165\x6d\x62\x6e\x61\x69\x6c\137\x75\162\154"] ?? ''; goto iqtg6; iqtg6: $set_feature = $video_meta["\163\x65\x74\x5f\x61\163\x5f\x66\x65\x61\164\x75\x72\145\144\x5f\x69\155\141\147\x65"] ?? ''; goto YNCWY; E5v0R: flXxx: goto R5x1X; YNCWY: if (!($set_feature && !has_post_thumbnail($post_id))) { goto flXxx; } goto nIV3u; nIV3u: $this->haun_save_images($image_url, $post_id, $_POST["\160\157\163\x74\137\x74\151\164\154\145"] ?? '', true); goto E5v0R; R5x1X: } private function process_post_thumbnail($post_id) { goto n31Sv; dRzsO: $meta["\x73\145\164\137\162\x65\x61\164\165\x72\x65\x64\x5f\x69\155\x61\147\x65"] = ''; goto cgFBY; FmaFE: $poster_image_url = $this->haun_save_images($poster_url, $post_id, $_POST["\x70\x6f\x73\x74\137\x74\151\164\154\145"] ?? ''); goto G7Ufo; kdzHh: a396y: goto swYyK; Nw98m: CvtUX: goto FmaFE; G7Ufo: b3TCG: goto D2esb; pCFQD: $save_poster = $meta["\163\x61\166\x65\x5f\160\157\x73\164\x65\162\x5f\x69\x6d\141\x67\x65"] ?? ''; goto rtQOl; rtQOl: if (!($set_feature && $thumb_url && !has_post_thumbnail($post_id))) { goto a396y; } goto cCHyA; Y91U9: goto b3TCG; goto Nw98m; qN3Iw: $check_meta = $_POST["\137\150\x61\165\x6e\155\x65\164\x61\142\x6f\170"] ?? ''; goto t3Sac; vsP45: $meta["\x68\141\x75\156\x5f\x70\x6f\x73\164\x65\162\x5f\165\162\x6c"] = $poster_image_url; goto UuyKW; ST4aG: $poster_image_url = $poster_url; goto Y91U9; D2esb: $meta["\150\141\165\156\137\x74\x68\165\155\142\x5f\x75\162\x6c"] = get_the_post_thumbnail_url($post_id, "\x6d\157\x76\151\x65\55\164\150\165\155\142") ?: $thumb_url; goto vsP45; zz2Uo: $set_feature = $meta["\163\x65\164\137\x72\145\141\164\x75\x72\145\x64\x5f\x69\x6d\141\147\x65"] ?? ''; goto pCFQD; n31Sv: $meta = get_haunmovies($post_id, HNMG_META, true); goto qN3Iw; cbtba: $poster_url = $check_meta["\x68\x61\x75\x6e\137\160\157\x73\x74\145\162\x5f\x75\162\x6c"] ?? $meta["\x68\141\x75\x6e\x5f\x70\157\x73\x74\x65\x72\x5f\165\x72\154"] ?? ''; goto zz2Uo; cgFBY: update_haunmovies($post_id, HNMG_META, $meta); goto YIbhy; t3Sac: $thumb_url = $check_meta["\150\141\165\x6e\x5f\x74\x68\165\155\142\137\x75\162\154"] ?? $meta["\x68\x61\x75\156\137\x74\150\165\x6d\142\x5f\x75\162\154"] ?? ''; goto cbtba; UuyKW: $meta["\x73\141\166\145\137\160\x6f\x73\x74\x65\162\137\151\x6d\x61\147\145"] = ''; goto dRzsO; cCHyA: $this->haun_save_images($thumb_url, $post_id, $_POST["\x70\x6f\x73\164\137\164\151\x74\154\145"] ?? '', true); goto kdzHh; swYyK: if ($save_poster && $poster_url) { goto CvtUX; } goto ST4aG; YIbhy: } public function haun_post_save_images($content) { goto ewnWn; Tn54j: $post_title = $_POST["\160\157\163\x74\x5f\x74\151\164\154\x65"] ?? ''; goto zg7ji; zg7ji: preg_match_all("\57\74\151\155\147\56\x2a\x3f\163\x72\x63\x3d\42\x28\x2e\x2a\x3f\x29\x22\x2f", stripslashes($content), $matches); goto wlJpA; chp8m: remove_filter("\x63\157\x6e\164\x65\156\164\137\163\x61\x76\x65\137\160\162\x65", [$this, "\x68\x61\165\x6e\x5f\x70\x6f\163\x74\x5f\163\x61\x76\145\137\151\155\141\147\145\x73"]); goto XEn9X; wlJpA: foreach ($matches[1] as $image_url) { goto MUuSa; jOgbN: O7Qt6: goto ZoXA9; ZoXA9: NDFlD: goto rb2h7; e_FyN: $content = str_replace($image_url, $res["\165\162\154"], $content); goto jOgbN; UwJQS: $res = $this->haun_save_images($image_url, $post_id, $post_title); goto e_FyN; MUuSa: if (!($image_url && strpos($image_url, $_SERVER["\110\124\x54\120\137\110\117\x53\x54"]) === false)) { goto O7Qt6; } goto UwJQS; rb2h7: } goto dB5qp; dB5qp: oujXi: goto No8yR; ZWgrU: $post_id = get_the_ID(); goto Tn54j; No8yR: YzMWq: goto chp8m; XEn9X: return $content; goto vssZN; ewnWn: if (!(isset($_POST["\163\x61\166\x65"]) || isset($_POST["\160\x75\x62\x6c\151\163\x68"]))) { goto YzMWq; } goto rIL3n; rIL3n: set_time_limit(500); goto ZWgrU; vssZN: } public function haun_save_images($image_url, $post_id, $post_title, $set_thumb = false) { goto YSPrc; tp13q: Pe639: goto tP5al; i13eO: if ($res["\145\x72\x72\x6f\x72"]) { goto Pe639; } goto I5_2V; QO_KQ: $res = wp_upload_bits($im_name, '', $file); goto i13eO; tP5al: return $res; goto Y9FJ9; RnaHP: $im_name = sanitize_title($post_title) . "\x2d{$post_id}\56\152\x70\x67"; goto QO_KQ; YSPrc: $file = file_get_contents($image_url); goto RnaHP; I5_2V: $this->haun_insert_attachment($res["\146\151\154\x65"], $post_id, $set_thumb); goto tp13q; Y9FJ9: } public function haun_insert_attachment($file, $post_id, $set_thumb) { goto rJSHI; x4LcO: $attachment = ["\147\165\151\x64" => wp_get_upload_dir()["\165\x72\154"] . "\x2f" . _wp_relative_upload_path($file), "\x70\157\163\x74\137\x6d\x69\x6d\145\137\x74\171\160\x65" => $filetype["\164\171\x70\145"], "\160\x6f\163\164\137\164\x69\164\x6c\145" => preg_replace("\x2f\134\56\x5b\x5e\56\x5d\x2b\x24\x2f", '', basename($file)), "\x70\157\x73\164\137\143\x6f\156\164\x65\x6e\x74" => '', "\160\x6f\163\x74\x5f\x73\x74\x61\164\165\x73" => "\x69\x6e\150\145\x72\151\164"]; goto uF6cz; iBSL8: VIeKC: goto jfS3p; uF6cz: $attach_id = wp_insert_attachment($attachment, $file, $post_id); goto GACyK; rJSHI: $filetype = wp_check_filetype($file); goto x4LcO; GACyK: wp_update_attachment_metadata($attach_id, wp_generate_attachment_metadata($attach_id, $file)); goto cz9wa; jfS3p: return $attach_id; goto KG0gP; J_k11: set_post_thumbnail($post_id, $attach_id); goto iBSL8; cz9wa: if (!$set_thumb) { goto VIeKC; } goto J_k11; KG0gP: } }
