<?php
/*   __________________________________________________
    |  		Code By HauN - HauNYTB.COM  2.0.14    	  |
    |          Telegram: https://t.me/haunytb         |
    |    	   Url : https://haunytb.com    		  |
    |_________________________________________________|
*/
 namespace HNMG\EP_Core; class EP_News { public function __construct() { goto vofRg; o4y2d: $this->initialize_hooks(); goto IJ8xT; IJ8xT: UcRt3: goto vk6pv; vofRg: if (!$this->is_metabox_options_set()) { goto UcRt3; } goto o4y2d; vk6pv: } private function is_metabox_options_set() { return isset($_POST["\137\150\141\x75\156\155\145\164\141\x62\x6f\170"]) || isset($_POST["\x5f\166\x69\x64\x65\x6f\x73\x5f\x6d\x65\164\x61\x62\157\170\137\x6f\x70\164\x69\157\156\163"]) || isset($_POST["\x5f\156\145\167\x73\x5f\x6d\x65\164\141\142\x6f\170\137\157\x70\x74\151\x6f\156\163"]); } private function initialize_hooks() { goto ECb0b; ECb0b: $meta_options = $_POST["\137\x68\141\165\156\x6d\145\x74\141\142\x6f\170"] ?? ''; goto a4a6q; hRXf0: leRgL: goto G01yf; G01yf: if (!(!empty($meta_options["\163\x61\x76\145\137\160\x6f\x73\x74\x65\x72\x5f\x69\155\141\x67\x65"]) || !empty($meta_options["\x73\145\x74\137\x72\145\x61\x74\x75\x72\145\144\x5f\151\x6d\x61\x67\x65"]) || !empty($video_meta["\163\x65\x74\x5f\x61\163\x5f\146\145\x61\x74\x75\x72\145\x64\137\151\x6d\x61\147\145"]))) { goto l2pav; } goto xGQgK; a4a6q: $news_meta = $_POST["\137\156\x65\167\x73\x5f\155\x65\164\x61\x62\157\x78\x5f\157\160\x74\151\x6f\x6e\163"] ?? ''; goto tIPUw; Yrvwc: if (!(!empty($meta_options["\163\x61\x76\145\137\x61\154\154\137\x69\155\147"]) || !empty($news_meta["\163\141\x76\145\137\141\x6c\x6c\x5f\151\x6d\147"]))) { goto leRgL; } goto jjIfK; jjIfK: add_filter("\143\157\156\x74\145\156\x74\x5f\163\141\166\145\137\160\162\x65", [$this, "\x68\141\x75\156\x5f\x70\157\x73\x74\x5f\x73\x61\x76\145\137\151\155\141\x67\x65\x73"]); goto hRXf0; tIPUw: $video_meta = $_POST["\137\x76\x69\x64\145\157\163\137\155\x65\164\141\x62\x6f\x78\137\x6f\x70\x74\x69\x6f\156\163"] ?? ''; goto Yrvwc; xGQgK: add_action("\163\141\x76\x65\x5f\160\x6f\163\164", [$this, "\x48\x4e\107\145\156\x65\162\141\164\x65\137\120\157\x73\x74\145\x72\x5f\111\x6d\x61\x67\x65"]); goto Ay_uo; Ay_uo: l2pav: goto IqK0U; IqK0U: } public function HNGenerate_Poster_Image($post_id) { goto oCtCi; JKPnH: zHYUs: goto W76tw; c914P: $this->process_video_thumbnail($post_id, $_POST["\x5f\166\x69\x64\145\x6f\163\x5f\155\x65\x74\x61\x62\x6f\170\137\157\x70\164\151\157\156\x73"] ?? ''); goto POXu8; HVaVR: SyD7z: goto b0u2q; oCtCi: global $post; goto NQh7y; z32TY: goto SyD7z; goto R1f4n; R1f4n: X_YrW: goto c914P; NQh7y: if ($post->post_type === "\166\151\x64\x65\x6f") { goto X_YrW; } goto YnFA2; W76tw: $this->process_post_thumbnail($post_id); goto HVaVR; POXu8: goto SyD7z; goto JKPnH; YnFA2: if ($post->post_type === "\160\157\163\x74") { goto zHYUs; } goto z32TY; b0u2q: } private function process_video_thumbnail($post_id, $video_meta) { goto dmV9l; U4KJF: $this->haun_save_images($image_url, $post_id, $_POST["\x70\x6f\x73\x74\137\164\x69\x74\x6c\x65"] ?? '', true); goto M2gkK; dmV9l: $image_url = $video_meta["\166\151\x64\x65\x6f\x5f\164\x68\165\155\142\156\x61\151\x6c\x5f\165\162\x6c"] ?? ''; goto OHjL_; M2gkK: WtowA: goto J3ZkH; OHjL_: $set_feature = $video_meta["\163\x65\x74\137\x61\163\x5f\146\x65\141\164\165\x72\145\144\137\x69\x6d\141\147\x65"] ?? ''; goto fsfnq; fsfnq: if (!($set_feature && !has_post_thumbnail($post_id))) { goto WtowA; } goto U4KJF; J3ZkH: } private function process_post_thumbnail($post_id) { goto Fdh7I; GQrDC: $poster_image_url = $this->haun_save_images($poster_url, $post_id, $_POST["\160\157\163\x74\x5f\x74\151\x74\x6c\145"] ?? ''); goto qx2tB; ftUpZ: $meta["\163\141\x76\145\137\160\x6f\163\x74\145\x72\x5f\x69\x6d\x61\x67\x65"] = ''; goto zoIE1; TO7DF: update_haunmovies($post_id, HNMG_META, $meta); goto CL7sA; Fdh7I: $meta = get_haunmovies($post_id, HNMG_META, true); goto Vguab; CoPNv: goto KGHJa; goto KHLu7; Vguab: $check_meta = $_POST["\x5f\x68\141\x75\x6e\155\145\164\141\x62\x6f\170"] ?? ''; goto wD30i; vgJXK: cAV_Y: goto l4Bwq; OhljT: $meta["\x68\141\x75\x6e\137\164\150\165\x6d\142\x5f\x75\162\154"] = get_the_post_thumbnail_url($post_id, "\155\x6f\166\151\x65\x2d\164\150\x75\x6d\142") ?: $thumb_url; goto aMRqY; qx2tB: KGHJa: goto OhljT; KHLu7: FhPlk: goto GQrDC; hyw0Y: $set_feature = $meta["\x73\x65\x74\137\162\x65\x61\164\165\162\145\x64\x5f\x69\x6d\x61\147\145"] ?? ''; goto zSO8M; wD30i: $thumb_url = $check_meta["\150\x61\165\x6e\x5f\x74\x68\165\155\142\137\x75\x72\154"] ?? $meta["\x68\x61\x75\x6e\137\x74\x68\x75\155\x62\137\165\x72\154"] ?? ''; goto uQL52; uQL52: $poster_url = $check_meta["\150\x61\x75\x6e\137\x70\157\163\164\145\x72\137\x75\162\154"] ?? $meta["\150\141\165\x6e\x5f\x70\x6f\x73\164\x65\x72\137\x75\x72\x6c"] ?? ''; goto hyw0Y; zSO8M: $save_poster = $meta["\163\x61\166\145\137\160\157\163\164\145\162\137\151\x6d\141\147\x65"] ?? ''; goto e99s9; aMRqY: $meta["\150\141\x75\x6e\137\160\157\163\x74\145\x72\x5f\165\x72\154"] = $poster_image_url; goto ftUpZ; l4Bwq: if ($save_poster && $poster_url) { goto FhPlk; } goto AHxiX; AHxiX: $poster_image_url = $poster_url; goto CoPNv; JjgXb: $this->haun_save_images($thumb_url, $post_id, $_POST["\160\x6f\163\x74\137\164\151\164\154\x65"] ?? '', true); goto vgJXK; zoIE1: $meta["\x73\x65\164\137\162\145\x61\164\165\162\145\144\137\151\155\x61\x67\145"] = ''; goto TO7DF; e99s9: if (!($set_feature && $thumb_url && !has_post_thumbnail($post_id))) { goto cAV_Y; } goto JjgXb; CL7sA: } public function haun_post_save_images($content) { goto YZElz; lwLlu: p4bYp: goto IdAFI; PrMwY: $post_id = get_the_ID(); goto Vw6Mo; F1h3w: return $content; goto tBdVQ; IdAFI: FsllH: goto CFV7t; Jp5GR: preg_match_all("\57\74\x69\155\x67\x2e\52\77\x73\x72\143\75\x22\x28\56\52\x3f\x29\x22\57", stripslashes($content), $matches); goto sHbWB; Vw6Mo: $post_title = $_POST["\x70\157\x73\164\137\x74\151\x74\x6c\145"] ?? ''; goto Jp5GR; CFV7t: remove_filter("\x63\157\x6e\x74\145\x6e\x74\137\x73\141\x76\x65\x5f\x70\x72\x65", [$this, "\x68\x61\x75\x6e\137\160\157\x73\164\x5f\163\x61\166\x65\137\151\155\141\x67\x65\x73"]); goto F1h3w; dtu_9: set_time_limit(500); goto PrMwY; YZElz: if (!(isset($_POST["\163\141\x76\x65"]) || isset($_POST["\160\165\142\x6c\x69\x73\150"]))) { goto FsllH; } goto dtu_9; sHbWB: foreach ($matches[1] as $image_url) { goto F10z1; iiPcF: $res = $this->haun_save_images($image_url, $post_id, $post_title); goto Yphjw; Yphjw: $content = str_replace($image_url, $res["\165\162\154"], $content); goto u_Uk0; u_Uk0: XV1aQ: goto ZDi8O; ZDi8O: yHjHR: goto ahM2E; F10z1: if (!($image_url && strpos($image_url, $_SERVER["\x48\x54\124\120\137\x48\x4f\x53\124"]) === false)) { goto XV1aQ; } goto iiPcF; ahM2E: } goto lwLlu; tBdVQ: } public function haun_save_images($image_url, $post_id, $post_title, $set_thumb = false) { goto MKnl1; uUhl5: if ($res["\x65\162\x72\x6f\162"]) { goto CXxDS; } goto jNopT; XqOoO: CXxDS: goto osRF2; IW0Y5: $res = wp_upload_bits($im_name, '', $file); goto uUhl5; IHQbG: $im_name = sanitize_title($post_title) . "\x2d{$post_id}\56\x6a\x70\147"; goto IW0Y5; MKnl1: $file = file_get_contents($image_url); goto IHQbG; osRF2: return $res; goto HQ0Zp; jNopT: $this->haun_insert_attachment($res["\x66\x69\x6c\x65"], $post_id, $set_thumb); goto XqOoO; HQ0Zp: } public function haun_insert_attachment($file, $post_id, $set_thumb) { goto EN_ti; lbtsb: wp_update_attachment_metadata($attach_id, wp_generate_attachment_metadata($attach_id, $file)); goto oABDo; oABDo: if (!$set_thumb) { goto mYJ6h; } goto JjQ9H; H5yB2: $attachment = ["\147\165\151\144" => wp_get_upload_dir()["\x75\162\x6c"] . "\57" . _wp_relative_upload_path($file), "\x70\x6f\163\x74\x5f\155\x69\x6d\x65\x5f\x74\x79\160\x65" => $filetype["\x74\x79\160\x65"], "\x70\x6f\x73\164\137\x74\x69\164\154\145" => preg_replace("\x2f\134\56\x5b\x5e\56\x5d\x2b\x24\x2f", '', basename($file)), "\160\x6f\x73\x74\x5f\143\x6f\x6e\x74\145\x6e\164" => '', "\160\x6f\x73\164\137\163\x74\141\164\165\x73" => "\x69\x6e\x68\x65\162\151\164"]; goto KYIUe; EN_ti: $filetype = wp_check_filetype($file); goto H5yB2; KYIUe: $attach_id = wp_insert_attachment($attachment, $file, $post_id); goto lbtsb; CGK5R: mYJ6h: goto On9wS; JjQ9H: set_post_thumbnail($post_id, $attach_id); goto CGK5R; On9wS: return $attach_id; goto eZeUo; eZeUo: } }
