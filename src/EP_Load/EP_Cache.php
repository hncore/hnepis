<?php
/*   __________________________________________________
    |  		Code By HauN - HauNYTB.COM  2.0.14    	  |
    |          Telegram: https://t.me/haunytb         |
    |    	   Url : https://haunytb.com    		  |
    |_________________________________________________|
*/
 namespace HNMG\EP_Load; class EP_Cache { public $timeCache; public $folderCache; public function __construct() { goto vObFc; ZP76n: WP_Filesystem(); goto T6tJC; rZ_v_: if (is_dir($this->folderCache)) { goto c66_4; } goto KGnSm; vObFc: $this->folderCache = HNMG_CACHE; goto rZ_v_; iKCcF: $this->timeCache = 3600; goto gFemn; gFemn: if (!function_exists("\127\120\137\x46\151\x6c\x65\163\171\163\164\145\x6d")) { require_once ABSPATH . "\x77\x70\x2d\141\x64\155\151\156\57\x69\156\143\x6c\165\x64\x65\x73\x2f\146\x69\154\x65\56\x70\x68\x70"; } goto x9M77; P_5vc: c66_4: goto iKCcF; T6tJC: $this->wp_filesystem = $wp_filesystem; goto uaRsz; x9M77: global $wp_filesystem; goto ZP76n; KGnSm: wp_mkdir_p($this->folderCache); goto P_5vc; uaRsz: } public function register() { goto qSkRP; s2gYr: add_action("\x77\x70\137\x61\152\141\170\x5f\x6e\157\160\x72\x69\166\137\144\145\x6c\145\x74\x65\x5f\x61\154\x6c\x5f\x63\x61\x63\150\x65", [$this, "\x64\145\154\x65\x74\145\137\141\x6c\154\137\143\141\x63\x68\x65"]); goto LO9YX; Z6beD: add_filter("\110\x4e\115\107\x2d\160\141\x67\145\163", [$this, "\x68\156\141\160\x69\x73\157\144\145\x5f\143\x61\143\x68\x65\137\x6d\x65\156\x75"]); goto YiwOT; YiwOT: add_action("\x77\160\x5f\141\x6a\141\x78\x5f\144\x65\154\x65\x74\145\137\x61\x6c\154\x5f\x63\141\x63\x68\x65", [$this, "\144\145\154\145\164\145\x5f\x61\x6c\x6c\137\143\141\x63\150\x65"]); goto s2gYr; JRCpt: add_action("\x77\160\x5f\141\x6a\141\170\x5f\162\x65\163\x65\x74\x5f\160\154\x61\171\x65\162\x5f\143\x61\x63\x68\x65", [$this, "\162\145\x73\145\x74\x5f\160\x6c\141\171\145\x72\x5f\143\x61\143\150\145"]); goto Fkhk6; e20x2: add_filter("\x48\116\115\x47\55\x74\x61\x62\163", [$this, "\150\156\141\x70\151\163\x6f\144\x65\x5f\143\x61\143\150\145\137\x6d\x65\156\x75"]); goto Z6beD; Fkhk6: add_action("\x77\x70\137\x61\x6a\x61\x78\x5f\x6e\x6f\x70\x72\x69\x76\137\162\x65\x73\145\164\137\x70\154\x61\171\145\162\x5f\x63\x61\x63\x68\145", [$this, "\x72\145\163\145\x74\137\160\154\141\171\x65\162\x5f\x63\141\x63\150\x65"]); goto e20x2; LO9YX: PeTWx: goto rXwg7; qSkRP: if (!(HNCORE()->get_product_status() == "\x63\x6f\x6e\156\x65\x63\x74\145\144")) { goto PeTWx; } goto JRCpt; rXwg7: } public function hnapisode_cache_menu($nav) { $nav["\61\62\x30"] = array("\x73\x6c\x75\x67" => "\150\x6e\x6d\147\55\143\x61\x63\150\x65\x2d\155\x61\156\x61\x67\x65\162", "\x63\141\x6c\x6c\142\x61\143\x6b" => array($this, "\150\156\x6d\147\137\x63\x61\143\150\145\137\155\x61\x6e\141\x67\145\x5f\x70\141\x67\x65"), "\164\x69\x74\x6c\x65" => __("\x48\116\x4d\x47\40\x43\141\143\150\145", "\x68\156\x6d\x67\x65\160\151\163"), "\151\x63\157\156" => "\x66\141\x2d\160\x6c\141\x79\55\x63\x69\x72\143\x6c\x65"); return $nav; } public function hnmg_cache_manage_page() { goto QJkxp; QJkxp: $cache_count = json_decode($this->cacheCount()); goto bSM2E; bSM2E: $get_cache = json_decode($this->getCache()); goto w8p1X; w8p1X: echo view("\x48\x4e\x4d\107\x3a\72\154\141\x79\x6f\x75\164\x73\x2e\x63\x61\x63\x68\145", compact("\143\141\x63\150\145\x5f\143\157\165\156\164", "\x67\145\x74\137\x63\x61\x63\x68\145")); goto WusgJ; WusgJ: } public function delete_all_cache() { goto Nz4VR; Q34qb: $cache_deleted = $result["\x63\x61\143\x68\x65\x5f\144\145\154\145\x74\145\144"] ?? 0; goto pY8Pw; wJRU_: wp_die(); goto IZeaM; i2Dfo: $total_cache = $result["\x74\x6f\164\x61\154\x5f\x63\141\143\x68\x65"] ?? 0; goto EmMfD; pY8Pw: wp_send_json_success(["\x73\x74\x61\164\x75\163" => $status, "\x74\x6f\x74\141\154\137\x63\x61\143\x68\145" => $total_cache, "\x74\151\155\145\137\154\x69\155\151\x74" => $time_limit, "\x63\x61\143\x68\145\x5f\x64\x65\x6c\145\x74\x65\144" => $cache_deleted]); goto wJRU_; DnvGp: $status = "\123\165\143\x63\x65\163\163\x66\x75\154\x6c\171"; goto i2Dfo; Nz4VR: $result = json_decode($this->delAllCache(0), true); goto DnvGp; EmMfD: $time_limit = $result["\164\151\155\145\x5f\154\x69\155\151\x74"] ?? 0; goto Q34qb; IZeaM: } public function delAllCache($timeCache) { goto S24N0; S24N0: $result = array("\x73\x74\141\164\x75\x73" => 0, "\x74\157\164\x61\154\137\143\x61\143\150\x65" => 0, "\x74\151\x6d\145\x5f\154\x69\155\x69\164" => $timeCache, "\x63\141\x63\150\x65\x5f\144\x65\154\x65\x74\x65\x64" => 0, "\143\x61\x63\x68\145\x5f\143\x6f\x75\156\164" => 0); goto evj6w; dNylz: return json_encode($result); goto r5tO7; xluIf: $result["\x74\x6f\x74\x61\x6c\137\x63\141\x63\150\145"] = $i; goto Txn1q; Txn1q: $result["\143\141\143\150\145\137\144\x65\154\145\164\145\144"] = $j; goto H_vVl; rrgrV: $i = $j = 0; goto matBV; H_vVl: $result["\143\141\143\150\145\x5f\x63\157\165\156\164"] = $i - $j; goto qSQBL; evj6w: $getDirContents = $this->getDirContents($this->folderCache); goto KFr3b; SHOKg: $this->removeEmptySubFolders($this->folderCache); goto dNylz; qSQBL: Vpt9m: goto SHOKg; V8kT0: A4EQ2: goto xluIf; matBV: foreach ($getDirContents as $key => $value) { goto a9saA; jr5O8: V_DyS: goto sxUGC; agzw9: fqM5R: goto yuAx2; Dy5cR: if (!($timeCache <= time() - filemtime($value))) { goto Pamd4; } goto uQKWF; RA5Ql: $result["\x73\164\x61\x74\x75\x73"] = 1; goto agzw9; uQKWF: $j++; goto HvKaP; yuAx2: Pamd4: goto Arr8p; J3IU7: $i++; goto Dy5cR; a9saA: if (!(strpos($value, "\x2e\x74\170\x74") !== false)) { goto fhQou; } goto J3IU7; HvKaP: if (!unlink($value)) { goto fqM5R; } goto RA5Ql; Arr8p: fhQou: goto jr5O8; sxUGC: } goto V8kT0; KFr3b: if (!$getDirContents) { goto Vpt9m; } goto rrgrV; r5tO7: } public function reset_player_cache() { goto lCgzj; UM0fd: $episode_slug = isset($_POST["\x65\160\151\163\157\x64\x65\137\163\x6c\165\x67"]) ? str_replace("\55", "\x5f", wp_strip_all_tags($_POST["\x65\x70\151\x73\x6f\144\145\137\163\154\165\x67"])) : ''; goto nHn54; IQCvk: wp_send_json($cacheData); goto Eg8sy; nHn54: $film_meta = get_haunmovies($post_id, HNMG_EPS, true); goto VLvC5; FhpyB: $link = $data[$server - 1]["\150\141\x75\x6e\155\157\x76\x69\145\x73\x5f\163\x65\162\166\145\162\137\x64\141\164\141"][$episode_slug]["\150\x61\x75\x6e\155\x6f\166\x69\145\x73\x5f\x65\x70\137\154\151\156\153"]; goto AE9Bm; lCgzj: $server = isset($_POST["\163\x65\162\x76\145\162\137\151\144"]) ? (int) $_POST["\163\145\x72\x76\x65\x72\x5f\151\144"] : ''; goto DuQ5P; VLvC5: $data = json_decode($film_meta, true); goto FhpyB; AE9Bm: $cacheData = $this->delCache($link); goto IQCvk; DuQ5P: $post_id = isset($_POST["\160\x6f\x73\x74\137\151\144"]) ? (int) $_POST["\160\x6f\x73\164\x5f\x69\144"] : ''; goto UM0fd; Eg8sy: } public function readCache($name) { goto lJy9r; lJy9r: $name = md5(md5($name)); goto uc8ua; eqMR7: YfZMM: goto QfYEC; uc8ua: $result = ''; goto Y9dbo; kB_R6: if (!file_exists($file)) { goto ij2KP; } goto Q9Op1; WcGHG: $file = $this->folderCache . "\57" . $createFolderCache . "\57" . $name . "\56\164\x78\x74"; goto kB_R6; UlAqa: return $result; goto YmxR8; QfYEC: WArKc: goto Gj46L; Y9dbo: $createFolderCache = $this->createFolderCache($name); goto WcGHG; Gj46L: ij2KP: goto UlAqa; Q9Op1: if ($this->timeCache != '') { goto QatDH; } goto Pl4en; ki8Ej: $result = file_get_contents($file); goto eqMR7; RjoE3: if (!($this->timeCache > time() - filemtime($file))) { goto YfZMM; } goto ki8Ej; jfyT3: QatDH: goto RjoE3; Pl4en: $result = file_get_contents($file); goto dvKiH; dvKiH: goto WArKc; goto jfyT3; YmxR8: } public function getCache() { goto FmtJn; vYfp9: $i = 0; goto svaO9; L9RCN: return json_encode($result); goto tojrh; SkP1N: $getDirContents = $this->getDirContents($this->folderCache); goto vYfp9; tojrh: PVKKz: goto ZVjT1; oCUGM: foreach ($getDirContents as $key => $value) { goto DVizj; W_ZUY: yA6gd: goto TWDJe; DVizj: if (!strpos($value, "\56\164\170\x74")) { goto N_yWp; } goto HGTPt; e5Ftf: N_yWp: goto W_ZUY; HGTPt: $result[] = array("\x66\x69\154\145" => $value); goto e5Ftf; TWDJe: } goto Pl9r4; svaO9: if (!$getDirContents) { goto PVKKz; } goto oCUGM; FmtJn: $result = array(); goto SkP1N; Pl9r4: EZATa: goto L9RCN; ZVjT1: } public function saveCache($name, $data) { goto Y3TM8; Oln0X: if (is_dir($this->folderCache)) { goto upuHz; } goto teLnp; yFDMr: $this->wp_filesystem->put_contents($file, $data, FS_CHMOD_FILE); goto PjO73; PjO73: $index_file = WP_CONTENT_DIR . "\57\151\156\x64\145\170\x2e\160\x68\x70"; goto a6t1D; yFy90: mkdir($dir, 0777, true); goto PDv8b; PDv8b: HO7hR: goto yFDMr; mLAr9: if (chmod($this->folderCache, 0777)) { goto SpVRh; } goto VfhyD; hHhVJ: upuHz: goto mLAr9; Y3TM8: $name = md5(md5($name)); goto O4iQ_; teLnp: mkdir($this->folderCache, 0777, true); goto hHhVJ; a6t1D: $this->wp_filesystem->put_contents($index_file, "\74\77\x70\150\x70\x20\x2f\57\40\x53\x69\x6c\145\x6e\143\x65\x20\x69\163\x20\x67\157\154\144\x65\156\x2e", FS_CHMOD_FILE); goto LVg2I; z3rSI: $file = $dir . "\x2f" . $name . "\x2e\x74\x78\x74"; goto F7j0H; YONYd: SpVRh: goto pZgir; F7j0H: if (is_dir($dir)) { goto HO7hR; } goto yFy90; O4iQ_: $createFolderCache = $this->createFolderCache($name); goto Oln0X; VfhyD: chmod($this->folderCache, 0777); goto YONYd; pZgir: $dir = $this->folderCache . "\x2f" . $createFolderCache; goto z3rSI; LVg2I: } public function delCache($name) { goto xGGkv; JdFcA: goto KP0v5; goto IfYLV; c70jk: $name = md5(md5($name)); goto kcXsk; dmPUv: Iu1q0: goto RTgNk; oMjgF: C01wz: goto jY4dM; gI3RS: $result = array("\x73\164\x61\164\x75\x73" => 1, "\x72\145\163\x75\154\164" => "\104\145\x6c\145\x74\x65\144"); goto oJm6F; xGGkv: $result = ''; goto c70jk; kcXsk: $createFolderCache = $this->createFolderCache($name); goto ET3kd; RTgNk: return $result; goto Z6cGk; h6Yjc: $result = array("\x73\x74\141\x74\x75\x73" => 0, "\162\145\163\165\x6c\164" => "\114\x69\x6e\153\x20\x6e\157\164\x20\145\170\x69\x73\164\163"); goto ZyBd5; IfD7_: if (file_exists($file)) { goto C01wz; } goto h6Yjc; ZyBd5: goto Iu1q0; goto oMjgF; IfYLV: Hm1Lw: goto gI3RS; jY4dM: if (unlink($file)) { goto Hm1Lw; } goto iucHy; oJm6F: KP0v5: goto dmPUv; ET3kd: $file = $this->folderCache . "\57" . $createFolderCache . "\x2f" . $name . "\56\x74\x78\164"; goto IfD7_; iucHy: $result = array("\x73\164\x61\164\x75\163" => 0, "\x72\x65\x73\x75\154\x74" => "\x44\x65\154\145\x74\145\x20\x65\162\162\x6f\162"); goto JdFcA; Z6cGk: } public function cacheCount() { goto P_jpY; IZ2Ta: $i = 1; goto S7ayJ; jvdas: foreach ($getDirContents as $key => $value) { goto dL08f; sWVo4: h6yRf: goto ln3z2; PQmXD: $result["\x72\145\x73\165\154\164"] = 1; goto P6hk0; P6hk0: $result["\x74\157\x74\141\154\x5f\143\141\143\x68\145"] = $i; goto yE1iR; yE1iR: $i++; goto kDwWO; dL08f: if (!strpos($value, "\56\x74\x78\164")) { goto bqinr; } goto PQmXD; kDwWO: bqinr: goto sWVo4; ln3z2: } goto ObPnU; FkzaV: return json_encode($result); goto uSbRY; D2lLo: $getDirContents = $this->getDirContents($this->folderCache); goto IZ2Ta; iefbq: hL5VZ: goto FkzaV; P_jpY: $result = array(); goto D2lLo; ObPnU: oE2_w: goto iefbq; S7ayJ: if (!$getDirContents) { goto hL5VZ; } goto jvdas; uSbRY: } private function createFolderCache($name) { goto qGiRw; qGiRw: $folder1 = substr($name, 0, 2); goto ymeh9; sscBB: return $folder1 . "\57" . $folder2; goto XTa7R; ymeh9: $folder2 = substr($name, 2, 2); goto sscBB; XTa7R: } private function getDirContents($dir, &$results = array()) { goto n4HzA; n4HzA: $files = scandir($dir); goto iIhV4; iIhV4: foreach ($files as $key => $value) { goto Wg5GN; foA48: goto Mnxgl; goto rXpjS; d9AGF: LYkxC: goto TL16A; LteBG: Mnxgl: goto d9AGF; LCeE2: $this->getDirContents($path, $results); goto WPVx5; rXpjS: taCjo: goto pyrnq; m0vaK: if (!($value != "\56" && $value != "\56\56")) { goto T5Nkl; } goto LCeE2; WPVx5: $results[] = $path; goto GxlOf; GxlOf: T5Nkl: goto foA48; Wg5GN: $path = realpath($dir . DIRECTORY_SEPARATOR . $value); goto W7SaA; W7SaA: if (!is_dir($path)) { goto taCjo; } goto m0vaK; pyrnq: $results[] = $path; goto LteBG; TL16A: } goto ZZjpi; ZZjpi: hqeOV: goto wMfrQ; wMfrQ: return $results; goto TpKr9; TpKr9: } private function removeEmptySubFolders($path) { goto HO_2q; HO_2q: $empty = true; goto p_1hO; OSMUc: MrUU2: goto LmHO9; LmHO9: return $empty && @rmdir($path); goto ZW1uH; p_1hO: foreach (glob($path . DIRECTORY_SEPARATOR . "\52") as $file) { $empty &= is_dir($file) && $this->removeEmptySubFolders($file); opQI_: } goto OSMUc; ZW1uH: } }
