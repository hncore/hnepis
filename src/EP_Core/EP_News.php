<?php
/*   __________________________________________________
    |  		Code By HauN - HauNYTB.COM  2.0.14    	  |
    |          Telegram: https://t.me/haunytb         |
    |    	   Url : https://haunytb.com    		  |
    |_________________________________________________|
*/
 namespace HNMG\EP_Core; class EP_News { public function __construct() { goto EKlc8; xswTZ: Qp25f: goto qEeby; EKlc8: if (!$this->is_metabox_options_set()) { goto Qp25f; } goto ExE6p; ExE6p: $this->initialize_hooks(); goto xswTZ; qEeby: } private function is_metabox_options_set() { return isset($_POST["\x5f\150\x61\165\156\155\145\x74\141\x62\x6f\x78"]) || isset($_POST["\137\x76\x69\144\145\157\163\x5f\155\x65\164\141\x62\157\170\x5f\x6f\160\x74\151\157\156\163"]) || isset($_POST["\137\156\145\167\163\x5f\155\x65\x74\141\x62\x6f\170\x5f\157\x70\x74\151\x6f\x6e\163"]); } private function initialize_hooks() { goto t1J80; ddzZT: C0qhT: goto AGe1o; xlXmr: $video_meta = $_POST["\x5f\x76\x69\x64\x65\157\163\x5f\x6d\145\164\141\142\x6f\170\x5f\x6f\x70\x74\151\157\156\163"] ?? ''; goto ndPZp; sYlbW: $news_meta = $_POST["\x5f\156\145\167\163\137\155\x65\x74\x61\x62\157\170\137\157\x70\x74\x69\157\156\163"] ?? ''; goto xlXmr; t1J80: $meta_options = $_POST["\x5f\150\x61\x75\x6e\x6d\145\x74\x61\142\x6f\x78"] ?? ''; goto sYlbW; qRgb5: add_action("\163\x61\166\x65\137\160\x6f\163\164", [$this, "\x48\x4e\107\x65\x6e\x65\162\x61\x74\145\137\120\x6f\x73\164\145\x72\x5f\111\x6d\141\147\145"]); goto ddzZT; S_tU0: WnW6Y: goto nwmlb; ndPZp: if (!(!empty($meta_options["\163\x61\166\x65\x5f\x61\154\154\137\151\x6d\x67"]) || !empty($news_meta["\163\x61\166\x65\x5f\x61\x6c\x6c\x5f\x69\x6d\147"]))) { goto WnW6Y; } goto J4Ywe; J4Ywe: add_filter("\x63\157\x6e\164\145\156\x74\x5f\163\x61\x76\x65\x5f\160\x72\x65", [$this, "\150\141\165\156\137\160\157\x73\x74\137\163\141\166\145\x5f\151\x6d\x61\x67\x65\163"]); goto S_tU0; nwmlb: if (!(!empty($meta_options["\163\x61\x76\x65\137\160\x6f\x73\x74\x65\162\x5f\x69\x6d\141\147\x65"]) || !empty($meta_options["\x73\x65\164\137\162\x65\141\x74\165\x72\145\144\x5f\x69\x6d\x61\147\145"]) || !empty($video_meta["\x73\x65\164\137\x61\x73\x5f\x66\145\141\164\x75\x72\x65\x64\x5f\151\155\141\147\x65"]))) { goto C0qhT; } goto qRgb5; AGe1o: } public function HNGenerate_Poster_Image($post_id) { goto HlWau; RrE9x: zx41C: goto qy9At; GIYWZ: Ur0XZ: goto jAKVG; jpzPc: goto Ur0XZ; goto RrE9x; os8k1: if ($post->post_type === "\160\157\163\x74") { goto nqpBR; } goto jpzPc; qy9At: $this->process_video_thumbnail($post_id, $_POST["\x5f\166\151\x64\x65\x6f\163\137\x6d\x65\164\x61\142\x6f\170\x5f\x6f\160\x74\x69\157\156\163"] ?? ''); goto TEHRO; h2m8d: $this->process_post_thumbnail($post_id); goto GIYWZ; y2kJf: nqpBR: goto h2m8d; TEHRO: goto Ur0XZ; goto y2kJf; gw6oP: if ($post->post_type === "\x76\x69\144\145\157") { goto zx41C; } goto os8k1; HlWau: global $post; goto gw6oP; jAKVG: } private function process_video_thumbnail($post_id, $video_meta) { goto Cdrvi; Cdrvi: $image_url = $video_meta["\166\151\144\145\x6f\x5f\164\x68\165\x6d\x62\x6e\141\x69\154\x5f\165\162\x6c"] ?? ''; goto k8VeU; k8VeU: $set_feature = $video_meta["\163\145\x74\x5f\x61\x73\x5f\146\145\141\x74\x75\x72\x65\x64\137\151\155\141\147\x65"] ?? ''; goto CBuFa; CBuFa: if (!($set_feature && !has_post_thumbnail($post_id))) { goto vdpB6; } goto HipmI; p27wi: vdpB6: goto EYAY8; HipmI: $this->haun_save_images($image_url, $post_id, $_POST["\x70\x6f\163\164\137\164\151\x74\x6c\145"] ?? '', true); goto p27wi; EYAY8: } private function process_post_thumbnail($post_id) { goto mMaFE; s5Jqg: $meta["\150\141\x75\x6e\137\x74\150\x75\x6d\142\x5f\x75\x72\154"] = get_the_post_thumbnail_url($post_id, "\155\157\x76\151\x65\x2d\164\x68\165\x6d\142") ?: $thumb_url; goto zjlOe; k46AH: $this->haun_save_images($thumb_url, $post_id, $_POST["\x70\x6f\163\x74\x5f\x74\x69\164\x6c\145"] ?? '', true); goto g08YK; i95iO: $poster_image_url = $poster_url; goto Hn6ZI; TQW_H: d4Fp8: goto mLjqB; g08YK: jyGb8: goto WV0HS; W_9rI: SWUxg: goto s5Jqg; wDvlQ: $meta["\163\141\166\x65\x5f\160\x6f\163\164\145\162\x5f\151\x6d\141\147\145"] = ''; goto p_XWe; p_XWe: $meta["\x73\x65\164\137\162\x65\141\x74\165\162\x65\x64\137\x69\x6d\141\147\x65"] = ''; goto BWyB0; BA_Ym: $save_poster = $meta["\163\x61\x76\x65\x5f\160\157\x73\164\145\x72\x5f\151\155\x61\x67\x65"] ?? ''; goto QrX_R; mLjqB: $poster_image_url = $this->haun_save_images($poster_url, $post_id, $_POST["\x70\x6f\163\x74\137\x74\x69\x74\x6c\x65"] ?? ''); goto W_9rI; c4GTH: $set_feature = $meta["\163\x65\164\137\x72\x65\x61\x74\x75\x72\145\144\x5f\x69\155\141\147\145"] ?? ''; goto BA_Ym; WV0HS: if ($save_poster && $poster_url) { goto d4Fp8; } goto i95iO; BWyB0: update_haunmovies($post_id, HNMG_META, $meta); goto DBZ6b; rIaS6: $check_meta = $_POST["\137\x68\x61\165\156\x6d\x65\164\x61\142\x6f\170"] ?? ''; goto rvc3Q; zjlOe: $meta["\x68\141\165\156\137\160\157\x73\x74\145\x72\x5f\x75\x72\x6c"] = $poster_image_url; goto wDvlQ; QrX_R: if (!($set_feature && $thumb_url && !has_post_thumbnail($post_id))) { goto jyGb8; } goto k46AH; rvc3Q: $thumb_url = $check_meta["\150\x61\165\156\x5f\164\x68\x75\155\x62\137\x75\x72\154"] ?? $meta["\150\x61\x75\x6e\137\164\x68\x75\155\x62\137\165\162\154"] ?? ''; goto agNaf; agNaf: $poster_url = $check_meta["\150\x61\165\156\137\x70\157\163\x74\x65\162\x5f\x75\x72\154"] ?? $meta["\x68\141\x75\x6e\x5f\160\157\163\x74\145\x72\137\x75\162\x6c"] ?? ''; goto c4GTH; Hn6ZI: goto SWUxg; goto TQW_H; mMaFE: $meta = get_haunmovies($post_id, HNMG_META, true); goto rIaS6; DBZ6b: } public function haun_post_save_images($content) { goto oJe3G; DcJya: $post_id = get_the_ID(); goto ubah3; HioYF: set_time_limit(500); goto DcJya; sT80A: foreach ($matches[1] as $image_url) { goto t34Xn; Azm_1: $res = $this->haun_save_images($image_url, $post_id, $post_title); goto Gyj6A; Gyj6A: $content = str_replace($image_url, $res["\165\x72\x6c"], $content); goto HtXr2; t34Xn: if (!($image_url && strpos($image_url, $_SERVER["\110\x54\x54\x50\x5f\110\117\x53\124"]) === false)) { goto U3ZPJ; } goto Azm_1; HtXr2: U3ZPJ: goto iKsDP; iKsDP: ujVVP: goto gHFGI; gHFGI: } goto jcHpN; oJe3G: if (!(isset($_POST["\163\141\x76\x65"]) || isset($_POST["\x70\x75\x62\x6c\151\x73\x68"]))) { goto zobFH; } goto HioYF; WZb0i: preg_match_all("\x2f\74\x69\155\147\56\x2a\x3f\163\x72\x63\x3d\x22\x28\x2e\x2a\x3f\x29\x22\x2f", stripslashes($content), $matches); goto sT80A; tBFJU: remove_filter("\x63\157\156\164\x65\156\x74\137\163\141\x76\x65\137\160\x72\x65", [$this, "\x68\141\x75\156\x5f\160\x6f\163\x74\x5f\163\x61\166\x65\137\151\155\141\x67\145\x73"]); goto nSq3O; F2Fed: zobFH: goto tBFJU; jcHpN: RI9eb: goto F2Fed; nSq3O: return $content; goto sTTzs; ubah3: $post_title = $_POST["\160\x6f\x73\x74\x5f\x74\x69\x74\154\x65"] ?? ''; goto WZb0i; sTTzs: } public function haun_save_images($image_url, $post_id, $post_title, $set_thumb = false) { goto LjxdJ; LjxdJ: $file = file_get_contents($image_url); goto s9Kcv; s9Kcv: $im_name = sanitize_title($post_title) . "\55{$post_id}\56\152\160\x67"; goto ec7kU; C9CT2: if ($res["\145\x72\162\x6f\x72"]) { goto jedng; } goto AdHsx; AdHsx: $this->haun_insert_attachment($res["\146\151\x6c\145"], $post_id, $set_thumb); goto dQP5M; ec7kU: $res = wp_upload_bits($im_name, '', $file); goto C9CT2; dQP5M: jedng: goto iTNGW; iTNGW: return $res; goto kaagT; kaagT: } public function haun_insert_attachment($file, $post_id, $set_thumb) { goto LhaWA; q99yL: wp_update_attachment_metadata($attach_id, wp_generate_attachment_metadata($attach_id, $file)); goto wuQXm; hxGGI: set_post_thumbnail($post_id, $attach_id); goto cuMwd; gSlsH: $attachment = ["\x67\x75\x69\144" => wp_get_upload_dir()["\165\162\x6c"] . "\x2f" . _wp_relative_upload_path($file), "\x70\x6f\x73\x74\137\x6d\x69\155\145\137\x74\x79\160\x65" => $filetype["\x74\x79\x70\x65"], "\x70\157\163\164\137\x74\151\x74\154\145" => preg_replace("\x2f\x5c\x2e\133\136\x2e\x5d\x2b\44\x2f", '', basename($file)), "\160\157\x73\x74\137\143\x6f\156\x74\145\x6e\164" => '', "\160\x6f\x73\164\x5f\163\x74\141\x74\165\163" => "\151\x6e\150\145\162\151\164"]; goto Td_xh; LhaWA: $filetype = wp_check_filetype($file); goto gSlsH; QCwd3: return $attach_id; goto hZYHA; Td_xh: $attach_id = wp_insert_attachment($attachment, $file, $post_id); goto q99yL; wuQXm: if (!$set_thumb) { goto ownHW; } goto hxGGI; cuMwd: ownHW: goto QCwd3; hZYHA: } }
