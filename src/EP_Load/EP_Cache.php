<?php
/*   __________________________________________________
    |  		Code By HauN - HauNYTB.COM  2.0.14    	  |
    |          Telegram: https://t.me/haunytb         |
    |    	   Url : https://haunytb.com    		  |
    |_________________________________________________|
*/
 namespace HNMG\EP_Load; class EP_Cache { public $timeCache; public $folderCache; public function __construct() { goto Dwm0C; FQNrQ: $this->timeCache = 3600; goto E8rhp; CMyFe: $this->wp_filesystem = $wp_filesystem; goto tW1bF; ZGeLI: dERpF: goto FQNrQ; lAueB: if (is_dir($this->folderCache)) { goto dERpF; } goto m_uEw; m_uEw: wp_mkdir_p($this->folderCache); goto ZGeLI; f9mQo: WP_Filesystem(); goto CMyFe; Dwm0C: $this->folderCache = HNMG_CACHE; goto lAueB; CZGIs: global $wp_filesystem; goto f9mQo; E8rhp: if (!function_exists("\127\120\x5f\x46\x69\x6c\145\163\x79\163\x74\145\155")) { require_once ABSPATH . "\167\160\x2d\x61\x64\x6d\x69\x6e\x2f\x69\156\x63\154\165\144\145\163\x2f\146\x69\x6c\145\x2e\160\x68\x70"; } goto CZGIs; tW1bF: } public function register() { goto Zugbu; mbMZi: add_action("\x77\160\137\141\152\141\170\137\x64\145\x6c\145\164\145\137\x61\154\x6c\x5f\143\141\x63\150\x65", [$this, "\x64\x65\x6c\145\x74\145\x5f\141\x6c\x6c\x5f\x63\x61\x63\150\145"]); goto xlWMu; EIfjE: add_filter("\x48\116\x4d\107\x2d\160\141\147\x65\163", [$this, "\150\x6e\141\160\x69\x73\x6f\144\x65\137\x63\141\143\150\145\137\155\x65\x6e\165"]); goto mbMZi; brbjV: add_action("\x77\160\x5f\141\152\141\x78\x5f\x6e\x6f\160\x72\151\x76\x5f\x72\x65\x73\x65\164\137\x70\x6c\x61\171\x65\x72\137\143\141\143\x68\x65", [$this, "\162\145\163\145\x74\x5f\160\x6c\x61\x79\x65\162\x5f\x63\x61\143\x68\x65"]); goto eT_Z8; c4Okr: add_action("\x77\160\137\x61\152\141\170\x5f\x72\x65\x73\x65\164\x5f\x70\x6c\141\x79\x65\x72\x5f\x63\x61\143\150\145", [$this, "\x72\145\x73\145\x74\137\160\x6c\141\171\145\x72\137\143\141\x63\x68\145"]); goto brbjV; Zugbu: if (!(HNCORE()->get_product_status() == "\143\157\x6e\156\145\143\x74\145\144")) { goto GE4ld; } goto c4Okr; eT_Z8: add_filter("\x48\116\x4d\x47\x2d\164\141\x62\x73", [$this, "\150\x6e\141\160\x69\x73\157\144\x65\137\x63\x61\143\150\145\137\x6d\x65\x6e\x75"]); goto EIfjE; JumYL: GE4ld: goto UWbSf; xlWMu: add_action("\167\x70\137\x61\152\141\170\x5f\x6e\x6f\160\x72\x69\x76\137\144\145\154\x65\x74\x65\137\x61\x6c\x6c\x5f\143\141\143\150\x65", [$this, "\x64\145\x6c\145\164\x65\137\141\x6c\x6c\137\x63\141\x63\150\145"]); goto JumYL; UWbSf: } public function hnapisode_cache_menu($nav) { $nav["\x31\x32\60"] = array("\x73\x6c\x75\x67" => "\x68\x6e\x6d\x67\x2d\x63\x61\x63\x68\145\x2d\155\141\x6e\x61\x67\145\x72", "\143\141\x6c\154\142\141\143\153" => array($this, "\150\156\155\x67\137\143\141\x63\150\x65\137\x6d\141\x6e\141\147\145\137\160\141\147\x65"), "\x74\151\164\154\x65" => __("\x48\x4e\x4d\107\x20\103\x61\x63\150\145", "\150\x6e\x6d\147\145\x70\x69\163"), "\x69\x63\x6f\x6e" => "\146\141\x2d\160\154\141\171\x2d\x63\x69\162\x63\154\145"); return $nav; } public function hnmg_cache_manage_page() { goto mQlCD; mQlCD: $cache_count = json_decode($this->cacheCount()); goto dr0ME; tOJMO: echo view("\110\116\115\107\x3a\x3a\154\x61\171\x6f\x75\x74\x73\56\x63\x61\x63\x68\145", compact("\x63\141\x63\150\x65\x5f\143\157\x75\x6e\164", "\x67\145\164\x5f\143\x61\x63\x68\145")); goto H3mcx; dr0ME: $get_cache = json_decode($this->getCache()); goto tOJMO; H3mcx: } public function delete_all_cache() { goto EEhZd; G2c4I: $time_limit = $result["\164\x69\x6d\145\137\154\x69\155\151\x74"] ?? 0; goto g8jOq; g8jOq: $cache_deleted = $result["\x63\x61\143\x68\x65\x5f\x64\145\154\145\164\145\144"] ?? 0; goto GzNZe; FisCr: wp_die(); goto ikxzK; GzNZe: wp_send_json_success(["\163\164\141\164\x75\x73" => $status, "\x74\x6f\x74\141\154\x5f\143\141\143\150\x65" => $total_cache, "\164\x69\155\x65\x5f\x6c\151\155\x69\x74" => $time_limit, "\143\141\143\150\145\137\x64\145\154\x65\x74\145\x64" => $cache_deleted]); goto FisCr; EEhZd: $result = json_decode($this->delAllCache(0), true); goto WGtK2; B4E_s: $total_cache = $result["\164\x6f\164\x61\x6c\x5f\x63\x61\143\x68\145"] ?? 0; goto G2c4I; WGtK2: $status = "\x53\x75\143\x63\145\x73\x73\146\x75\154\x6c\x79"; goto B4E_s; ikxzK: } public function delAllCache($timeCache) { goto d_RtF; jXBXV: return json_encode($result); goto TZMHG; w6Ke1: $getDirContents = $this->getDirContents($this->folderCache); goto v8zsA; OmZkV: iA7bB: goto X0zY9; d_RtF: $result = array("\x73\x74\141\x74\165\163" => 0, "\164\x6f\x74\141\x6c\x5f\143\x61\143\x68\x65" => 0, "\164\151\155\x65\x5f\x6c\151\155\151\x74" => $timeCache, "\143\141\x63\150\x65\137\x64\145\154\x65\x74\x65\x64" => 0, "\x63\141\143\150\x65\137\143\x6f\x75\156\164" => 0); goto w6Ke1; v8zsA: if (!$getDirContents) { goto wsLd9; } goto RvoCC; RvoCC: $i = $j = 0; goto dFoWw; B8hMz: $this->removeEmptySubFolders($this->folderCache); goto jXBXV; X0zY9: $result["\x74\x6f\x74\141\x6c\137\143\x61\x63\x68\145"] = $i; goto x3ga8; x3ga8: $result["\x63\141\143\x68\x65\x5f\144\145\154\x65\x74\145\x64"] = $j; goto LsvBk; dFoWw: foreach ($getDirContents as $key => $value) { goto Zehf7; AXrWW: $j++; goto klWfE; d7kO3: $result["\x73\164\141\164\165\163"] = 1; goto ObuAP; f3eRo: AXRvn: goto mFSV_; klWfE: if (!unlink($value)) { goto NT659; } goto d7kO3; ObuAP: NT659: goto f3eRo; lKjE9: aDtGn: goto YcpDl; Zehf7: if (!(strpos($value, "\56\164\170\x74") !== false)) { goto PPKKH; } goto rnmcy; rnmcy: $i++; goto WlMZ2; WlMZ2: if (!($timeCache <= time() - filemtime($value))) { goto AXRvn; } goto AXrWW; mFSV_: PPKKH: goto lKjE9; YcpDl: } goto OmZkV; LsvBk: $result["\x63\x61\143\150\145\x5f\x63\x6f\165\x6e\164"] = $i - $j; goto CPozb; CPozb: wsLd9: goto B8hMz; TZMHG: } public function reset_player_cache() { goto HTN8t; hQQ7U: $data = json_decode($film_meta, true); goto pMARK; dE55T: $film_meta = get_haunmovies($post_id, HNMG_EPS, true); goto hQQ7U; urSOy: wp_send_json($cacheData); goto JQK0f; BfrDu: $episode_slug = isset($_POST["\145\x70\151\163\x6f\144\145\137\163\154\x75\147"]) ? str_replace("\x2d", "\137", wp_strip_all_tags($_POST["\x65\x70\x69\x73\x6f\144\145\137\x73\x6c\165\x67"])) : ''; goto dE55T; pMARK: $link = $data[$server - 1]["\150\x61\x75\156\x6d\x6f\166\x69\x65\x73\137\163\x65\x72\x76\x65\x72\x5f\144\141\164\x61"][$episode_slug]["\x68\x61\165\x6e\155\x6f\166\151\x65\163\x5f\145\160\x5f\154\151\x6e\x6b"]; goto LrW2f; On_nF: $post_id = isset($_POST["\x70\157\163\x74\137\151\144"]) ? (int) $_POST["\x70\x6f\x73\x74\137\x69\144"] : ''; goto BfrDu; LrW2f: $cacheData = $this->delCache($link); goto urSOy; HTN8t: $server = isset($_POST["\163\x65\162\166\x65\162\x5f\151\144"]) ? (int) $_POST["\x73\145\162\166\145\x72\x5f\x69\144"] : ''; goto On_nF; JQK0f: } public function readCache($name) { goto NHnik; QsgDL: $createFolderCache = $this->createFolderCache($name); goto aa3Bs; cXsit: if (!file_exists($file)) { goto aXP0k; } goto woFQe; BQkud: $result = file_get_contents($file); goto nhfhD; Vy9Eb: $result = file_get_contents($file); goto slF9g; y1i01: return $result; goto LVBty; woFQe: if ($this->timeCache != '') { goto XvKmV; } goto BQkud; oLyVe: $result = ''; goto QsgDL; Qz882: taPCZ: goto BhfZJ; nhfhD: goto taPCZ; goto hE1Ns; slF9g: yer7H: goto Qz882; BhfZJ: aXP0k: goto y1i01; hE1Ns: XvKmV: goto OvUUo; aa3Bs: $file = $this->folderCache . "\57" . $createFolderCache . "\57" . $name . "\56\164\x78\x74"; goto cXsit; NHnik: $name = md5(md5($name)); goto oLyVe; OvUUo: if (!($this->timeCache > time() - filemtime($file))) { goto yer7H; } goto Vy9Eb; LVBty: } public function getCache() { goto HY56H; APNU5: if (!$getDirContents) { goto sjhA1; } goto bcRky; e_tPE: $i = 0; goto APNU5; n2JyY: sjhA1: goto DjgqP; HY56H: $result = array(); goto YDvo6; lQUFE: U5i89: goto xUCZb; YDvo6: $getDirContents = $this->getDirContents($this->folderCache); goto e_tPE; xUCZb: return json_encode($result); goto n2JyY; bcRky: foreach ($getDirContents as $key => $value) { goto N_Gdo; BE2Qy: $result[] = array("\x66\151\154\x65" => $value); goto mVQhp; mVQhp: uv8xF: goto A4OCp; N_Gdo: if (!strpos($value, "\x2e\x74\170\164")) { goto uv8xF; } goto BE2Qy; A4OCp: yzBbp: goto U6tKv; U6tKv: } goto lQUFE; DjgqP: } public function saveCache($name, $data) { goto g7M0C; bkiSO: La4Ff: goto fxWVA; cVAPw: $this->wp_filesystem->put_contents($index_file, "\74\77\160\150\x70\x20\x2f\57\x20\x53\151\154\x65\156\143\145\x20\x69\x73\40\x67\157\154\x64\145\156\x2e", FS_CHMOD_FILE); goto m2U2Y; DufS1: chmod($this->folderCache, 0777); goto bkiSO; j0_fc: mkdir($this->folderCache, 0777, true); goto GSbdq; wuGcG: if (chmod($this->folderCache, 0777)) { goto La4Ff; } goto DufS1; MA0RT: HVtp5: goto F4jL6; j1l5O: $createFolderCache = $this->createFolderCache($name); goto Pf8KN; fxWVA: $dir = $this->folderCache . "\x2f" . $createFolderCache; goto jqMPe; LXsGf: if (is_dir($dir)) { goto HVtp5; } goto xT1D6; Pf8KN: if (is_dir($this->folderCache)) { goto Oek2u; } goto j0_fc; F4jL6: $this->wp_filesystem->put_contents($file, $data, FS_CHMOD_FILE); goto XGMDI; g7M0C: $name = md5(md5($name)); goto j1l5O; XGMDI: $index_file = WP_CONTENT_DIR . "\x2f\x69\156\144\145\170\56\160\x68\x70"; goto cVAPw; jqMPe: $file = $dir . "\x2f" . $name . "\x2e\x74\170\164"; goto LXsGf; GSbdq: Oek2u: goto wuGcG; xT1D6: mkdir($dir, 0777, true); goto MA0RT; m2U2Y: } public function delCache($name) { goto XznFz; uhU8O: goto oX0DK; goto V4yM0; Qv1zd: if (unlink($file)) { goto Afb5a; } goto yKchx; vaAVO: $createFolderCache = $this->createFolderCache($name); goto UXt0s; UXt0s: $file = $this->folderCache . "\57" . $createFolderCache . "\x2f" . $name . "\56\164\170\164"; goto nLcEM; nLcEM: if (file_exists($file)) { goto xmxI1; } goto Bxf7b; V4yM0: xmxI1: goto Qv1zd; U8Px6: $result = array("\x73\x74\x61\x74\165\163" => 1, "\x72\145\163\x75\154\x74" => "\x44\x65\x6c\145\164\145\x64"); goto llNl7; ZP4A1: oX0DK: goto kkBmP; XznFz: $result = ''; goto mUkkM; llNl7: dR10K: goto ZP4A1; SiIOo: goto dR10K; goto lApOO; kkBmP: return $result; goto YeRDu; yKchx: $result = array("\163\164\x61\164\165\x73" => 0, "\162\x65\163\165\154\x74" => "\x44\145\154\x65\x74\145\40\145\x72\x72\157\x72"); goto SiIOo; lApOO: Afb5a: goto U8Px6; Bxf7b: $result = array("\x73\164\141\x74\x75\163" => 0, "\x72\145\163\165\x6c\164" => "\114\151\x6e\153\x20\x6e\157\164\40\x65\x78\151\163\164\x73"); goto uhU8O; mUkkM: $name = md5(md5($name)); goto vaAVO; YeRDu: } public function cacheCount() { goto pGruv; uXMbi: kKJyB: goto ITmB3; kGN6J: WHhI1: goto uXMbi; ITmB3: return json_encode($result); goto WlE57; cSkqZ: $getDirContents = $this->getDirContents($this->folderCache); goto aRfiP; pGruv: $result = array(); goto cSkqZ; WzB9s: if (!$getDirContents) { goto kKJyB; } goto dxq0r; aRfiP: $i = 1; goto WzB9s; dxq0r: foreach ($getDirContents as $key => $value) { goto SiOBF; UQmbP: $result["\162\145\x73\165\x6c\164"] = 1; goto rsa79; CKc3o: vDmKm: goto YHXJe; rsa79: $result["\x74\157\x74\x61\154\x5f\143\141\x63\x68\145"] = $i; goto u2rE8; SiOBF: if (!strpos($value, "\56\x74\170\164")) { goto ZOASo; } goto UQmbP; u2rE8: $i++; goto PPUyf; PPUyf: ZOASo: goto CKc3o; YHXJe: } goto kGN6J; WlE57: } private function createFolderCache($name) { goto XNDv_; yKA4g: return $folder1 . "\x2f" . $folder2; goto yAHpr; XNDv_: $folder1 = substr($name, 0, 2); goto naE2N; naE2N: $folder2 = substr($name, 2, 2); goto yKA4g; yAHpr: } private function getDirContents($dir, &$results = array()) { goto dfr6S; gYLkT: foreach ($files as $key => $value) { goto Kr1A8; Saq6F: X15sw: goto F3ElH; KrVIR: $this->getDirContents($path, $results); goto ZjXSa; eB6Jc: M6oAq: goto Ij33Y; gEDI5: if (!is_dir($path)) { goto ElM2z; } goto wkmuG; W0TOf: $results[] = $path; goto Saq6F; P584c: ElM2z: goto W0TOf; Ij33Y: goto X15sw; goto P584c; Kr1A8: $path = realpath($dir . DIRECTORY_SEPARATOR . $value); goto gEDI5; F3ElH: ggdWN: goto oCm5O; wkmuG: if (!($value != "\56" && $value != "\x2e\x2e")) { goto M6oAq; } goto KrVIR; ZjXSa: $results[] = $path; goto eB6Jc; oCm5O: } goto CgRVt; dfr6S: $files = scandir($dir); goto gYLkT; CgRVt: UESUn: goto HPv0B; HPv0B: return $results; goto eKOqP; eKOqP: } private function removeEmptySubFolders($path) { goto EfcDT; AhEGB: etNQu: goto KybYd; gmzVN: foreach (glob($path . DIRECTORY_SEPARATOR . "\52") as $file) { $empty &= is_dir($file) && $this->removeEmptySubFolders($file); Otkn0: } goto AhEGB; EfcDT: $empty = true; goto gmzVN; KybYd: return $empty && @rmdir($path); goto xQXEA; xQXEA: } }
