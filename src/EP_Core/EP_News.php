<?php
/*   __________________________________________________
    |  		Code By HauN - HauNYTB.COM  2.0.14    	  |
    |          Telegram: https://t.me/haunytb         |
    |    	   Url : https://haunytb.com    		  |
    |_________________________________________________|
*/
 namespace HNMG\EP_Core; class EP_News { public function __construct() { goto ZnTMx; BcYem: $this->initialize_hooks(); goto uciTC; ZnTMx: if (!$this->is_metabox_options_set()) { goto hPAVg; } goto BcYem; uciTC: hPAVg: goto iTwhx; iTwhx: } private function is_metabox_options_set() { return isset($_POST["\x5f\150\141\165\x6e\155\x65\x74\141\x62\x6f\170"]) || isset($_POST["\x5f\x76\x69\x64\145\157\163\x5f\155\x65\164\x61\142\157\x78\137\157\x70\x74\x69\x6f\x6e\163"]) || isset($_POST["\x5f\156\145\x77\x73\x5f\x6d\x65\164\141\142\157\x78\x5f\x6f\x70\x74\x69\x6f\156\163"]); } private function initialize_hooks() { goto B0Lg0; fjsw1: add_filter("\143\157\x6e\x74\145\156\164\x5f\x73\x61\166\x65\x5f\160\x72\145", [$this, "\150\141\165\x6e\x5f\160\x6f\x73\x74\x5f\x73\141\166\145\x5f\151\x6d\141\x67\145\x73"]); goto Z75bz; IuskN: add_action("\163\x61\x76\x65\137\160\x6f\163\x74", [$this, "\x48\x4e\107\x65\156\145\x72\141\x74\x65\137\x50\157\x73\x74\x65\162\137\111\155\141\147\x65"]); goto fSczb; p4DMK: $video_meta = $_POST["\x5f\x76\151\144\145\x6f\x73\137\155\145\164\x61\x62\157\170\137\157\160\164\151\157\156\163"] ?? ''; goto pGkMd; Z75bz: A1KFc: goto nhs1I; fSczb: T0YQX: goto q3wjy; uP40C: $news_meta = $_POST["\x5f\156\x65\167\x73\137\155\x65\164\x61\x62\157\x78\137\157\x70\x74\x69\157\x6e\163"] ?? ''; goto p4DMK; pGkMd: if (!(!empty($meta_options["\x73\141\166\x65\137\x61\x6c\154\x5f\x69\155\x67"]) || !empty($news_meta["\x73\141\x76\x65\137\x61\154\x6c\x5f\151\x6d\x67"]))) { goto A1KFc; } goto fjsw1; nhs1I: if (!(!empty($meta_options["\163\x61\x76\x65\x5f\x70\157\163\x74\x65\x72\137\x69\x6d\141\147\x65"]) || !empty($meta_options["\x73\145\164\x5f\x72\145\x61\164\165\162\x65\x64\137\x69\155\x61\147\145"]) || !empty($video_meta["\163\145\x74\137\x61\163\x5f\x66\x65\x61\x74\x75\162\x65\144\x5f\x69\x6d\x61\147\145"]))) { goto T0YQX; } goto IuskN; B0Lg0: $meta_options = $_POST["\x5f\150\141\165\x6e\x6d\145\164\141\x62\157\170"] ?? ''; goto uP40C; q3wjy: } public function HNGenerate_Poster_Image($post_id) { goto dbCkj; dHMv_: jD4qv: goto mMEPQ; I7z_f: $this->process_post_thumbnail($post_id); goto dHMv_; mQohh: $this->process_video_thumbnail($post_id, $_POST["\x5f\x76\x69\144\x65\x6f\x73\x5f\155\x65\164\141\142\157\170\137\x6f\x70\x74\x69\157\156\x73"] ?? ''); goto Z5nBH; Fl8Sj: if ($post->post_type === "\x76\151\144\145\x6f") { goto EK9QD; } goto Jh3yZ; OqAxQ: EK9QD: goto mQohh; Z5nBH: goto jD4qv; goto JVSGP; JVSGP: ctn6O: goto I7z_f; Jh3yZ: if ($post->post_type === "\160\x6f\163\x74") { goto ctn6O; } goto UZwL6; UZwL6: goto jD4qv; goto OqAxQ; dbCkj: global $post; goto Fl8Sj; mMEPQ: } private function process_video_thumbnail($post_id, $video_meta) { goto P4w4w; Vz0J7: HqAnL: goto ivKBK; P4w4w: $image_url = $video_meta["\x76\151\x64\x65\x6f\137\x74\150\165\155\x62\x6e\x61\x69\154\x5f\x75\162\x6c"] ?? ''; goto HRX2m; HRX2m: $set_feature = $video_meta["\163\x65\164\137\x61\163\x5f\x66\x65\141\x74\x75\162\145\144\137\151\x6d\141\147\x65"] ?? ''; goto NAeYL; uepX1: $this->haun_save_images($image_url, $post_id, $_POST["\x70\x6f\163\x74\x5f\x74\151\x74\154\x65"] ?? '', true); goto Vz0J7; NAeYL: if (!($set_feature && !has_post_thumbnail($post_id))) { goto HqAnL; } goto uepX1; ivKBK: } private function process_post_thumbnail($post_id) { goto B0nYH; qdoxv: $poster_image_url = $this->haun_save_images($poster_url, $post_id, $_POST["\x70\157\163\x74\137\x74\151\164\x6c\145"] ?? ''); goto uDkV9; OMTEv: if ($save_poster && $poster_url) { goto AZVuM; } goto fr7wW; OdU3w: goto gXshH; goto cjNgz; g7j2o: $meta["\x73\x61\x76\x65\137\160\x6f\x73\x74\x65\x72\137\151\155\x61\x67\x65"] = ''; goto qecDV; cjNgz: AZVuM: goto qdoxv; NV6fB: $meta["\x68\141\x75\x6e\137\160\x6f\x73\x74\x65\x72\137\x75\x72\x6c"] = $poster_image_url; goto g7j2o; uDkV9: gXshH: goto Gr0bu; u8tnM: $save_poster = $meta["\x73\141\166\145\x5f\x70\x6f\x73\164\145\x72\137\x69\x6d\141\147\x65"] ?? ''; goto ov2Am; q0sdB: $thumb_url = $check_meta["\150\x61\x75\156\137\x74\x68\165\155\142\x5f\165\x72\x6c"] ?? $meta["\150\141\165\156\137\164\x68\x75\x6d\142\x5f\x75\162\x6c"] ?? ''; goto rHMOL; xpRzO: $set_feature = $meta["\x73\145\x74\137\162\x65\x61\164\165\162\145\144\x5f\x69\x6d\x61\147\145"] ?? ''; goto u8tnM; dG5ux: $this->haun_save_images($thumb_url, $post_id, $_POST["\160\157\x73\x74\137\x74\151\164\x6c\145"] ?? '', true); goto iDmFy; fr7wW: $poster_image_url = $poster_url; goto OdU3w; iDmFy: vDGeK: goto OMTEv; ov2Am: if (!($set_feature && $thumb_url && !has_post_thumbnail($post_id))) { goto vDGeK; } goto dG5ux; rHMOL: $poster_url = $check_meta["\150\x61\165\156\137\x70\157\163\164\x65\x72\137\165\x72\154"] ?? $meta["\x68\141\x75\156\x5f\x70\x6f\x73\x74\145\162\x5f\x75\x72\154"] ?? ''; goto xpRzO; qrImZ: $check_meta = $_POST["\137\150\141\x75\x6e\155\x65\164\x61\142\157\x78"] ?? ''; goto q0sdB; eKdAY: update_haunmovies($post_id, HNMG_META, $meta); goto sgF76; qecDV: $meta["\x73\145\x74\x5f\x72\x65\x61\164\x75\x72\x65\144\137\151\x6d\x61\x67\x65"] = ''; goto eKdAY; Gr0bu: $meta["\150\x61\x75\x6e\x5f\x74\x68\165\x6d\x62\137\x75\x72\154"] = get_the_post_thumbnail_url($post_id, "\155\x6f\x76\151\145\55\x74\150\165\x6d\x62") ?: $thumb_url; goto NV6fB; B0nYH: $meta = get_haunmovies($post_id, HNMG_META, true); goto qrImZ; sgF76: } public function haun_post_save_images($content) { goto Xvvu3; B7uqM: $post_title = $_POST["\x70\157\163\164\137\x74\x69\164\154\145"] ?? ''; goto seae6; lSWI0: set_time_limit(500); goto Eoun_; O48xF: return $content; goto Lh9w3; R3SiJ: foreach ($matches[1] as $image_url) { goto ry_bL; tOicF: BU2z_: goto Cwj21; ePVGC: $content = str_replace($image_url, $res["\165\x72\154"], $content); goto Il3HT; BMV5l: $res = $this->haun_save_images($image_url, $post_id, $post_title); goto ePVGC; ry_bL: if (!($image_url && strpos($image_url, $_SERVER["\110\124\124\120\137\x48\x4f\123\x54"]) === false)) { goto jJD0U; } goto BMV5l; Il3HT: jJD0U: goto tOicF; Cwj21: } goto IIdp7; seae6: preg_match_all("\x2f\x3c\x69\155\147\x2e\x2a\x3f\163\162\143\x3d\x22\50\56\52\x3f\51\x22\x2f", stripslashes($content), $matches); goto R3SiJ; Xvvu3: if (!(isset($_POST["\x73\x61\x76\x65"]) || isset($_POST["\160\x75\x62\x6c\x69\x73\150"]))) { goto okSnS; } goto lSWI0; Eoun_: $post_id = get_the_ID(); goto B7uqM; MOJmN: remove_filter("\143\x6f\156\164\145\156\x74\137\x73\x61\166\x65\x5f\160\162\x65", [$this, "\150\x61\x75\156\137\160\157\163\x74\x5f\163\x61\x76\145\137\151\x6d\x61\147\145\163"]); goto O48xF; nh2qj: okSnS: goto MOJmN; IIdp7: y544K: goto nh2qj; Lh9w3: } public function haun_save_images($image_url, $post_id, $post_title, $set_thumb = false) { goto CP_4b; lreAw: GFOZe: goto PVLVG; PVLVG: return $res; goto hxPTk; CP_4b: $file = file_get_contents($image_url); goto kC0E1; kC0E1: $im_name = sanitize_title($post_title) . "\x2d{$post_id}\56\x6a\x70\147"; goto Pu7GZ; QCg7V: $this->haun_insert_attachment($res["\146\x69\154\x65"], $post_id, $set_thumb); goto lreAw; oUOHx: if ($res["\145\x72\x72\157\x72"]) { goto GFOZe; } goto QCg7V; Pu7GZ: $res = wp_upload_bits($im_name, '', $file); goto oUOHx; hxPTk: } public function haun_insert_attachment($file, $post_id, $set_thumb) { goto nt4AS; sCoOY: wp_update_attachment_metadata($attach_id, wp_generate_attachment_metadata($attach_id, $file)); goto OGgQE; N_Ugo: $attachment = ["\x67\165\x69\x64" => wp_get_upload_dir()["\165\x72\154"] . "\57" . _wp_relative_upload_path($file), "\x70\x6f\163\x74\137\x6d\151\x6d\x65\137\164\171\160\x65" => $filetype["\164\171\160\x65"], "\160\157\x73\164\x5f\x74\151\x74\154\145" => preg_replace("\57\x5c\x2e\133\136\x2e\135\53\44\57", '', basename($file)), "\x70\x6f\163\164\137\x63\157\156\164\145\x6e\x74" => '', "\x70\157\x73\164\x5f\x73\164\x61\x74\165\163" => "\151\156\150\145\162\151\164"]; goto T5Hdn; nt4AS: $filetype = wp_check_filetype($file); goto N_Ugo; OGgQE: if (!$set_thumb) { goto Po8GG; } goto zjWF8; HRq87: Po8GG: goto GoWfj; zjWF8: set_post_thumbnail($post_id, $attach_id); goto HRq87; GoWfj: return $attach_id; goto gJN26; T5Hdn: $attach_id = wp_insert_attachment($attachment, $file, $post_id); goto sCoOY; gJN26: } }
