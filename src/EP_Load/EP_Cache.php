<?php
/*   __________________________________________________
    |  		Code By HauN - HauNYTB.COM  2.0.14    	  |
    |          Telegram: https://t.me/haunytb         |
    |    	   Url : https://haunytb.com    		  |
    |_________________________________________________|
*/
 namespace HNMG\EP_Load; class EP_Cache { public $timeCache; public $folderCache; public function __construct() { goto AY7ac; VKTYP: global $wp_filesystem; goto XEohd; XEohd: WP_Filesystem(); goto vvF0m; S7IAu: $this->timeCache = 3600; goto B0us5; AY7ac: $this->folderCache = WP_CONTENT_DIR . "\57\x66\151\154\155\55\143\141\x63\150\145"; goto S7IAu; B0us5: if (!function_exists("\127\120\x5f\106\151\154\x65\163\171\x73\x74\145\155")) { require_once ABSPATH . "\167\160\x2d\x61\144\155\x69\x6e\x2f\151\x6e\143\x6c\165\x64\x65\163\x2f\x66\x69\154\x65\56\160\150\160"; } goto VKTYP; vvF0m: $this->wp_filesystem = $wp_filesystem; goto bH6Lu; bH6Lu: } public function register() { goto ter5D; Z7i0x: add_action("\167\x70\x5f\x61\152\141\x78\x5f\156\157\x70\162\x69\x76\137\144\x65\x6c\145\164\x65\137\x61\x6c\x6c\137\143\141\143\x68\145", [$this, "\x64\x65\x6c\145\164\145\137\x61\x6c\154\137\143\x61\x63\150\145"]); goto Qs6Q0; caSc4: add_action("\167\160\x5f\x61\x6a\141\x78\137\144\x65\x6c\145\164\145\137\x61\154\154\137\x63\x61\x63\x68\x65", [$this, "\x64\145\x6c\x65\164\x65\137\141\x6c\154\137\143\x61\x63\x68\x65"]); goto Z7i0x; oSerI: add_action("\x77\160\137\x61\152\x61\170\137\156\157\x70\x72\151\x76\137\x72\x65\x73\145\164\x5f\x70\x6c\x61\x79\145\162\137\143\141\x63\150\x65", [$this, "\x72\x65\163\145\x74\137\160\x6c\141\x79\x65\x72\x5f\x63\x61\x63\150\145"]); goto yBGOO; mel0M: add_filter("\x48\x4e\115\x47\55\x70\141\x67\145\163", [$this, "\x68\x6e\x61\x70\151\x73\x6f\x64\x65\137\x63\x61\143\150\x65\137\x6d\145\x6e\x75"]); goto caSc4; ter5D: add_action("\x77\x70\137\x61\152\141\170\137\x72\x65\x73\145\164\137\160\154\x61\x79\x65\x72\137\143\x61\x63\150\x65", [$this, "\162\x65\163\x65\x74\137\x70\x6c\x61\x79\x65\162\137\x63\141\143\x68\145"]); goto oSerI; yBGOO: add_filter("\110\116\115\x47\55\x74\141\142\163", [$this, "\150\x6e\141\160\x69\163\157\144\145\137\143\141\x63\x68\x65\x5f\155\145\x6e\x75"]); goto mel0M; Qs6Q0: } public function hnapisode_cache_menu($nav) { $nav["\x31\x32\60"] = array("\163\x6c\x75\147" => "\x68\156\x6d\x67\x2d\x63\x61\143\150\x65\x2d\x6d\x61\x6e\141\x67\145\162", "\143\x61\154\154\x62\141\143\x6b" => array($this, "\x68\x6e\x6d\147\x5f\x63\141\x63\x68\x65\137\x6d\141\x6e\x61\x67\x65\137\x70\141\147\x65"), "\x74\151\164\x6c\145" => __("\110\x4e\115\x47\40\x43\141\x63\x68\x65", "\x68\x6e\x6d\147\145\x70\151\163"), "\x69\x63\x6f\156" => "\146\141\x2d\160\154\141\x79\x2d\143\151\162\x63\154\145"); return $nav; } public function hnmg_cache_manage_page() { goto iJGon; LUJdh: $get_cache = json_decode($this->getCache()); goto x0mkV; iJGon: $cache_count = json_decode($this->cacheCount()); goto LUJdh; x0mkV: echo view("\x48\x4e\x4d\107\x3a\72\154\141\171\157\x75\x74\163\56\143\141\143\x68\x65", compact("\x63\141\x63\150\x65\137\143\157\x75\x6e\x74", "\x67\145\164\x5f\x63\x61\143\150\x65")); goto K4xGe; K4xGe: } public function delete_all_cache() { goto sZP3p; sZP3p: $result = json_decode($this->delAllCache(0), true); goto wEhU4; wEhU4: $status = "\123\x75\x63\143\145\163\x73\x66\x75\154\154\171"; goto vzTaV; vzTaV: $total_cache = $result["\x74\157\x74\x61\154\x5f\143\x61\143\150\x65"] ?? 0; goto DeuvA; Os6WL: wp_die(); goto HWdhk; C9Y_Z: wp_send_json_success(["\163\x74\141\164\x75\x73" => $status, "\164\157\x74\141\x6c\x5f\143\x61\x63\150\145" => $total_cache, "\x74\x69\x6d\x65\x5f\154\x69\x6d\151\164" => $time_limit, "\143\x61\x63\150\x65\x5f\144\145\x6c\x65\x74\145\144" => $cache_deleted]); goto Os6WL; DeuvA: $time_limit = $result["\x74\151\155\145\x5f\154\x69\155\151\x74"] ?? 0; goto Ncr5q; Ncr5q: $cache_deleted = $result["\143\141\x63\150\145\x5f\144\145\154\145\164\x65\144"] ?? 0; goto C9Y_Z; HWdhk: } public function delAllCache($timeCache) { goto GLeq8; PzWpq: if (!$getDirContents) { goto Ku1w2; } goto k4nYg; ngHRm: return json_encode($result); goto PEjhn; RDiZe: $result["\143\x61\143\150\x65\137\x63\x6f\165\x6e\x74"] = $i - $j; goto qlJ6O; DksCe: o3Mhn: goto MVwYe; qlJ6O: Ku1w2: goto nuGAb; MVwYe: $result["\x74\157\x74\141\x6c\137\143\x61\x63\150\145"] = $i; goto TfY9u; k4nYg: $i = $j = 0; goto Ua2X5; TfY9u: $result["\x63\141\x63\x68\145\137\x64\145\154\x65\x74\x65\144"] = $j; goto RDiZe; Ua2X5: foreach ($getDirContents as $key => $value) { goto ceju0; nYCI_: $result["\x73\164\141\x74\x75\x73"] = 1; goto wbnqZ; hzNf5: yiZZP: goto l9yPY; jy1nV: L82wb: goto hzNf5; XPajn: $j++; goto EanFr; Pi3KY: rmI1s: goto jy1nV; EanFr: if (!unlink($value)) { goto Wpn1M; } goto nYCI_; ceju0: if (!(strpos($value, "\x2e\164\x78\164") !== false)) { goto L82wb; } goto BBOAm; bur1T: if (!($timeCache <= time() - filemtime($value))) { goto rmI1s; } goto XPajn; BBOAm: $i++; goto bur1T; wbnqZ: Wpn1M: goto Pi3KY; l9yPY: } goto DksCe; GLeq8: $result = array("\163\x74\x61\164\x75\x73" => 0, "\x74\x6f\164\141\154\137\143\141\143\150\145" => 0, "\164\x69\x6d\x65\137\154\151\x6d\151\x74" => $timeCache, "\x63\141\x63\150\145\137\144\x65\x6c\145\164\145\144" => 0, "\143\141\143\150\x65\137\143\157\x75\156\164" => 0); goto anxQS; anxQS: $getDirContents = $this->getDirContents($this->folderCache); goto PzWpq; nuGAb: $this->removeEmptySubFolders($this->folderCache); goto ngHRm; PEjhn: } public function reset_player_cache() { goto OgC48; DRrcx: $episode_slug = isset($_POST["\x65\x70\151\x73\x6f\x64\x65\137\163\154\165\x67"]) ? str_replace("\55", "\137", wp_strip_all_tags($_POST["\145\x70\151\163\157\144\x65\137\163\154\x75\x67"])) : ''; goto COTnv; kmGbM: wp_send_json($cacheData); goto NG2Kx; PlRpG: $cacheData = $this->delCache($link); goto kmGbM; TVa65: $link = $data[$server - 1]["\x68\141\165\156\155\x6f\x76\151\x65\x73\x5f\163\145\x72\x76\145\x72\x5f\144\141\x74\x61"][$episode_slug]["\x68\141\165\x6e\x6d\x6f\x76\x69\145\x73\x5f\145\x70\x5f\154\151\156\x6b"]; goto PlRpG; COTnv: $film_meta = get_post_meta($post_id, HNMG_EPS, true); goto zIErl; zIErl: $data = json_decode($film_meta, true); goto TVa65; C31_l: $post_id = isset($_POST["\x70\x6f\x73\164\137\151\x64"]) ? (int) $_POST["\160\x6f\x73\164\137\151\x64"] : ''; goto DRrcx; OgC48: $server = isset($_POST["\163\x65\162\x76\145\x72\x5f\x69\x64"]) ? (int) $_POST["\163\145\162\166\145\x72\x5f\x69\144"] : ''; goto C31_l; NG2Kx: } public function readCache($name) { goto Iag4k; QEGJo: goto FAIzb; goto cLxpa; o3h5B: $createFolderCache = $this->createFolderCache($name); goto v7Nz3; fM8lr: $result = ''; goto o3h5B; IQq2I: if (!file_exists($file)) { goto yPdSz; } goto ido4V; v7Nz3: $file = $this->folderCache . "\x2f" . $createFolderCache . "\x2f" . $name . "\56\164\170\x74"; goto IQq2I; iOnm2: return $result; goto tjoeG; w5ZHp: $result = file_get_contents($file); goto Jmy3a; SGqPq: if (!($this->timeCache > time() - filemtime($file))) { goto hnviO; } goto w5ZHp; sq2g_: FAIzb: goto F3_n8; Iag4k: $name = md5(md5($name)); goto fM8lr; Jmy3a: hnviO: goto sq2g_; F3_n8: yPdSz: goto iOnm2; f_eK0: $result = file_get_contents($file); goto QEGJo; cLxpa: vj_2Q: goto SGqPq; ido4V: if ($this->timeCache != '') { goto vj_2Q; } goto f_eK0; tjoeG: } public function getCache() { goto iopI1; nrRzN: return json_encode($result); goto fbTL2; neUV6: $getDirContents = $this->getDirContents($this->folderCache); goto Bc7WO; Bc7WO: $i = 0; goto oNwDW; fbTL2: Zf1rT: goto vb5Yd; iopI1: $result = array(); goto neUV6; oNwDW: if (!$getDirContents) { goto Zf1rT; } goto pLBuI; pLBuI: foreach ($getDirContents as $key => $value) { goto Z2bCj; l9xzs: rZdk2: goto uuoKw; LM_Y1: jtlHa: goto l9xzs; AhuE2: $result[] = array("\x66\151\154\145" => $value); goto LM_Y1; Z2bCj: if (!strpos($value, "\56\164\x78\164")) { goto jtlHa; } goto AhuE2; uuoKw: } goto GQZeh; GQZeh: RVItV: goto nrRzN; vb5Yd: } public function saveCache($name, $data) { goto cFJyK; O2ah9: mkdir($this->folderCache, 0777, true); goto FmtKB; BM6Hh: $file = $dir . "\57" . $name . "\56\164\170\164"; goto vmiXZ; QbXeI: YO0vh: goto kAhph; D5mY8: DbNnw: goto ue54M; dDr11: mkdir($dir, 0777, true); goto D5mY8; J7Lyu: $index_file = WP_CONTENT_DIR . "\57\x66\151\x6c\155\x2d\x63\x61\143\x68\145\57\151\x6e\x64\145\170\x2e\x70\x68\x70"; goto dQGYK; TU3Fs: if (chmod($this->folderCache, 0777)) { goto YO0vh; } goto DtkPR; DtkPR: chmod($this->folderCache, 0777); goto QbXeI; vmiXZ: if (is_dir($dir)) { goto DbNnw; } goto dDr11; iVhAd: $createFolderCache = $this->createFolderCache($name); goto OUUR3; ue54M: $this->wp_filesystem->put_contents($file, $data, FS_CHMOD_FILE); goto J7Lyu; cFJyK: $name = md5(md5($name)); goto iVhAd; kAhph: $dir = $this->folderCache . "\57" . $createFolderCache; goto BM6Hh; dQGYK: $this->wp_filesystem->put_contents($index_file, "\74\x3f\x70\150\160\40\57\x2f\40\x53\x69\x6c\145\156\x63\145\40\151\x73\40\147\157\154\x64\145\x6e\56", FS_CHMOD_FILE); goto NjTbJ; OUUR3: if (is_dir($this->folderCache)) { goto ETZKa; } goto O2ah9; FmtKB: ETZKa: goto TU3Fs; NjTbJ: } public function delCache($name) { goto UXQWK; e3bB0: $createFolderCache = $this->createFolderCache($name); goto OdJAp; O5iol: $result = array("\163\x74\141\x74\x75\x73" => 0, "\x72\145\163\x75\x6c\164" => "\104\x65\x6c\145\x74\x65\40\x65\x72\x72\x6f\162"); goto nMotk; uVIBK: $result = array("\x73\x74\x61\164\165\163" => 1, "\x72\145\x73\165\x6c\164" => "\x44\145\154\145\x74\145\x64"); goto mIO5X; UXQWK: $result = ''; goto UBoTU; mIO5X: MzTuN: goto iX9WM; OdJAp: $file = $this->folderCache . "\57" . $createFolderCache . "\57" . $name . "\x2e\164\x78\x74"; goto M11my; kqd74: $result = array("\x73\x74\x61\x74\x75\163" => 0, "\x72\145\x73\165\x6c\x74" => "\x4c\151\x6e\x6b\x20\x6e\x6f\164\40\145\170\x69\163\x74\x73"); goto n4p3I; lD4h6: return $result; goto P9dgH; rIbuM: M8QoH: goto uVIBK; M11my: if (file_exists($file)) { goto JHeMI; } goto kqd74; iX9WM: mt7ip: goto lD4h6; n4p3I: goto mt7ip; goto SeDQu; SeDQu: JHeMI: goto MJV1D; UBoTU: $name = md5(md5($name)); goto e3bB0; MJV1D: if (unlink($file)) { goto M8QoH; } goto O5iol; nMotk: goto MzTuN; goto rIbuM; P9dgH: } public function cacheCount() { goto LHWCA; uQoV6: h98v_: goto KS1F3; BYsHC: $getDirContents = $this->getDirContents($this->folderCache); goto q5dtE; WsuBM: foreach ($getDirContents as $key => $value) { goto QYkDx; Ff3iT: $result["\x74\x6f\x74\141\154\x5f\143\141\143\x68\x65"] = $i; goto dwyuZ; dwyuZ: $i++; goto fMpv1; JIF6K: n7WuN: goto EXsyZ; QYkDx: if (!strpos($value, "\x2e\x74\170\x74")) { goto rIInq; } goto d8dm_; fMpv1: rIInq: goto JIF6K; d8dm_: $result["\162\x65\163\165\154\x74"] = 1; goto Ff3iT; EXsyZ: } goto opmRX; KS1F3: return json_encode($result); goto mtogb; LHWCA: $result = array(); goto BYsHC; ooJQF: if (!$getDirContents) { goto h98v_; } goto WsuBM; opmRX: CdqiU: goto uQoV6; q5dtE: $i = 1; goto ooJQF; mtogb: } private function createFolderCache($name) { goto v5g2Q; kP0qE: $folder2 = substr($name, 2, 2); goto SM6eg; v5g2Q: $folder1 = substr($name, 0, 2); goto kP0qE; SM6eg: return $folder1 . "\x2f" . $folder2; goto d1A9c; d1A9c: } private function getDirContents($dir, &$results = array()) { goto ItyoT; Biuls: return $results; goto VmBJi; lM4to: foreach ($files as $key => $value) { goto rjMOi; lN464: tNfPf: goto KqNSC; Gym6g: goto tNfPf; goto PhNJM; oucVD: MKfMv: goto Gym6g; bXete: $this->getDirContents($path, $results); goto Txe5P; Txe5P: $results[] = $path; goto oucVD; hZ1_w: if (!($value != "\x2e" && $value != "\56\x2e")) { goto MKfMv; } goto bXete; KqNSC: qAVom: goto JPq0m; vnNXp: if (!is_dir($path)) { goto Lvsr0; } goto hZ1_w; rjMOi: $path = realpath($dir . DIRECTORY_SEPARATOR . $value); goto vnNXp; PhNJM: Lvsr0: goto NLxAH; NLxAH: $results[] = $path; goto lN464; JPq0m: } goto dh78d; dh78d: tvJGW: goto Biuls; ItyoT: $files = scandir($dir); goto lM4to; VmBJi: } private function removeEmptySubFolders($path) { goto vGDjG; j88Jd: ySUqi: goto K05Rg; vGDjG: $empty = true; goto eLxwX; eLxwX: foreach (glob($path . DIRECTORY_SEPARATOR . "\52") as $file) { $empty &= is_dir($file) && $this->removeEmptySubFolders($file); cPf3m: } goto j88Jd; K05Rg: return $empty && @rmdir($path); goto yV1i_; yV1i_: } }
