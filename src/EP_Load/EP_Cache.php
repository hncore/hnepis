<?php
/*   __________________________________________________
    |  		Code By HauN - HauNYTB.COM  2.0.14    	  |
    |          Telegram: https://t.me/haunytb         |
    |    	   Url : https://haunytb.com    		  |
    |_________________________________________________|
*/
 namespace HNMG\EP_Load; class EP_Cache { public $timeCache; public $folderCache; public function __construct() { goto pr0py; hWwoO: l7Xwv: goto egZMI; mDs4a: if (is_dir($this->folderCache)) { goto l7Xwv; } goto Pbzq8; PQqBl: $this->wp_filesystem = $wp_filesystem; goto Mgfi2; eY2P5: global $wp_filesystem; goto YX7lH; Pbzq8: wp_mkdir_p($this->folderCache); goto hWwoO; IZVbB: if (!function_exists("\x57\x50\137\x46\151\x6c\145\x73\x79\163\164\x65\x6d")) { require_once ABSPATH . "\167\160\x2d\141\144\x6d\x69\156\57\151\x6e\143\x6c\165\144\145\x73\x2f\x66\151\154\x65\56\x70\x68\160"; } goto eY2P5; egZMI: $this->timeCache = 3600; goto IZVbB; pr0py: $this->folderCache = HNMG_CACHE; goto mDs4a; YX7lH: WP_Filesystem(); goto PQqBl; Mgfi2: } public function register() { goto g2Xjj; ufnj5: add_filter("\x48\116\x4d\107\x2d\x70\x61\x67\x65\x73", [$this, "\150\x6e\141\160\x69\163\x6f\144\x65\x5f\x63\x61\x63\x68\145\x5f\x6d\x65\x6e\x75"]); goto Ct82q; Ct82q: add_action("\x77\160\x5f\141\x6a\x61\x78\137\x64\x65\154\x65\x74\x65\137\x61\154\x6c\137\x63\x61\x63\150\x65", [$this, "\144\x65\154\x65\x74\145\137\x61\x6c\154\x5f\143\141\x63\150\145"]); goto TAxLY; g2Xjj: if (!(HNCORE()->get_product_status() == "\143\x6f\x6e\x6e\x65\143\x74\x65\144")) { goto rCFGd; } goto NhHNd; TAxLY: add_action("\x77\160\x5f\x61\x6a\141\170\x5f\x6e\x6f\160\x72\x69\166\137\144\x65\x6c\145\x74\x65\137\141\x6c\x6c\137\143\x61\x63\150\145", [$this, "\144\145\x6c\x65\x74\x65\x5f\141\x6c\x6c\x5f\x63\141\x63\x68\x65"]); goto G_4wo; G_4wo: rCFGd: goto SzMTC; kS2zm: add_filter("\110\x4e\x4d\107\x2d\164\141\142\163", [$this, "\x68\x6e\141\x70\151\x73\157\144\x65\137\x63\x61\143\150\x65\137\x6d\145\156\165"]); goto ufnj5; NhHNd: add_action("\167\x70\137\x61\x6a\141\x78\x5f\x72\145\163\145\x74\137\x70\x6c\x61\171\x65\x72\137\x63\x61\143\150\x65", [$this, "\x72\x65\163\145\164\x5f\x70\154\141\x79\x65\162\x5f\143\x61\x63\150\145"]); goto sF3Pc; sF3Pc: add_action("\167\x70\x5f\141\152\x61\170\137\x6e\157\160\x72\151\x76\137\x72\145\x73\145\x74\137\x70\x6c\x61\x79\x65\162\x5f\x63\141\143\x68\145", [$this, "\x72\145\163\145\164\137\160\154\141\x79\145\162\x5f\143\x61\x63\x68\145"]); goto kS2zm; SzMTC: } public function hnapisode_cache_menu($nav) { $nav["\x31\62\x30"] = array("\163\154\x75\147" => "\x68\x6e\155\147\55\143\141\143\150\145\55\155\141\156\x61\147\145\x72", "\x63\x61\x6c\x6c\x62\141\x63\153" => array($this, "\150\x6e\x6d\147\137\x63\x61\143\150\145\137\x6d\141\156\141\x67\145\x5f\x70\x61\147\x65"), "\164\x69\x74\x6c\x65" => __("\110\116\115\x47\x20\103\x61\x63\150\x65", "\x68\156\155\147\145\160\151\x73"), "\151\x63\157\x6e" => "\x66\141\55\160\x6c\x61\171\55\x63\x69\x72\143\x6c\145"); return $nav; } public function hnmg_cache_manage_page() { goto JgXCi; XRq7J: $get_cache = json_decode($this->getCache()); goto Fkwiz; Fkwiz: echo view("\110\116\x4d\107\x3a\x3a\154\141\x79\157\165\164\x73\56\x63\141\143\150\145", compact("\143\141\143\x68\145\137\143\x6f\x75\156\164", "\x67\x65\x74\x5f\x63\x61\143\x68\x65")); goto x7EZB; JgXCi: $cache_count = json_decode($this->cacheCount()); goto XRq7J; x7EZB: } public function delete_all_cache() { goto jBcZe; jBcZe: $result = json_decode($this->delAllCache(0), true); goto lwXGW; Cr91d: wp_die(); goto juxEx; t1UGC: $total_cache = $result["\x74\x6f\x74\x61\x6c\x5f\x63\141\143\150\x65"] ?? 0; goto lArkS; WuSGx: wp_send_json_success(["\x73\164\141\164\x75\x73" => $status, "\x74\x6f\x74\x61\154\x5f\143\141\143\x68\145" => $total_cache, "\x74\x69\x6d\x65\137\x6c\x69\155\151\164" => $time_limit, "\143\x61\143\150\145\x5f\x64\145\x6c\x65\164\145\144" => $cache_deleted]); goto Cr91d; VspGr: $cache_deleted = $result["\143\141\143\x68\145\x5f\x64\145\154\x65\x74\145\144"] ?? 0; goto WuSGx; lArkS: $time_limit = $result["\x74\151\155\145\x5f\x6c\151\x6d\x69\x74"] ?? 0; goto VspGr; lwXGW: $status = "\x53\165\x63\143\145\163\163\x66\165\x6c\154\171"; goto t1UGC; juxEx: } public function delAllCache($timeCache) { goto JAd3R; f25MS: wXID7: goto fvrCe; uuGoB: foreach ($getDirContents as $key => $value) { goto ZkKQd; D_jAa: FYQez: goto JeY95; kSnhF: $i++; goto SLwHL; ZJ96y: $result["\x73\x74\x61\x74\165\x73"] = 1; goto GFWG2; SLwHL: if (!($timeCache <= time() - filemtime($value))) { goto FYQez; } goto ibKpB; GFWG2: htLB9: goto D_jAa; ZkKQd: if (!(strpos($value, "\56\x74\170\164") !== false)) { goto g3NPj; } goto kSnhF; ibKpB: $j++; goto pf5Km; Wuxpt: Mn2KN: goto iLqhD; JeY95: g3NPj: goto Wuxpt; pf5Km: if (!unlink($value)) { goto htLB9; } goto ZJ96y; iLqhD: } goto f25MS; gPnCb: OK5gM: goto vBBa_; vBBa_: $this->removeEmptySubFolders($this->folderCache); goto VJCpw; zIVjS: $i = $j = 0; goto uuGoB; jFJHc: $result["\x63\141\x63\x68\145\137\143\157\x75\156\x74"] = $i - $j; goto gPnCb; iq2QQ: $result["\x63\x61\x63\150\145\137\144\x65\154\x65\164\x65\x64"] = $j; goto jFJHc; i3pVR: $getDirContents = $this->getDirContents($this->folderCache); goto X4QP_; X4QP_: if (!$getDirContents) { goto OK5gM; } goto zIVjS; VJCpw: return json_encode($result); goto hnttV; fvrCe: $result["\164\157\x74\141\x6c\x5f\143\141\x63\x68\x65"] = $i; goto iq2QQ; JAd3R: $result = array("\163\164\x61\x74\165\x73" => 0, "\x74\x6f\164\141\154\x5f\x63\141\x63\x68\145" => 0, "\164\x69\155\x65\x5f\154\151\155\x69\164" => $timeCache, "\143\x61\x63\150\145\137\144\x65\154\x65\x74\145\x64" => 0, "\x63\141\x63\150\145\137\x63\x6f\165\156\164" => 0); goto i3pVR; hnttV: } public function reset_player_cache() { goto Iu_Cz; Iu_Cz: $server = isset($_POST["\163\145\162\x76\145\162\137\x69\144"]) ? (int) $_POST["\163\x65\x72\166\x65\x72\x5f\x69\144"] : ''; goto jdTkj; Vw8oG: $link = $data[$server - 1]["\150\141\x75\156\x6d\157\166\x69\145\163\x5f\x73\145\162\166\145\162\137\144\x61\164\141"][$episode_slug]["\x68\141\165\x6e\x6d\x6f\x76\151\145\163\x5f\x65\x70\x5f\x6c\151\156\153"]; goto X22dT; iBNQI: $data = json_decode($film_meta, true); goto Vw8oG; E5VBW: $film_meta = get_haunmovies($post_id, HNMG_EPS, true); goto iBNQI; jdTkj: $post_id = isset($_POST["\x70\x6f\x73\x74\137\151\x64"]) ? (int) $_POST["\x70\x6f\x73\164\137\x69\144"] : ''; goto hgYOt; f2T0N: wp_send_json($cacheData); goto x_k_c; X22dT: $cacheData = $this->delCache($link); goto f2T0N; hgYOt: $episode_slug = isset($_POST["\145\x70\151\163\x6f\144\145\137\163\154\165\x67"]) ? str_replace("\55", "\x5f", wp_strip_all_tags($_POST["\x65\x70\151\163\157\x64\x65\137\163\154\x75\x67"])) : ''; goto E5VBW; x_k_c: } public function readCache($name) { goto x_kzS; Fc6SE: $result = file_get_contents($file); goto vZ18v; pzQcl: if (!file_exists($file)) { goto IxLEr; } goto T86Zi; T86Zi: if ($this->timeCache != '') { goto OiXTc; } goto Fc6SE; rv3ZF: if (!($this->timeCache > time() - filemtime($file))) { goto Xni3t; } goto bA_Ok; bA_Ok: $result = file_get_contents($file); goto w0VAh; x_kzS: $name = md5(md5($name)); goto oH5LW; w0VAh: Xni3t: goto INQ1r; A8alG: OiXTc: goto rv3ZF; CeB1B: $file = $this->folderCache . "\57" . $createFolderCache . "\x2f" . $name . "\56\164\x78\164"; goto pzQcl; p5NfT: IxLEr: goto x2xNU; vZ18v: goto qjOhI; goto A8alG; oH5LW: $result = ''; goto vV7cy; x2xNU: return $result; goto ujUlu; INQ1r: qjOhI: goto p5NfT; vV7cy: $createFolderCache = $this->createFolderCache($name); goto CeB1B; ujUlu: } public function getCache() { goto LOjOr; EMQeN: if (!$getDirContents) { goto KnzK2; } goto lT7oL; ODndi: KnzK2: goto gp44T; e7ZjZ: return json_encode($result); goto ODndi; RBlbA: YTpKK: goto e7ZjZ; LOjOr: $result = array(); goto kLi03; kLi03: $getDirContents = $this->getDirContents($this->folderCache); goto GzLM3; lT7oL: foreach ($getDirContents as $key => $value) { goto TI1Op; aGBCt: gpsPM: goto lBxGa; lBxGa: Lntr2: goto n5jZA; TI1Op: if (!strpos($value, "\x2e\164\170\x74")) { goto gpsPM; } goto sbbu2; sbbu2: $result[] = array("\x66\151\x6c\x65" => $value); goto aGBCt; n5jZA: } goto RBlbA; GzLM3: $i = 0; goto EMQeN; gp44T: } public function saveCache($name, $data) { goto dbPMh; fjQsV: mkdir($dir, 0777, true); goto zBjrE; FeSuF: gYq4v: goto fj4Uf; cH1PM: $this->wp_filesystem->put_contents($file, $data, FS_CHMOD_FILE); goto AekPV; dbPMh: $name = md5(md5($name)); goto jokte; AekPV: $index_file = WP_CONTENT_DIR . "\x2f\151\156\144\145\x78\x2e\x70\150\160"; goto pErSd; jokte: $createFolderCache = $this->createFolderCache($name); goto m99mV; mpKUI: chmod($this->folderCache, 0777); goto ySqFh; fj4Uf: if (chmod($this->folderCache, 0777)) { goto XFCgb; } goto mpKUI; uvbD8: mkdir($this->folderCache, 0777, true); goto FeSuF; pErSd: $this->wp_filesystem->put_contents($index_file, "\x3c\x3f\160\150\x70\x20\x2f\57\x20\x53\151\154\x65\x6e\143\x65\40\x69\163\40\147\x6f\154\144\x65\x6e\56", FS_CHMOD_FILE); goto fTn1L; Unp21: $dir = $this->folderCache . "\57" . $createFolderCache; goto zr4T8; zBjrE: hdgbx: goto cH1PM; LYLD2: if (is_dir($dir)) { goto hdgbx; } goto fjQsV; zr4T8: $file = $dir . "\57" . $name . "\x2e\x74\x78\164"; goto LYLD2; m99mV: if (is_dir($this->folderCache)) { goto gYq4v; } goto uvbD8; ySqFh: XFCgb: goto Unp21; fTn1L: } public function delCache($name) { goto qONa_; OZxag: nDClw: goto aCvMu; yfPwq: $createFolderCache = $this->createFolderCache($name); goto U3ux0; ONmaH: goto nDClw; goto PYCIL; aCvMu: return $result; goto ZhT9l; POiy3: $result = array("\x73\164\141\164\165\163" => 0, "\x72\x65\x73\165\154\x74" => "\x44\x65\154\145\x74\x65\40\x65\x72\x72\x6f\162"); goto EZQTB; DfEb4: $name = md5(md5($name)); goto yfPwq; EZQTB: goto dB3b5; goto zt7nY; sHxxW: $result = array("\x73\164\141\164\x75\x73" => 0, "\x72\145\x73\x75\154\x74" => "\x4c\151\156\x6b\x20\x6e\157\164\40\145\170\x69\163\x74\163"); goto ONmaH; PYCIL: ewVaq: goto vBVyx; IGrWN: dB3b5: goto OZxag; Eg6tj: if (file_exists($file)) { goto ewVaq; } goto sHxxW; U3ux0: $file = $this->folderCache . "\57" . $createFolderCache . "\57" . $name . "\56\164\170\164"; goto Eg6tj; qONa_: $result = ''; goto DfEb4; vBVyx: if (unlink($file)) { goto gv1q4; } goto POiy3; zt7nY: gv1q4: goto G5Mlt; G5Mlt: $result = array("\x73\x74\x61\x74\165\163" => 1, "\x72\145\x73\165\154\164" => "\104\x65\x6c\x65\164\x65\144"); goto IGrWN; ZhT9l: } public function cacheCount() { goto un3xx; I8CHA: $i = 1; goto cGsQd; I7oBV: pTRw8: goto ndHjU; w4k6N: $getDirContents = $this->getDirContents($this->folderCache); goto I8CHA; I2Ml2: LEvzD: goto I7oBV; cGsQd: if (!$getDirContents) { goto pTRw8; } goto rg21k; ndHjU: return json_encode($result); goto Q9CK9; rg21k: foreach ($getDirContents as $key => $value) { goto NcTVj; snWCM: $result["\162\x65\163\165\154\164"] = 1; goto OnI8M; NcTVj: if (!strpos($value, "\56\x74\x78\x74")) { goto nAXxP; } goto snWCM; GvWdj: $i++; goto QhuyC; QhuyC: nAXxP: goto mruxw; mruxw: GuRNJ: goto OVtOO; OnI8M: $result["\x74\x6f\x74\141\x6c\x5f\x63\x61\143\150\145"] = $i; goto GvWdj; OVtOO: } goto I2Ml2; un3xx: $result = array(); goto w4k6N; Q9CK9: } private function createFolderCache($name) { goto lcFgb; i2Sb1: return $folder1 . "\x2f" . $folder2; goto LqsHU; lcFgb: $folder1 = substr($name, 0, 2); goto fjU2R; fjU2R: $folder2 = substr($name, 2, 2); goto i2Sb1; LqsHU: } private function getDirContents($dir, &$results = array()) { goto qWTpT; tZ9_s: zMO09: goto lcF_D; lcF_D: return $results; goto rdXfs; uzEjj: foreach ($files as $key => $value) { goto UFBQK; v1p5V: JB9kB: goto jdq_D; kabcN: IGUOU: goto TKKos; jdq_D: goto i4zNB; goto kabcN; XIBSJ: $this->getDirContents($path, $results); goto Bs8mm; EcwoI: i4zNB: goto z8oAc; UFBQK: $path = realpath($dir . DIRECTORY_SEPARATOR . $value); goto y2ouf; VK4FD: if (!($value != "\x2e" && $value != "\56\x2e")) { goto JB9kB; } goto XIBSJ; TKKos: $results[] = $path; goto EcwoI; z8oAc: s8xyI: goto Qt0Im; y2ouf: if (!is_dir($path)) { goto IGUOU; } goto VK4FD; Bs8mm: $results[] = $path; goto v1p5V; Qt0Im: } goto tZ9_s; qWTpT: $files = scandir($dir); goto uzEjj; rdXfs: } private function removeEmptySubFolders($path) { goto s7A1S; KYiw8: n_bqo: goto Wwmhr; Wwmhr: return $empty && @rmdir($path); goto wUYnB; IBmJx: foreach (glob($path . DIRECTORY_SEPARATOR . "\x2a") as $file) { $empty &= is_dir($file) && $this->removeEmptySubFolders($file); QDnFZ: } goto KYiw8; s7A1S: $empty = true; goto IBmJx; wUYnB: } }
