<?php
/*   __________________________________________________
    |  		Code By HauN - HauNYTB.COM  2.0.14    	  |
    |          Telegram: https://t.me/haunytb         |
    |    	   Url : https://haunytb.com    		  |
    |_________________________________________________|
*/
 namespace HNMG\EP_Core; class EP_AutoIMG { public function __construct() { goto qZmjy; qZmjy: if (!$this->is_metabox_options_set()) { goto n5Sgj; } goto Ryg8X; bFtnK: n5Sgj: goto QRW_t; Ryg8X: $this->initialize_hooks(); goto bFtnK; QRW_t: } private function is_metabox_options_set() { return isset($_POST["\137\x68\x61\x75\156\x6d\x65\x74\x61\142\x6f\170"]) || isset($_POST["\137\x76\151\144\145\x6f\x73\x5f\155\x65\164\141\x62\157\170\x5f\157\x70\164\151\x6f\x6e\163"]) || isset($_POST["\137\156\145\167\163\x5f\155\x65\x74\x61\142\157\x78\137\x6f\x70\164\151\x6f\156\163"]); } private function initialize_hooks() { goto zur0a; Yf9eU: ff7cv: goto HzCZc; vufMP: $video_meta = $_POST["\x5f\x76\151\144\x65\x6f\x73\137\155\x65\x74\141\x62\157\170\137\x6f\x70\164\x69\157\x6e\x73"] ?? ''; goto IKFeh; MJSPJ: Wmi1H: goto YApqV; HzCZc: if (!(!empty($meta_options["\x73\x61\x76\x65\x5f\160\157\x73\164\x65\x72\137\151\155\141\147\x65"]) || !empty($meta_options["\163\x65\x74\x5f\x72\x65\x61\x74\x75\x72\145\144\137\151\155\141\x67\x65"]) || !empty($video_meta["\163\x65\x74\137\x61\163\x5f\x66\x65\141\x74\x75\x72\145\144\x5f\151\155\x61\x67\145"]))) { goto Wmi1H; } goto JAbJ3; uGq2M: add_filter("\x63\x6f\x6e\x74\x65\156\x74\137\163\x61\x76\145\x5f\x70\162\x65", [$this, "\x68\x61\165\x6e\137\x70\x6f\x73\x74\137\163\x61\x76\x65\x5f\x69\x6d\x61\147\x65\x73"]); goto Yf9eU; YkKat: $news_meta = $_POST["\137\x6e\x65\x77\x73\x5f\155\x65\164\x61\142\x6f\x78\x5f\x6f\x70\x74\x69\x6f\x6e\x73"] ?? ''; goto vufMP; IKFeh: if (!(!empty($meta_options["\x73\x61\166\145\x5f\x61\x6c\x6c\137\151\x6d\147"]) || !empty($news_meta["\x73\x61\x76\x65\x5f\141\x6c\154\137\x69\x6d\147"]))) { goto ff7cv; } goto uGq2M; JAbJ3: add_action("\163\141\166\x65\137\x70\x6f\x73\164", [$this, "\x48\116\107\x65\156\x65\x72\x61\x74\x65\137\x50\x6f\163\x74\145\x72\137\111\x6d\x61\147\x65"]); goto MJSPJ; zur0a: $meta_options = $_POST["\137\x68\141\165\156\x6d\145\164\x61\x62\x6f\x78"] ?? ''; goto YkKat; YApqV: } public function HNGenerate_Poster_Image($post_id) { goto NJSSH; zFkQF: $this->process_video_thumbnail($post_id, $_POST["\x5f\166\151\144\145\157\x73\x5f\x6d\x65\164\141\142\x6f\x78\x5f\157\160\x74\151\157\x6e\x73"] ?? ''); goto U22TI; ShXAS: goto CwFUs; goto VvUEI; i_yHi: $this->process_post_thumbnail($post_id); goto H4Tu7; NJSSH: global $post; goto n6EGC; m9oGy: DqPEc: goto i_yHi; VvUEI: XzMRo: goto zFkQF; n6EGC: if ($post->post_type === "\166\x69\144\145\x6f") { goto XzMRo; } goto hnA_u; H4Tu7: CwFUs: goto OK_fq; U22TI: goto CwFUs; goto m9oGy; hnA_u: if ($post->post_type === "\160\157\x73\x74") { goto DqPEc; } goto ShXAS; OK_fq: } private function process_video_thumbnail($post_id, $video_meta) { goto f5Jo2; DSq62: if (!($set_feature && !has_post_thumbnail($post_id))) { goto hAApe; } goto LRJnd; a7TKJ: hAApe: goto WtGko; f5Jo2: $image_url = $video_meta["\166\x69\144\145\x6f\137\x74\150\165\155\142\156\141\x69\x6c\137\165\x72\154"] ?? ''; goto akKjl; LRJnd: $this->haun_save_images($image_url, $post_id, $_POST["\160\x6f\163\164\137\x74\151\x74\x6c\145"] ?? '', true); goto a7TKJ; akKjl: $set_feature = $video_meta["\163\x65\x74\137\141\x73\x5f\146\145\141\x74\165\162\145\x64\x5f\x69\155\141\x67\x65"] ?? ''; goto DSq62; WtGko: } private function process_post_thumbnail($post_id) { goto jHMVO; NXNpn: $meta["\x73\x65\164\x5f\x72\145\141\x74\x75\x72\x65\x64\x5f\x69\x6d\141\147\145"] = ''; goto NHUR9; PGaFr: $poster_url = $check_meta["\150\141\165\x6e\x5f\x70\x6f\x73\164\145\x72\137\165\162\154"] ?? $meta["\150\141\x75\x6e\x5f\160\x6f\x73\x74\x65\x72\137\x75\162\x6c"] ?? ''; goto DqYMS; crvsR: $poster_image_url = $poster_url; goto HArc6; MzTLv: $meta["\x68\x61\x75\x6e\137\x70\x6f\163\164\x65\x72\137\165\x72\x6c"] = $poster_image_url; goto M6AsS; sTl6_: L5UVF: goto pGyrO; OTQ2j: $this->haun_save_images($thumb_url, $post_id, $_POST["\160\x6f\163\164\x5f\164\151\164\154\x65"] ?? '', true); goto ZHGd9; zZGD6: $save_poster = $meta["\x73\141\x76\x65\x5f\160\157\x73\x74\x65\x72\x5f\151\x6d\x61\x67\145"] ?? ''; goto gGDQt; RffzM: $thumb_url = $check_meta["\150\x61\x75\x6e\x5f\164\x68\165\155\142\137\x75\162\154"] ?? $meta["\150\141\x75\x6e\137\x74\150\x75\155\x62\x5f\165\x72\x6c"] ?? ''; goto PGaFr; jHMVO: $meta = get_haunmovies($post_id, HNMG_META, true); goto Js4gM; lBv7K: if ($save_poster && $poster_url) { goto k04cw; } goto crvsR; HArc6: goto L5UVF; goto UZc8j; pGyrO: $meta["\x68\141\165\x6e\x5f\x74\x68\x75\x6d\x62\x5f\x75\x72\x6c"] = get_the_post_thumbnail_url($post_id, "\155\157\x76\151\x65\x2d\x74\x68\165\155\x62") ?: $thumb_url; goto MzTLv; gGDQt: if (!($set_feature && $thumb_url && !has_post_thumbnail($post_id))) { goto Nh3nZ; } goto OTQ2j; zeNWj: $poster_image_url = $this->haun_save_images($poster_url, $post_id, $_POST["\x70\157\x73\164\137\164\x69\x74\154\145"] ?? ''); goto sTl6_; DqYMS: $set_feature = $meta["\x73\x65\164\137\162\145\x61\164\165\x72\145\x64\x5f\151\155\141\x67\x65"] ?? ''; goto zZGD6; ZHGd9: Nh3nZ: goto lBv7K; UZc8j: k04cw: goto zeNWj; Js4gM: $check_meta = $_POST["\x5f\150\141\165\156\x6d\x65\164\x61\142\x6f\170"] ?? ''; goto RffzM; M6AsS: $meta["\163\141\x76\145\x5f\x70\x6f\x73\x74\x65\162\x5f\x69\155\x61\x67\x65"] = ''; goto NXNpn; NHUR9: update_haunmovies($post_id, HNMG_META, $meta); goto UcKVx; UcKVx: } public function haun_post_save_images($content) { goto kTh0p; SYGl6: foreach ($matches[1] as $image_url) { goto XW0ij; Rh_r2: $res = $this->haun_save_images($image_url, $post_id, $post_title); goto Kx_UB; Kx_UB: $content = str_replace($image_url, $res["\x75\x72\x6c"], $content); goto ZJ2r1; uHmNY: xMknU: goto sOuCY; ZJ2r1: HFtf4: goto uHmNY; XW0ij: if (!($image_url && strpos($image_url, $_SERVER["\110\x54\124\x50\137\110\x4f\123\124"]) === false)) { goto HFtf4; } goto Rh_r2; sOuCY: } goto mmkc0; sc15x: set_time_limit(500); goto gOdVl; IB3Mg: preg_match_all("\57\74\151\155\x67\56\52\x3f\163\x72\143\x3d\42\x28\x2e\x2a\77\x29\42\57", stripslashes($content), $matches); goto SYGl6; SlrdJ: return $content; goto n5wLT; W3PN8: FzURg: goto dVRcr; kTh0p: if (!(isset($_POST["\x73\x61\166\145"]) || isset($_POST["\x70\x75\142\x6c\151\x73\150"]))) { goto FzURg; } goto sc15x; dVRcr: remove_filter("\x63\x6f\x6e\164\145\156\164\137\x73\141\x76\x65\137\x70\162\145", [$this, "\x68\141\165\x6e\137\x70\157\163\x74\137\163\141\166\145\137\151\155\141\x67\x65\163"]); goto SlrdJ; mmkc0: qHk_C: goto W3PN8; gOdVl: $post_id = get_the_ID(); goto kHNSM; kHNSM: $post_title = $_POST["\160\x6f\x73\164\x5f\x74\x69\164\154\145"] ?? ''; goto IB3Mg; n5wLT: } public function haun_save_images($image_url, $post_id, $post_title, $set_thumb = false) { goto fq4zH; fq4zH: $file = file_get_contents($image_url); goto S97Yk; JxJo5: return $res; goto M8PiS; XP0iU: $this->haun_insert_attachment($res["\146\151\x6c\x65"], $post_id, $set_thumb); goto BwEOg; sv535: $res = wp_upload_bits($im_name, '', $file); goto bdqIB; bdqIB: if ($res["\x65\x72\162\157\x72"]) { goto BNRLW; } goto XP0iU; BwEOg: BNRLW: goto JxJo5; S97Yk: $im_name = sanitize_title($post_title) . "\55{$post_id}\56\152\160\147"; goto sv535; M8PiS: } public function haun_insert_attachment($file, $post_id, $set_thumb) { goto oJH_X; xsS1c: $attach_id = wp_insert_attachment($attachment, $file, $post_id); goto qfEpM; HEA2I: if (!$set_thumb) { goto Yt4zY; } goto dkhxY; BfZAi: $attachment = ["\147\x75\x69\144" => wp_get_upload_dir()["\x75\162\x6c"] . "\x2f" . _wp_relative_upload_path($file), "\x70\x6f\163\x74\x5f\155\151\155\x65\137\164\171\x70\145" => $filetype["\164\x79\x70\145"], "\160\157\x73\164\137\x74\x69\x74\x6c\x65" => preg_replace("\x2f\134\x2e\133\136\x2e\x5d\x2b\x24\57", '', basename($file)), "\160\x6f\163\x74\137\x63\157\156\164\x65\156\164" => '', "\x70\157\x73\x74\137\x73\164\x61\164\165\163" => "\151\156\x68\145\x72\151\164"]; goto xsS1c; oJH_X: $filetype = wp_check_filetype($file); goto BfZAi; TN0_m: Yt4zY: goto NGlj7; dkhxY: set_post_thumbnail($post_id, $attach_id); goto TN0_m; NGlj7: return $attach_id; goto FRqdK; qfEpM: wp_update_attachment_metadata($attach_id, wp_generate_attachment_metadata($attach_id, $file)); goto HEA2I; FRqdK: } }
