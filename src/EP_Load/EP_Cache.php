<?php
/*   __________________________________________________
    |  		Code By HauN - HauNYTB.COM  2.0.14    	  |
    |          Telegram: https://t.me/haunytb         |
    |    	   Url : https://haunytb.com    		  |
    |_________________________________________________|
*/
 namespace HNMG\EP_Load; class EP_Cache { public $timeCache; public $folderCache; public function __construct() { goto bkJBp; xmB03: wp_mkdir_p($this->folderCache); goto Y_Lhd; Y_Lhd: Pfr10: goto tvgPJ; ju8St: if (!function_exists("\127\120\x5f\x46\x69\154\145\163\171\x73\x74\145\155")) { require_once ABSPATH . "\167\x70\x2d\141\144\x6d\151\156\57\x69\156\x63\154\x75\144\x65\x73\x2f\x66\151\x6c\x65\56\160\x68\x70"; } goto EG89o; bkJBp: $this->folderCache = HNMG_CACHE; goto nHXrZ; EG89o: global $wp_filesystem; goto K0D6y; K0D6y: WP_Filesystem(); goto nPeY1; tvgPJ: $this->timeCache = 3600; goto ju8St; nPeY1: $this->wp_filesystem = $wp_filesystem; goto lZTOG; nHXrZ: if (is_dir($this->folderCache)) { goto Pfr10; } goto xmB03; lZTOG: } public function register() { goto DNfJ1; fD6Td: add_filter("\110\x4e\115\x47\x2d\160\x61\147\x65\x73", [$this, "\150\156\141\160\x69\163\157\x64\x65\137\143\141\143\150\x65\137\155\145\x6e\165"]); goto fZFzS; fYNFO: add_action("\167\x70\137\x61\x6a\x61\x78\137\x6e\x6f\160\162\151\x76\x5f\144\145\154\145\x74\x65\x5f\x61\154\x6c\x5f\143\x61\143\x68\145", [$this, "\x64\x65\154\145\164\145\137\141\154\154\137\143\x61\143\x68\x65"]); goto P8xDf; n5gkK: add_action("\167\x70\137\141\x6a\141\x78\137\x72\x65\163\x65\164\x5f\160\154\x61\171\x65\162\137\143\141\x63\x68\x65", [$this, "\x72\145\x73\145\164\x5f\160\154\141\x79\x65\162\137\143\x61\x63\x68\145"]); goto bYLWH; DNfJ1: if (!(HNCORE()->get_product_status() == "\143\x6f\x6e\x6e\x65\143\164\145\144")) { goto vKrXT; } goto n5gkK; fZFzS: add_action("\x77\160\x5f\x61\152\141\x78\x5f\144\x65\x6c\145\x74\145\137\x61\x6c\154\x5f\143\141\143\x68\x65", [$this, "\x64\x65\154\145\164\x65\137\141\x6c\154\137\x63\141\x63\150\145"]); goto fYNFO; P8xDf: vKrXT: goto OqJ0T; Dzc0W: add_filter("\x48\x4e\x4d\107\x2d\164\141\142\x73", [$this, "\x68\x6e\141\x70\151\x73\x6f\144\145\x5f\x63\x61\x63\150\145\x5f\x6d\x65\x6e\165"]); goto fD6Td; bYLWH: add_action("\x77\x70\x5f\x61\152\x61\x78\x5f\x6e\157\x70\x72\151\x76\137\x72\145\x73\x65\164\137\160\154\141\x79\145\162\x5f\143\x61\x63\x68\145", [$this, "\x72\x65\163\145\x74\x5f\160\154\141\171\x65\162\137\143\141\143\x68\x65"]); goto Dzc0W; OqJ0T: } public function hnapisode_cache_menu($nav) { $nav["\61\62\60"] = array("\x73\154\x75\147" => "\150\x6e\155\147\55\x63\x61\143\150\145\55\x6d\141\156\141\147\145\x72", "\x63\x61\154\x6c\x62\x61\143\x6b" => array($this, "\150\x6e\155\147\x5f\x63\x61\143\x68\145\137\155\141\156\x61\147\x65\137\160\141\147\145"), "\x74\x69\x74\154\145" => __("\x48\116\x4d\x47\x20\103\141\x63\150\x65", "\x68\156\155\x67\x65\160\x69\x73"), "\x69\143\157\x6e" => "\x66\x61\55\160\x6c\141\171\x2d\143\x69\x72\x63\x6c\145"); return $nav; } public function hnmg_cache_manage_page() { goto cnSgh; HLkXT: $get_cache = json_decode($this->getCache()); goto vDhzs; cnSgh: $cache_count = json_decode($this->cacheCount()); goto HLkXT; vDhzs: echo view("\110\116\x4d\x47\72\72\x6c\141\171\x6f\x75\164\x73\x2e\x63\141\143\x68\x65", compact("\x63\x61\143\x68\145\x5f\143\157\165\156\164", "\147\x65\x74\x5f\x63\x61\x63\150\145")); goto GRhUo; GRhUo: } public function delete_all_cache() { goto WO9WY; lNxeR: $cache_deleted = $result["\143\x61\x63\150\145\x5f\x64\x65\x6c\x65\x74\145\x64"] ?? 0; goto c0pco; pYUz5: $time_limit = $result["\x74\151\x6d\x65\137\x6c\x69\155\x69\x74"] ?? 0; goto lNxeR; WO9WY: $result = json_decode($this->delAllCache(0), true); goto KrQl3; c0pco: wp_send_json_success(["\163\164\141\164\165\163" => $status, "\x74\157\164\x61\x6c\x5f\143\141\x63\150\145" => $total_cache, "\164\151\155\145\137\x6c\151\155\151\164" => $time_limit, "\143\141\x63\150\x65\x5f\x64\145\154\145\x74\x65\144" => $cache_deleted]); goto K9f1q; KrQl3: $status = "\x53\165\x63\x63\x65\x73\x73\146\x75\154\x6c\x79"; goto Kt_eS; K9f1q: wp_die(); goto LoSA_; Kt_eS: $total_cache = $result["\x74\x6f\164\x61\x6c\x5f\x63\x61\143\x68\145"] ?? 0; goto pYUz5; LoSA_: } public function delAllCache($timeCache) { goto KYjmr; iq9LK: $result["\143\141\143\x68\x65\x5f\143\157\165\x6e\x74"] = $i - $j; goto QbmtT; GSVlg: ipaMq: goto sblY6; LTpGw: $i = $j = 0; goto pAVxc; QbmtT: vzUBH: goto QfKzn; KYjmr: $result = array("\163\164\141\164\165\x73" => 0, "\x74\157\164\x61\x6c\137\x63\x61\143\150\x65" => 0, "\164\x69\x6d\x65\137\154\151\x6d\151\164" => $timeCache, "\x63\141\143\150\x65\x5f\x64\x65\x6c\x65\x74\x65\144" => 0, "\143\x61\x63\x68\x65\x5f\143\157\165\156\164" => 0); goto uyDYv; QfKzn: $this->removeEmptySubFolders($this->folderCache); goto L34XL; uyDYv: $getDirContents = $this->getDirContents($this->folderCache); goto K_s3g; K_s3g: if (!$getDirContents) { goto vzUBH; } goto LTpGw; L34XL: return json_encode($result); goto Je19Z; RNx1f: $result["\143\x61\143\x68\x65\137\144\x65\154\x65\x74\145\x64"] = $j; goto iq9LK; sblY6: $result["\164\x6f\x74\141\x6c\x5f\x63\x61\x63\x68\145"] = $i; goto RNx1f; pAVxc: foreach ($getDirContents as $key => $value) { goto B72be; fbIEl: ZN25S: goto QD_HT; B72be: if (!(strpos($value, "\56\x74\x78\164") !== false)) { goto ZN25S; } goto ZZwSt; ZZwSt: $i++; goto HBiO1; cAq1B: if (!unlink($value)) { goto k3GoC; } goto vbyL5; neMMz: $j++; goto cAq1B; SsV7U: XaGEM: goto fbIEl; HBiO1: if (!($timeCache <= time() - filemtime($value))) { goto XaGEM; } goto neMMz; QD_HT: mPuPz: goto qzEzk; vbyL5: $result["\x73\164\x61\164\x75\x73"] = 1; goto KBDbe; KBDbe: k3GoC: goto SsV7U; qzEzk: } goto GSVlg; Je19Z: } public function reset_player_cache() { goto jsJCc; yNI3G: wp_send_json($cacheData); goto je0FY; QeMtz: $data = json_decode($film_meta, true); goto rEcZp; RALq_: $cacheData = $this->delCache($link); goto yNI3G; rEcZp: $link = $data[$server - 1]["\150\x61\165\156\x6d\157\x76\x69\x65\163\x5f\x73\x65\162\x76\145\x72\137\144\x61\x74\141"][$episode_slug]["\150\141\x75\x6e\x6d\x6f\x76\x69\x65\163\x5f\x65\x70\x5f\x6c\x69\156\x6b"]; goto RALq_; VJgXT: $film_meta = get_post_meta($post_id, HNMG_EPS, true); goto QeMtz; zExaR: $episode_slug = isset($_POST["\x65\x70\151\x73\157\x64\145\137\x73\154\x75\x67"]) ? str_replace("\x2d", "\x5f", wp_strip_all_tags($_POST["\145\x70\151\x73\x6f\144\145\x5f\x73\x6c\x75\147"])) : ''; goto VJgXT; nttAF: $post_id = isset($_POST["\x70\x6f\x73\164\x5f\151\144"]) ? (int) $_POST["\x70\x6f\x73\164\137\151\x64"] : ''; goto zExaR; jsJCc: $server = isset($_POST["\163\x65\x72\x76\x65\162\x5f\x69\x64"]) ? (int) $_POST["\x73\x65\x72\166\145\x72\137\x69\x64"] : ''; goto nttAF; je0FY: } public function readCache($name) { goto CVePp; otEKL: if ($this->timeCache != '') { goto mPYvr; } goto Y163a; DF0YU: xqXeb: goto UR502; Y163a: $result = file_get_contents($file); goto mTpvv; UR502: xOMT3: goto K920G; OlG1m: $file = $this->folderCache . "\57" . $createFolderCache . "\57" . $name . "\x2e\164\170\164"; goto Imcc1; HLLTl: if (!($this->timeCache > time() - filemtime($file))) { goto hU28Z; } goto y1fmH; y1fmH: $result = file_get_contents($file); goto RHxLA; gOeLd: $result = ''; goto jzLyn; RHxLA: hU28Z: goto DF0YU; K920G: return $result; goto QdR8t; CVePp: $name = md5(md5($name)); goto gOeLd; Bteg1: mPYvr: goto HLLTl; mTpvv: goto xqXeb; goto Bteg1; Imcc1: if (!file_exists($file)) { goto xOMT3; } goto otEKL; jzLyn: $createFolderCache = $this->createFolderCache($name); goto OlG1m; QdR8t: } public function getCache() { goto hgzVa; zXTpu: if (!$getDirContents) { goto t3rVv; } goto gbL88; w16du: t3rVv: goto w2vxQ; hgzVa: $result = array(); goto CON61; HFFVd: dUnzn: goto NBArI; CON61: $getDirContents = $this->getDirContents($this->folderCache); goto rc5XJ; gbL88: foreach ($getDirContents as $key => $value) { goto RkaIt; RkaIt: if (!strpos($value, "\x2e\164\x78\x74")) { goto gd6Fz; } goto objmB; objmB: $result[] = array("\146\x69\x6c\145" => $value); goto uDni8; rLwtr: limkZ: goto NnZX9; uDni8: gd6Fz: goto rLwtr; NnZX9: } goto HFFVd; rc5XJ: $i = 0; goto zXTpu; NBArI: return json_encode($result); goto w16du; w2vxQ: } public function saveCache($name, $data) { goto b2g1W; QBwwl: mkdir($this->folderCache, 0777, true); goto o291r; b2g1W: $name = md5(md5($name)); goto as6Rb; zfxCE: mkdir($dir, 0777, true); goto q22Df; pgYAV: $this->wp_filesystem->put_contents($index_file, "\x3c\x3f\160\150\x70\x20\57\57\40\123\151\x6c\x65\156\x63\145\x20\x69\x73\x20\147\x6f\154\144\x65\156\56", FS_CHMOD_FILE); goto oqVxo; bHsUi: $dir = $this->folderCache . "\57" . $createFolderCache; goto jC2a1; kfWNK: if (is_dir($dir)) { goto kEL6d; } goto zfxCE; gPk25: if (is_dir($this->folderCache)) { goto kCP9d; } goto QBwwl; as6Rb: $createFolderCache = $this->createFolderCache($name); goto gPk25; Upkb5: if (chmod($this->folderCache, 0777)) { goto e0LKf; } goto IreJn; q22Df: kEL6d: goto hxRZ1; IreJn: chmod($this->folderCache, 0777); goto s2cm0; n0zAm: $index_file = WP_CONTENT_DIR . "\x2f\x69\156\144\145\170\56\160\x68\x70"; goto pgYAV; s2cm0: e0LKf: goto bHsUi; hxRZ1: $this->wp_filesystem->put_contents($file, $data, FS_CHMOD_FILE); goto n0zAm; o291r: kCP9d: goto Upkb5; jC2a1: $file = $dir . "\57" . $name . "\56\164\x78\164"; goto kfWNK; oqVxo: } public function delCache($name) { goto SiE1a; p4MvF: $result = array("\x73\164\141\164\x75\x73" => 1, "\162\x65\163\165\x6c\x74" => "\x44\145\x6c\145\164\x65\x64"); goto Rzpy0; SiE1a: $result = ''; goto ibJgP; ibJgP: $name = md5(md5($name)); goto ukhmS; bJb9H: goto yK4Oo; goto wpofi; HxYsn: $result = array("\x73\x74\x61\x74\165\163" => 0, "\x72\x65\x73\165\x6c\164" => "\x44\x65\154\x65\164\x65\40\x65\x72\162\x6f\x72"); goto ELsQX; wpofi: uPaw5: goto x0eus; Gz0xM: if (file_exists($file)) { goto uPaw5; } goto iuexQ; UUfBn: $file = $this->folderCache . "\57" . $createFolderCache . "\x2f" . $name . "\56\x74\x78\x74"; goto Gz0xM; butmn: xutar: goto p4MvF; ttXBi: yK4Oo: goto Dt7wr; Rzpy0: EHYZ2: goto ttXBi; x0eus: if (unlink($file)) { goto xutar; } goto HxYsn; ukhmS: $createFolderCache = $this->createFolderCache($name); goto UUfBn; Dt7wr: return $result; goto Kg4Sv; ELsQX: goto EHYZ2; goto butmn; iuexQ: $result = array("\x73\x74\141\164\165\163" => 0, "\x72\x65\x73\165\x6c\x74" => "\x4c\x69\x6e\153\40\x6e\157\x74\x20\145\170\x69\163\164\x73"); goto bJb9H; Kg4Sv: } public function cacheCount() { goto q4kBT; tI485: Z903L: goto gcGn_; EmsNh: $getDirContents = $this->getDirContents($this->folderCache); goto h124_; hzYHu: foreach ($getDirContents as $key => $value) { goto aWPX9; Nt_B6: $result["\x72\x65\x73\x75\x6c\x74"] = 1; goto gAZXv; gAZXv: $result["\x74\x6f\164\x61\154\137\x63\x61\143\x68\145"] = $i; goto pECGu; pECGu: $i++; goto rxbS1; aWPX9: if (!strpos($value, "\x2e\x74\170\164")) { goto n7ubf; } goto Nt_B6; rxbS1: n7ubf: goto ECfqd; ECfqd: EfZGq: goto lmx8L; lmx8L: } goto JIHtV; JIHtV: sJrpq: goto tI485; Nol8p: if (!$getDirContents) { goto Z903L; } goto hzYHu; gcGn_: return json_encode($result); goto MDU5q; h124_: $i = 1; goto Nol8p; q4kBT: $result = array(); goto EmsNh; MDU5q: } private function createFolderCache($name) { goto GYUPt; GYUPt: $folder1 = substr($name, 0, 2); goto qxPiK; y0qgW: return $folder1 . "\x2f" . $folder2; goto YOG0u; qxPiK: $folder2 = substr($name, 2, 2); goto y0qgW; YOG0u: } private function getDirContents($dir, &$results = array()) { goto pyYoo; Nx22i: RES3C: goto qZBYQ; pyYoo: $files = scandir($dir); goto oTG_v; qZBYQ: return $results; goto R57ty; oTG_v: foreach ($files as $key => $value) { goto Uf2nR; zRXdo: UPzUs: goto VJxP7; fmWbc: $results[] = $path; goto mZ40I; Zv00T: if (!($value != "\x2e" && $value != "\x2e\x2e")) { goto UPzUs; } goto KNarW; vzlpi: if (!is_dir($path)) { goto EixVR; } goto Zv00T; Xg733: rzTRT: goto FCfxE; Sx5K0: $results[] = $path; goto zRXdo; mZ40I: Be2Mk: goto Xg733; VJxP7: goto Be2Mk; goto ul9a1; KNarW: $this->getDirContents($path, $results); goto Sx5K0; Uf2nR: $path = realpath($dir . DIRECTORY_SEPARATOR . $value); goto vzlpi; ul9a1: EixVR: goto fmWbc; FCfxE: } goto Nx22i; R57ty: } private function removeEmptySubFolders($path) { goto T01Zv; JT8vQ: MhX_1: goto YK7oO; T01Zv: $empty = true; goto B4gAx; YK7oO: return $empty && @rmdir($path); goto j3v27; B4gAx: foreach (glob($path . DIRECTORY_SEPARATOR . "\52") as $file) { $empty &= is_dir($file) && $this->removeEmptySubFolders($file); n3_Yr: } goto JT8vQ; j3v27: } }
