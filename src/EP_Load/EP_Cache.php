<?php
/*   __________________________________________________
    |  		Code By HauN - HauNYTB.COM  2.0.14    	  |
    |          Telegram: https://t.me/haunytb         |
    |    	   Url : https://haunytb.com    		  |
    |_________________________________________________|
*/
 namespace HNMG\EP_Load; class EP_Cache { public $timeCache; public $folderCache; public function __construct() { goto WeQt3; WeQt3: $this->folderCache = HNMG_CACHE; goto damwP; damwP: if (is_dir($this->folderCache)) { goto ao43A; } goto A4roa; A4roa: wp_mkdir_p($this->folderCache); goto OIjEo; OIjEo: ao43A: goto krghl; DiWE_: global $wp_filesystem; goto GY_S9; BXw6c: $this->wp_filesystem = $wp_filesystem; goto s_cDw; mIt7j: if (!function_exists("\x57\120\137\106\x69\x6c\145\x73\x79\163\x74\x65\155")) { require_once ABSPATH . "\167\x70\x2d\x61\144\155\x69\156\57\151\156\x63\154\x75\144\x65\x73\57\x66\x69\154\x65\56\x70\x68\x70"; } goto DiWE_; GY_S9: WP_Filesystem(); goto BXw6c; krghl: $this->timeCache = 3600; goto mIt7j; s_cDw: } public function register() { goto F6QIK; KzboH: add_action("\x77\160\137\x61\152\x61\170\x5f\x64\x65\x6c\145\x74\145\137\141\x6c\x6c\137\143\141\143\150\x65", [$this, "\x64\x65\x6c\x65\164\x65\x5f\141\x6c\x6c\137\x63\141\x63\150\145"]); goto syjIF; sZXA4: add_filter("\x48\x4e\x4d\x47\55\x70\x61\x67\x65\x73", [$this, "\150\x6e\x61\160\151\163\x6f\144\x65\137\x63\x61\x63\x68\145\x5f\155\x65\156\x75"]); goto KzboH; syjIF: add_action("\x77\x70\137\141\152\x61\x78\137\x6e\157\160\162\x69\166\137\x64\x65\x6c\145\164\145\137\x61\154\x6c\137\143\141\x63\150\x65", [$this, "\x64\x65\154\x65\164\145\137\141\x6c\154\x5f\143\141\x63\x68\145"]); goto Y9Gcy; xY0yM: add_filter("\x48\x4e\x4d\x47\55\164\141\142\163", [$this, "\x68\x6e\141\x70\x69\163\x6f\144\x65\x5f\x63\141\x63\150\x65\137\x6d\x65\156\165"]); goto sZXA4; Oh1im: add_action("\167\x70\137\141\152\x61\170\137\156\x6f\160\162\151\x76\x5f\x72\x65\163\x65\x74\137\160\154\141\171\145\x72\x5f\143\x61\143\x68\145", [$this, "\162\x65\x73\145\164\x5f\160\154\141\171\145\x72\137\143\x61\x63\x68\x65"]); goto xY0yM; SCv1W: add_action("\167\x70\x5f\141\152\x61\x78\137\162\x65\x73\x65\x74\137\x70\154\141\x79\x65\x72\137\143\141\143\150\x65", [$this, "\162\145\163\x65\164\x5f\160\154\x61\171\145\x72\x5f\143\x61\143\150\x65"]); goto Oh1im; Y9Gcy: cD3Qv: goto neJcQ; F6QIK: if (!(HNCORE()->get_product_status() == "\143\x6f\156\x6e\x65\143\164\145\144")) { goto cD3Qv; } goto SCv1W; neJcQ: } public function hnapisode_cache_menu($nav) { $nav["\x31\62\x30"] = array("\x73\154\165\147" => "\x68\156\x6d\147\55\143\141\143\x68\145\x2d\x6d\x61\156\141\147\145\x72", "\143\x61\154\x6c\x62\141\x63\153" => array($this, "\150\156\155\x67\137\143\141\143\150\x65\x5f\x6d\141\156\141\x67\x65\x5f\x70\x61\147\145"), "\x74\151\x74\154\x65" => __("\110\116\x4d\x47\40\x43\141\143\150\x65", "\x68\x6e\155\147\145\x70\x69\163"), "\151\143\157\156" => "\x66\141\55\x70\x6c\x61\171\55\143\151\162\x63\154\145"); return $nav; } public function hnmg_cache_manage_page() { goto DjAn_; DjAn_: $cache_count = json_decode($this->cacheCount()); goto hW_pE; hW_pE: $get_cache = json_decode($this->getCache()); goto KZc_R; KZc_R: echo view("\x48\x4e\115\107\72\72\x6c\x61\171\x6f\165\x74\163\x2e\x63\x61\x63\150\x65", compact("\x63\141\143\150\145\x5f\143\157\165\156\x74", "\147\x65\x74\137\x63\141\143\150\145")); goto c47J5; c47J5: } public function delete_all_cache() { goto NnVX7; YeZp5: $time_limit = $result["\x74\151\155\x65\x5f\x6c\x69\155\151\x74"] ?? 0; goto kb7Mn; OnalT: $status = "\123\x75\x63\143\145\163\x73\146\x75\x6c\154\x79"; goto Rg6ya; sdWcy: wp_die(); goto RDMFD; JjUpK: wp_send_json_success(["\x73\164\141\164\x75\x73" => $status, "\164\x6f\x74\141\154\137\143\141\143\150\x65" => $total_cache, "\x74\151\155\x65\x5f\154\x69\155\151\x74" => $time_limit, "\143\141\143\x68\x65\x5f\x64\x65\x6c\145\164\x65\x64" => $cache_deleted]); goto sdWcy; kb7Mn: $cache_deleted = $result["\143\141\x63\x68\145\137\144\x65\154\x65\164\x65\144"] ?? 0; goto JjUpK; NnVX7: $result = json_decode($this->delAllCache(0), true); goto OnalT; Rg6ya: $total_cache = $result["\x74\x6f\164\141\154\137\143\x61\143\x68\x65"] ?? 0; goto YeZp5; RDMFD: } public function delAllCache($timeCache) { goto t4fdP; mQnK8: return json_encode($result); goto Ho6eG; M2MX3: foreach ($getDirContents as $key => $value) { goto uYZZj; CbtHA: g2dNn: goto yMkc7; OVFla: if (!unlink($value)) { goto o0i1j; } goto t7DWN; nYnxX: $j++; goto OVFla; WSYFv: aerAJ: goto pQVP3; yMkc7: batBd: goto WSYFv; t7DWN: $result["\163\x74\141\x74\x75\163"] = 1; goto WOxoi; rgMmz: $i++; goto WWT2v; uYZZj: if (!(strpos($value, "\x2e\x74\170\164") !== false)) { goto batBd; } goto rgMmz; WOxoi: o0i1j: goto CbtHA; WWT2v: if (!($timeCache <= time() - filemtime($value))) { goto g2dNn; } goto nYnxX; pQVP3: } goto o9dlJ; o9dlJ: IQqtQ: goto MvrE1; Yxcd3: $i = $j = 0; goto M2MX3; fTH78: $this->removeEmptySubFolders($this->folderCache); goto mQnK8; SkcFB: $result["\143\141\x63\x68\x65\137\x64\145\x6c\145\164\x65\144"] = $j; goto QNLNs; JDjRv: $getDirContents = $this->getDirContents($this->folderCache); goto l4b6N; MvrE1: $result["\164\x6f\164\x61\x6c\x5f\143\x61\143\150\x65"] = $i; goto SkcFB; R024l: Fe6LL: goto fTH78; t4fdP: $result = array("\163\164\141\164\165\x73" => 0, "\164\x6f\x74\x61\154\x5f\143\x61\143\150\145" => 0, "\x74\x69\x6d\x65\x5f\154\151\155\x69\164" => $timeCache, "\x63\x61\x63\150\x65\x5f\x64\x65\154\145\164\145\144" => 0, "\x63\141\143\150\x65\x5f\143\157\165\156\x74" => 0); goto JDjRv; QNLNs: $result["\143\141\143\150\145\x5f\143\157\x75\x6e\164"] = $i - $j; goto R024l; l4b6N: if (!$getDirContents) { goto Fe6LL; } goto Yxcd3; Ho6eG: } public function reset_player_cache() { goto s5TPy; s5TPy: $server = isset($_POST["\163\145\x72\166\x65\x72\x5f\151\x64"]) ? (int) $_POST["\163\145\x72\x76\145\x72\x5f\151\x64"] : ''; goto HeSOb; QV2yC: $episode_slug = isset($_POST["\x65\160\x69\x73\x6f\x64\145\x5f\163\x6c\x75\x67"]) ? str_replace("\55", "\137", wp_strip_all_tags($_POST["\x65\x70\151\x73\x6f\x64\145\x5f\163\x6c\165\147"])) : ''; goto a4rFu; a4rFu: $film_meta = get_post_meta($post_id, HNMG_EPS, true); goto HklUt; UGeHI: $cacheData = $this->delCache($link); goto b_2TK; urOTH: $link = $data[$server - 1]["\150\141\x75\156\x6d\x6f\166\151\145\163\137\x73\145\162\166\145\x72\137\144\141\164\x61"][$episode_slug]["\x68\x61\x75\x6e\x6d\x6f\x76\151\x65\x73\x5f\x65\x70\137\154\x69\156\x6b"]; goto UGeHI; b_2TK: wp_send_json($cacheData); goto SRE6P; HeSOb: $post_id = isset($_POST["\160\x6f\x73\164\x5f\x69\x64"]) ? (int) $_POST["\x70\x6f\x73\x74\x5f\151\x64"] : ''; goto QV2yC; HklUt: $data = json_decode($film_meta, true); goto urOTH; SRE6P: } public function readCache($name) { goto fyQmY; FqpyN: $result = file_get_contents($file); goto EJcoT; pKtfI: if (!($this->timeCache > time() - filemtime($file))) { goto ONEzu; } goto FqpyN; qlUA0: $file = $this->folderCache . "\57" . $createFolderCache . "\x2f" . $name . "\56\x74\x78\x74"; goto Bgxx2; ttXlw: $result = ''; goto n1RdI; rxjx8: return $result; goto FEBMe; n1RdI: $createFolderCache = $this->createFolderCache($name); goto qlUA0; qjouq: goto NTatp; goto sib9T; EJcoT: ONEzu: goto FvFmq; Bgxx2: if (!file_exists($file)) { goto X3gls; } goto WL6ZH; WL6ZH: if ($this->timeCache != '') { goto o50_U; } goto P7Ww6; sib9T: o50_U: goto pKtfI; fyQmY: $name = md5(md5($name)); goto ttXlw; P7Ww6: $result = file_get_contents($file); goto qjouq; FvFmq: NTatp: goto H3r4K; H3r4K: X3gls: goto rxjx8; FEBMe: } public function getCache() { goto dz33h; VYDOv: $i = 0; goto x6g57; dz33h: $result = array(); goto KCXpM; rzvbG: I6xH_: goto Z7VKq; Z7VKq: return json_encode($result); goto xc6b9; xc6b9: RkVPd: goto wWagH; x6g57: if (!$getDirContents) { goto RkVPd; } goto ewfiz; ewfiz: foreach ($getDirContents as $key => $value) { goto SiZJ5; kX5Sj: wBfE6: goto foLQL; PjJmE: $result[] = array("\146\x69\x6c\x65" => $value); goto UgTo3; UgTo3: XEdBc: goto kX5Sj; SiZJ5: if (!strpos($value, "\56\x74\170\164")) { goto XEdBc; } goto PjJmE; foLQL: } goto rzvbG; KCXpM: $getDirContents = $this->getDirContents($this->folderCache); goto VYDOv; wWagH: } public function saveCache($name, $data) { goto CzYRD; fzOvA: $this->wp_filesystem->put_contents($file, $data, FS_CHMOD_FILE); goto xNqTC; moKW9: if (is_dir($dir)) { goto p5cFf; } goto GI3Lo; xNqTC: $index_file = WP_CONTENT_DIR . "\57\151\x6e\x64\x65\170\x2e\x70\150\x70"; goto t6BH6; SOoeo: chmod($this->folderCache, 0777); goto wsBrz; CzYRD: $name = md5(md5($name)); goto CmJ8c; EU1Cg: bNUG0: goto SY8v7; t6BH6: $this->wp_filesystem->put_contents($index_file, "\74\x3f\160\150\x70\x20\57\57\40\123\x69\x6c\x65\x6e\143\145\40\x69\163\x20\x67\x6f\x6c\144\x65\x6e\56", FS_CHMOD_FILE); goto XyjQw; b0_rF: $file = $dir . "\57" . $name . "\56\164\x78\164"; goto moKW9; fPUGx: if (is_dir($this->folderCache)) { goto bNUG0; } goto tiNtg; CDFjW: $dir = $this->folderCache . "\x2f" . $createFolderCache; goto b0_rF; tiNtg: mkdir($this->folderCache, 0777, true); goto EU1Cg; wsBrz: t3dLY: goto CDFjW; CmJ8c: $createFolderCache = $this->createFolderCache($name); goto fPUGx; GI3Lo: mkdir($dir, 0777, true); goto cJp3d; SY8v7: if (chmod($this->folderCache, 0777)) { goto t3dLY; } goto SOoeo; cJp3d: p5cFf: goto fzOvA; XyjQw: } public function delCache($name) { goto UpH9S; Zl2Dp: lKwCf: goto FO33Z; iZxjK: $result = array("\x73\164\141\x74\165\x73" => 0, "\162\x65\x73\165\154\x74" => "\104\x65\154\x65\x74\x65\x20\x65\x72\x72\x6f\x72"); goto Q0bYB; Q0bYB: goto qRGRK; goto Zl2Dp; UpH9S: $result = ''; goto kHKR1; J3Lxz: return $result; goto JCVM6; Bfi2g: $result = array("\163\164\x61\x74\x75\x73" => 0, "\162\145\x73\x75\154\164" => "\114\151\156\153\40\156\157\164\40\x65\x78\x69\x73\164\x73"); goto fRCj7; wvlco: if (file_exists($file)) { goto xSDh0; } goto Bfi2g; ITXVE: if (unlink($file)) { goto lKwCf; } goto iZxjK; uonde: $file = $this->folderCache . "\x2f" . $createFolderCache . "\x2f" . $name . "\x2e\164\170\164"; goto wvlco; A6hUd: $createFolderCache = $this->createFolderCache($name); goto uonde; fRCj7: goto vyejy; goto TL1de; TL1de: xSDh0: goto ITXVE; kHKR1: $name = md5(md5($name)); goto A6hUd; H0dHI: vyejy: goto J3Lxz; OPgbP: qRGRK: goto H0dHI; FO33Z: $result = array("\163\164\x61\164\165\x73" => 1, "\162\x65\163\165\154\164" => "\x44\145\154\145\164\x65\144"); goto OPgbP; JCVM6: } public function cacheCount() { goto whc1s; UbLp7: UTVLk: goto jFcaV; soqZK: foreach ($getDirContents as $key => $value) { goto f1a42; aC1hS: $result["\x72\x65\x73\x75\154\164"] = 1; goto eUAte; LuLG7: rBu4I: goto r9sby; sGgPs: $i++; goto iHT3h; iHT3h: tBAgd: goto LuLG7; eUAte: $result["\164\157\x74\141\x6c\137\x63\x61\x63\150\145"] = $i; goto sGgPs; f1a42: if (!strpos($value, "\56\164\x78\164")) { goto tBAgd; } goto aC1hS; r9sby: } goto UbLp7; vAEt6: if (!$getDirContents) { goto VTbUW; } goto soqZK; jFcaV: VTbUW: goto VH_ZO; whc1s: $result = array(); goto R2RML; R2RML: $getDirContents = $this->getDirContents($this->folderCache); goto eOBQ2; VH_ZO: return json_encode($result); goto BRkHZ; eOBQ2: $i = 1; goto vAEt6; BRkHZ: } private function createFolderCache($name) { goto Ay3eX; bNgxT: return $folder1 . "\x2f" . $folder2; goto AT2YY; Ay3eX: $folder1 = substr($name, 0, 2); goto EdgWg; EdgWg: $folder2 = substr($name, 2, 2); goto bNgxT; AT2YY: } private function getDirContents($dir, &$results = array()) { goto VXAk5; VXAk5: $files = scandir($dir); goto iS71F; h6Zo3: return $results; goto GPLuX; iS71F: foreach ($files as $key => $value) { goto cpLlz; fZ_rA: goto Zc4mS; goto qSyPi; X2JK_: Zc4mS: goto SWK7p; W3SZl: $results[] = $path; goto X2JK_; SWK7p: Bjp4A: goto NdPb1; VL6Ve: $results[] = $path; goto YFoDL; ZdgOL: if (!is_dir($path)) { goto wWTti; } goto VYKug; VYKug: if (!($value != "\56" && $value != "\x2e\x2e")) { goto fxCCt; } goto f8gcy; qSyPi: wWTti: goto W3SZl; cpLlz: $path = realpath($dir . DIRECTORY_SEPARATOR . $value); goto ZdgOL; f8gcy: $this->getDirContents($path, $results); goto VL6Ve; YFoDL: fxCCt: goto fZ_rA; NdPb1: } goto QCS5c; QCS5c: Tjpgs: goto h6Zo3; GPLuX: } private function removeEmptySubFolders($path) { goto HGhBt; HGhBt: $empty = true; goto WyGcq; SAFZp: return $empty && @rmdir($path); goto lFxMN; WyGcq: foreach (glob($path . DIRECTORY_SEPARATOR . "\52") as $file) { $empty &= is_dir($file) && $this->removeEmptySubFolders($file); mgoMo: } goto o7fa6; o7fa6: DV2nk: goto SAFZp; lFxMN: } }
