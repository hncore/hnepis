<?php
/*   __________________________________________________
    |  		Code By HauN - HauNYTB.COM  2.0.14    	  |
    |          Telegram: https://t.me/haunytb         |
    |    	   Url : https://haunytb.com    		  |
    |_________________________________________________|
*/
 namespace HNMG\EP_Load; class EP_Cache { public $timeCache; public $folderCache; public function __construct() { goto Ap9qF; ywNnl: wp_mkdir_p($this->folderCache); goto YRI5a; u5I6t: if (is_dir($this->folderCache)) { goto uc9BA; } goto ywNnl; nFz7a: global $wp_filesystem; goto TYCpk; TYCpk: WP_Filesystem(); goto xhA_g; xhA_g: $this->wp_filesystem = $wp_filesystem; goto XDUmj; YRI5a: uc9BA: goto gpgTr; gpgTr: $this->timeCache = 3600; goto eJTFE; eJTFE: if (!function_exists("\127\120\x5f\x46\151\154\x65\163\171\163\x74\145\x6d")) { require_once ABSPATH . "\x77\x70\55\x61\x64\155\x69\156\57\x69\x6e\x63\154\165\x64\x65\163\57\x66\x69\x6c\145\x2e\x70\x68\x70"; } goto nFz7a; Ap9qF: $this->folderCache = HNMG_CACHE; goto u5I6t; XDUmj: } public function register() { goto qeTBQ; R5b11: add_action("\167\160\137\141\x6a\141\x78\137\156\x6f\160\162\x69\166\x5f\144\145\154\x65\164\x65\137\141\154\x6c\137\x63\x61\143\150\x65", [$this, "\144\145\x6c\145\x74\x65\x5f\x61\x6c\x6c\137\x63\141\143\x68\x65"]); goto MkhV3; qeTBQ: add_action("\x77\x70\137\x61\x6a\x61\x78\x5f\162\145\163\x65\164\x5f\x70\x6c\x61\x79\145\162\x5f\x63\141\143\x68\145", [$this, "\x72\x65\163\145\164\137\x70\154\x61\171\145\x72\x5f\x63\x61\143\150\145"]); goto kTPJ0; kTPJ0: add_action("\167\x70\137\x61\x6a\141\170\x5f\156\x6f\x70\162\151\x76\x5f\x72\145\x73\145\164\x5f\160\x6c\141\171\145\162\137\143\141\x63\x68\145", [$this, "\x72\x65\163\145\164\x5f\x70\x6c\x61\x79\x65\x72\137\x63\141\143\150\x65"]); goto VwrFi; qeGLJ: add_filter("\x48\x4e\115\x47\55\x70\x61\147\145\x73", [$this, "\150\x6e\x61\160\151\x73\x6f\144\145\137\x63\x61\x63\x68\145\137\155\145\156\165"]); goto FtJdP; VwrFi: add_filter("\110\x4e\x4d\107\x2d\164\x61\142\163", [$this, "\150\x6e\141\160\151\x73\x6f\x64\x65\137\143\141\143\x68\145\137\155\x65\x6e\165"]); goto qeGLJ; FtJdP: add_action("\x77\160\137\141\x6a\x61\x78\137\144\x65\154\145\164\x65\137\141\154\x6c\137\143\x61\x63\150\x65", [$this, "\x64\x65\154\x65\x74\x65\137\x61\x6c\x6c\137\143\x61\x63\150\x65"]); goto R5b11; MkhV3: } public function hnapisode_cache_menu($nav) { $nav["\x31\62\x30"] = array("\x73\154\165\x67" => "\150\156\x6d\x67\x2d\143\x61\143\x68\145\x2d\x6d\x61\156\x61\x67\x65\x72", "\143\141\154\154\142\x61\143\153" => array($this, "\x68\x6e\x6d\x67\137\x63\141\x63\150\x65\x5f\155\x61\156\x61\x67\x65\x5f\x70\141\147\145"), "\x74\151\x74\x6c\x65" => "\110\x4e\x4d\x47\x20\103\x61\x63\150\145", "\x69\x63\157\156" => "\x66\141\x2d\160\x6c\141\x79\55\143\x69\162\x63\x6c\x65"); return $nav; } public function hnmg_cache_manage_page() { goto rKKUG; KEqEW: echo view("\x48\x4e\115\x47\72\x3a\154\141\x79\x6f\165\x74\163\x2e\143\141\143\x68\x65", compact("\x63\141\x63\150\145\x5f\x63\x6f\x75\156\164", "\147\145\x74\137\143\141\x63\150\x65")); goto S4Aea; rKKUG: $cache_count = json_decode($this->cacheCount()); goto P0Qnt; P0Qnt: $get_cache = json_decode($this->getCache()); goto KEqEW; S4Aea: } public function delete_all_cache() { goto EZuIj; hCHOu: wp_send_json_success(["\163\x74\x61\x74\165\x73" => $status, "\x74\x6f\164\x61\154\x5f\x63\x61\x63\150\145" => $total_cache, "\x74\151\x6d\x65\x5f\154\x69\155\151\164" => $time_limit, "\143\141\x63\150\x65\137\x64\x65\154\145\x74\x65\x64" => $cache_deleted]); goto JZE0A; tNnFt: $total_cache = $result["\x74\157\164\x61\154\x5f\x63\141\x63\150\145"] ?? 0; goto nGucy; nGucy: $time_limit = $result["\164\x69\x6d\145\x5f\x6c\x69\155\x69\164"] ?? 0; goto xl1Dy; JZE0A: wp_die(); goto wOR0G; xl1Dy: $cache_deleted = $result["\143\141\143\150\x65\x5f\x64\145\154\x65\x74\x65\144"] ?? 0; goto hCHOu; EZuIj: $result = json_decode($this->delAllCache(0), true); goto ZmVWB; ZmVWB: $status = "\123\165\143\x63\x65\163\x73\x66\165\154\x6c\x79"; goto tNnFt; wOR0G: } public function delAllCache($timeCache) { goto oIZFg; lq9Bh: $result["\x74\x6f\x74\x61\x6c\137\x63\x61\143\150\x65"] = $i; goto WGQdz; BrUk6: if (!$getDirContents) { goto CGl4f; } goto YxaRD; L8ToP: foreach ($getDirContents as $key => $value) { goto gVm6r; VBGdR: $i++; goto ECY8S; zBSfE: UMeQA: goto Pv4Yi; y1di1: $result["\x73\164\x61\164\165\x73"] = 1; goto zBSfE; qCMgW: if (!unlink($value)) { goto UMeQA; } goto y1di1; watKt: $j++; goto qCMgW; gVm6r: if (!(strpos($value, "\56\164\x78\164") !== false)) { goto TN7ZD; } goto VBGdR; V5xeG: GrS6r: goto ZtG3Q; Pv4Yi: LRyFQ: goto JNAfJ; JNAfJ: TN7ZD: goto V5xeG; ECY8S: if (!($timeCache <= time() - filemtime($value))) { goto LRyFQ; } goto watKt; ZtG3Q: } goto bqNFD; Z7Sr0: CGl4f: goto JbR0y; Icf7L: $result["\x63\x61\x63\x68\145\x5f\x63\x6f\x75\x6e\164"] = $i - $j; goto Z7Sr0; bqNFD: mdrFx: goto lq9Bh; yF1Lw: return json_encode($result); goto p0OPS; JbR0y: $this->removeEmptySubFolders($this->folderCache); goto yF1Lw; YxaRD: $i = $j = 0; goto L8ToP; oIZFg: $result = array("\163\164\x61\164\x75\163" => 0, "\164\157\x74\x61\154\x5f\143\x61\x63\150\x65" => 0, "\164\x69\x6d\x65\137\154\x69\155\151\x74" => $timeCache, "\x63\x61\x63\x68\x65\x5f\x64\x65\x6c\145\x74\145\144" => 0, "\143\x61\143\150\145\x5f\x63\x6f\165\x6e\x74" => 0); goto DsDej; WGQdz: $result["\x63\x61\143\x68\145\x5f\144\145\x6c\145\164\x65\x64"] = $j; goto Icf7L; DsDej: $getDirContents = $this->getDirContents($this->folderCache); goto BrUk6; p0OPS: } public function reset_player_cache() { goto r71iS; r71iS: $server = isset($_POST["\x73\145\162\x76\x65\x72\x5f\x69\x64"]) ? (int) $_POST["\x73\145\x72\166\145\x72\137\151\144"] : ''; goto I9vyp; aiAjr: wp_send_json($cacheData); goto kHKwM; I9vyp: $post_id = isset($_POST["\160\x6f\163\164\x5f\151\144"]) ? (int) $_POST["\160\157\163\x74\x5f\151\144"] : ''; goto X8i1T; SiG6I: $link = $data[$server - 1]["\x68\141\x75\x6e\155\157\166\151\145\163\x5f\163\145\x72\166\x65\162\x5f\144\141\164\x61"][$episode_slug]["\x68\x61\165\x6e\155\x6f\x76\151\x65\x73\137\x65\x70\x5f\154\x69\x6e\153"]; goto y7xe9; y7xe9: $cacheData = $this->delCache($link); goto aiAjr; X8i1T: $episode_slug = isset($_POST["\145\x70\151\163\x6f\144\145\x5f\x73\x6c\165\x67"]) ? str_replace("\x2d", "\x5f", wp_strip_all_tags($_POST["\x65\160\x69\x73\157\144\x65\x5f\163\154\x75\147"])) : ''; goto p0i9i; p0i9i: $film_meta = get_post_meta($post_id, HNMG_EPS, true); goto BZiD5; BZiD5: $data = json_decode($film_meta, true); goto SiG6I; kHKwM: } public function readCache($name) { goto vgn0B; eost_: if (!file_exists($file)) { goto fwDxe; } goto CQHeG; seXpz: $createFolderCache = $this->createFolderCache($name); goto KYQpC; g1AH0: Fcet7: goto eWmfb; ueHF_: MMbBe: goto wvmRk; eWmfb: if (!($this->timeCache > time() - filemtime($file))) { goto bdeuu; } goto AtSBN; dXD2Q: goto MMbBe; goto g1AH0; Acja_: return $result; goto Nlxut; UGL8N: $result = ''; goto seXpz; wvmRk: fwDxe: goto Acja_; CQHeG: if ($this->timeCache != '') { goto Fcet7; } goto OTG2K; KYQpC: $file = $this->folderCache . "\57" . $createFolderCache . "\57" . $name . "\56\164\x78\164"; goto eost_; E1IBb: bdeuu: goto ueHF_; vgn0B: $name = md5(md5($name)); goto UGL8N; AtSBN: $result = file_get_contents($file); goto E1IBb; OTG2K: $result = file_get_contents($file); goto dXD2Q; Nlxut: } public function getCache() { goto PpZKK; srFDu: if (!$getDirContents) { goto T5M2g; } goto fi7Bh; fi7Bh: foreach ($getDirContents as $key => $value) { goto RbAfm; ScvuK: FHtUV: goto dh46_; RbAfm: if (!strpos($value, "\x2e\164\x78\x74")) { goto sY6Wr; } goto HbMAm; cfgM_: sY6Wr: goto ScvuK; HbMAm: $result[] = array("\146\151\x6c\145" => $value); goto cfgM_; dh46_: } goto ECoHp; O1WbW: $getDirContents = $this->getDirContents($this->folderCache); goto dIfdL; dIfdL: $i = 0; goto srFDu; jXukE: T5M2g: goto gu8VZ; qyHDs: return json_encode($result); goto jXukE; PpZKK: $result = array(); goto O1WbW; ECoHp: jnVKe: goto qyHDs; gu8VZ: } public function saveCache($name, $data) { goto wkDGZ; Zeacg: $createFolderCache = $this->createFolderCache($name); goto Gcnwe; EMepq: $this->wp_filesystem->put_contents($index_file, "\74\77\x70\150\160\40\x2f\57\40\123\x69\154\x65\x6e\143\x65\x20\x69\x73\x20\147\157\x6c\144\x65\x6e\56", FS_CHMOD_FILE); goto Wwfsw; mC4Vn: chmod($this->folderCache, 0777); goto lSdNz; xpiJO: if (chmod($this->folderCache, 0777)) { goto ZRA_s; } goto mC4Vn; RhoZU: $index_file = WP_CONTENT_DIR . "\x2f\x69\156\x64\x65\170\56\160\150\160"; goto EMepq; F4f1_: Y7v1J: goto xpiJO; Lpskm: if (is_dir($dir)) { goto Murex; } goto xkSzp; Gcnwe: if (is_dir($this->folderCache)) { goto Y7v1J; } goto BSmNd; yJcyK: $file = $dir . "\x2f" . $name . "\x2e\x74\170\x74"; goto Lpskm; wkDGZ: $name = md5(md5($name)); goto Zeacg; weocq: $this->wp_filesystem->put_contents($file, $data, FS_CHMOD_FILE); goto RhoZU; xkSzp: mkdir($dir, 0777, true); goto SMKUI; BSmNd: mkdir($this->folderCache, 0777, true); goto F4f1_; Arm6W: $dir = $this->folderCache . "\x2f" . $createFolderCache; goto yJcyK; lSdNz: ZRA_s: goto Arm6W; SMKUI: Murex: goto weocq; Wwfsw: } public function delCache($name) { goto ynMlz; LukGt: $result = array("\x73\164\141\164\x75\163" => 0, "\x72\x65\163\x75\x6c\x74" => "\104\x65\154\145\164\x65\x20\x65\x72\162\157\162"); goto Hvnav; ynMlz: $result = ''; goto sCLIc; tkbIv: goto FrOM9; goto cI9No; oTqct: if (unlink($file)) { goto FRcKG; } goto LukGt; i7CiI: $file = $this->folderCache . "\57" . $createFolderCache . "\x2f" . $name . "\x2e\x74\170\x74"; goto oV28T; fEPF2: $result = array("\163\164\141\164\x75\x73" => 0, "\x72\x65\163\x75\x6c\164" => "\114\151\156\153\40\x6e\157\164\40\x65\x78\151\x73\x74\163"); goto tkbIv; sCLIc: $name = md5(md5($name)); goto RmfI1; Hvnav: goto Wel7o; goto IqQGz; IqQGz: FRcKG: goto xBRtm; hB_Lp: FrOM9: goto c3sP3; c3sP3: return $result; goto VdB8i; xBRtm: $result = array("\163\164\x61\164\x75\163" => 1, "\162\145\163\165\154\x74" => "\x44\145\154\x65\x74\145\x64"); goto Yb9qa; RmfI1: $createFolderCache = $this->createFolderCache($name); goto i7CiI; oV28T: if (file_exists($file)) { goto F3fyl; } goto fEPF2; cI9No: F3fyl: goto oTqct; Yb9qa: Wel7o: goto hB_Lp; VdB8i: } public function cacheCount() { goto KHBIg; fXTH7: foreach ($getDirContents as $key => $value) { goto vEZi2; oQjk5: $result["\x74\x6f\x74\141\x6c\x5f\143\141\x63\x68\x65"] = $i; goto QXDDX; bzWJm: $result["\162\145\x73\165\x6c\164"] = 1; goto oQjk5; K3y6g: km1vh: goto n1qfo; vEZi2: if (!strpos($value, "\x2e\164\170\164")) { goto BgSeZ; } goto bzWJm; Hf7sY: BgSeZ: goto K3y6g; QXDDX: $i++; goto Hf7sY; n1qfo: } goto V5P5w; LmGAE: jkDa2: goto JUu1g; cFajW: $i = 1; goto sFODm; V5P5w: pwTjU: goto LmGAE; nPcxi: $getDirContents = $this->getDirContents($this->folderCache); goto cFajW; sFODm: if (!$getDirContents) { goto jkDa2; } goto fXTH7; KHBIg: $result = array(); goto nPcxi; JUu1g: return json_encode($result); goto iqN7S; iqN7S: } private function createFolderCache($name) { goto bn5fk; EA3ud: return $folder1 . "\x2f" . $folder2; goto l5Q3Z; bn5fk: $folder1 = substr($name, 0, 2); goto Ve2zn; Ve2zn: $folder2 = substr($name, 2, 2); goto EA3ud; l5Q3Z: } private function getDirContents($dir, &$results = array()) { goto I08W3; w2av7: foreach ($files as $key => $value) { goto edBZh; UG_pV: acVJm: goto bz8dz; fG5sN: $results[] = $path; goto Q0mwT; LsQVb: goto xT9yf; goto vg_TE; vg_TE: DA0hZ: goto lW4wM; lW4wM: $results[] = $path; goto xrImy; rUZi7: $this->getDirContents($path, $results); goto fG5sN; vLHD7: if (!is_dir($path)) { goto DA0hZ; } goto tHD1Q; Q0mwT: IGgIZ: goto LsQVb; tHD1Q: if (!($value != "\x2e" && $value != "\x2e\x2e")) { goto IGgIZ; } goto rUZi7; edBZh: $path = realpath($dir . DIRECTORY_SEPARATOR . $value); goto vLHD7; xrImy: xT9yf: goto UG_pV; bz8dz: } goto sIXnQ; sIXnQ: daynb: goto VDkX7; I08W3: $files = scandir($dir); goto w2av7; VDkX7: return $results; goto x01bE; x01bE: } private function removeEmptySubFolders($path) { goto pKZpD; zwoat: foreach (glob($path . DIRECTORY_SEPARATOR . "\x2a") as $file) { $empty &= is_dir($file) && $this->removeEmptySubFolders($file); QKtAO: } goto it10p; IxMVB: return $empty && @rmdir($path); goto h4tBf; it10p: yiEkO: goto IxMVB; pKZpD: $empty = true; goto zwoat; h4tBf: } }
