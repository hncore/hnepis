<?php
/*   __________________________________________________
    |  		Code By HauN - HauNYTB.COM  2.0.14    	  |
    |          Telegram: https://t.me/haunytb         |
    |    	   Url : https://haunytb.com    		  |
    |_________________________________________________|
*/
 namespace HNMG\EP_Load; class EP_Cache { public $timeCache; public $folderCache; public function __construct() { goto Duk24; vBvjj: $this->wp_filesystem = $wp_filesystem; goto xRmvB; yUUtI: if (!function_exists("\x57\120\x5f\x46\x69\x6c\145\x73\x79\163\164\x65\155")) { require_once ABSPATH . "\167\x70\55\141\x64\155\151\x6e\57\x69\156\143\154\x75\144\x65\x73\57\x66\151\154\145\x2e\x70\150\160"; } goto odlJi; odlJi: global $wp_filesystem; goto miFjf; RVglb: wp_mkdir_p($this->folderCache); goto fn3T9; miFjf: WP_Filesystem(); goto vBvjj; Duk24: $this->folderCache = HNMG_CACHE; goto NSxBq; NSxBq: if (is_dir($this->folderCache)) { goto gbZn5; } goto RVglb; fn3T9: gbZn5: goto Z7ux8; Z7ux8: $this->timeCache = 3600; goto yUUtI; xRmvB: } public function register() { goto S4QQx; Q6P9t: add_action("\167\x70\137\x61\x6a\141\x78\137\x6e\x6f\160\x72\x69\166\137\162\x65\x73\x65\164\137\160\x6c\x61\x79\x65\x72\x5f\x63\x61\143\x68\x65", [$this, "\x72\145\163\145\x74\x5f\160\x6c\x61\x79\145\x72\137\x63\141\x63\150\x65"]); goto DoyGP; jBabx: add_action("\167\160\x5f\141\152\141\170\x5f\144\145\154\145\x74\145\x5f\x61\x6c\154\x5f\x63\141\143\150\x65", [$this, "\x64\145\154\145\x74\145\x5f\141\x6c\x6c\x5f\143\x61\x63\150\x65"]); goto hq5gy; WYEPo: hppfY: goto CTtOE; S4QQx: if (!(HNCORE()->get_product_status() == "\143\157\156\156\x65\x63\164\x65\x64")) { goto hppfY; } goto c1e91; hq5gy: add_action("\x77\160\x5f\x61\x6a\x61\x78\137\x6e\x6f\160\162\x69\x76\x5f\144\145\154\x65\x74\x65\x5f\x61\154\154\x5f\x63\x61\143\150\x65", [$this, "\144\x65\154\x65\164\x65\137\141\154\x6c\x5f\143\x61\143\x68\145"]); goto WYEPo; c1e91: add_action("\167\x70\137\x61\152\x61\x78\137\162\x65\163\145\x74\137\160\x6c\x61\x79\x65\162\137\143\x61\x63\x68\x65", [$this, "\162\x65\x73\x65\x74\x5f\160\154\141\171\145\x72\x5f\143\x61\x63\x68\145"]); goto Q6P9t; i07dN: add_filter("\x48\116\115\x47\55\x70\141\147\145\163", [$this, "\150\x6e\x61\160\x69\163\157\x64\145\137\x63\141\x63\150\x65\137\155\145\x6e\x75"]); goto jBabx; DoyGP: add_filter("\x48\x4e\115\x47\55\x74\x61\x62\x73", [$this, "\x68\156\141\x70\x69\163\157\x64\145\137\x63\x61\x63\x68\145\137\x6d\145\156\x75"]); goto i07dN; CTtOE: } public function hnapisode_cache_menu($nav) { $nav["\61\62\60"] = array("\163\154\x75\x67" => "\x68\156\x6d\147\55\143\141\x63\150\x65\55\x6d\141\156\x61\x67\145\x72", "\x63\x61\154\154\x62\141\x63\153" => array($this, "\x68\156\155\x67\x5f\143\141\x63\x68\145\137\155\141\156\x61\x67\145\x5f\160\x61\147\145"), "\x74\x69\164\x6c\x65" => __("\110\116\x4d\107\40\103\141\x63\x68\145", "\150\156\x6d\147\x65\x70\151\x73"), "\151\x63\x6f\x6e" => "\x66\141\x2d\160\x6c\x61\171\x2d\143\151\x72\143\x6c\x65"); return $nav; } public function hnmg_cache_manage_page() { goto vRB2u; oS4iA: echo view("\x48\x4e\115\x47\72\72\154\x61\x79\157\x75\164\163\56\x63\141\143\150\145", compact("\143\x61\143\x68\x65\x5f\x63\x6f\x75\x6e\x74", "\x67\x65\x74\137\x63\x61\143\x68\145")); goto fXdNV; vRB2u: $cache_count = json_decode($this->cacheCount()); goto pHrAo; pHrAo: $get_cache = json_decode($this->getCache()); goto oS4iA; fXdNV: } public function delete_all_cache() { goto i3VHy; u3Az1: wp_die(); goto h9rok; UiOw7: $time_limit = $result["\x74\151\x6d\x65\137\x6c\151\155\151\164"] ?? 0; goto z_OKM; z_OKM: $cache_deleted = $result["\x63\141\x63\x68\145\137\144\x65\x6c\x65\164\x65\144"] ?? 0; goto Ig0QD; GOH7w: $total_cache = $result["\164\157\x74\x61\x6c\137\143\141\143\x68\x65"] ?? 0; goto UiOw7; Ig0QD: wp_send_json_success(["\x73\x74\x61\x74\165\163" => $status, "\164\x6f\x74\141\154\x5f\x63\141\x63\x68\x65" => $total_cache, "\164\151\155\x65\x5f\x6c\151\155\x69\164" => $time_limit, "\143\x61\x63\x68\145\137\x64\145\154\x65\164\145\x64" => $cache_deleted]); goto u3Az1; i3VHy: $result = json_decode($this->delAllCache(0), true); goto fa6aE; fa6aE: $status = "\x53\x75\x63\143\x65\x73\x73\x66\165\154\154\171"; goto GOH7w; h9rok: } public function delAllCache($timeCache) { goto L7EOC; z3Aoa: if (!$getDirContents) { goto ArMSk; } goto li6KQ; hKBJ1: X2fk0: goto Wh5fl; GlzMl: $result["\x63\x61\x63\x68\x65\x5f\x64\145\154\x65\164\145\144"] = $j; goto Lm7wI; Wh5fl: $result["\x74\x6f\164\141\x6c\137\x63\141\143\150\x65"] = $i; goto GlzMl; Lm7wI: $result["\143\x61\143\x68\145\137\x63\157\165\x6e\x74"] = $i - $j; goto tOjcF; L7EOC: $result = array("\163\164\x61\164\x75\163" => 0, "\x74\157\164\x61\154\137\x63\x61\143\x68\x65" => 0, "\164\x69\155\145\x5f\154\151\155\x69\164" => $timeCache, "\x63\141\143\150\x65\x5f\x64\x65\154\145\x74\x65\x64" => 0, "\143\141\x63\150\145\x5f\143\157\165\156\164" => 0); goto mpwrc; nyzSl: foreach ($getDirContents as $key => $value) { goto gpcve; o0kFN: $result["\x73\164\x61\164\165\163"] = 1; goto izQdG; gpcve: if (!(strpos($value, "\56\164\170\x74") !== false)) { goto x8eq7; } goto VmLzM; kXhLM: $j++; goto V4_Vx; sxlZs: dT57q: goto xP583; izQdG: GUZTQ: goto sxlZs; c7K62: JsSC5: goto Y0W3U; VmLzM: $i++; goto CnC2P; CnC2P: if (!($timeCache <= time() - filemtime($value))) { goto dT57q; } goto kXhLM; xP583: x8eq7: goto c7K62; V4_Vx: if (!unlink($value)) { goto GUZTQ; } goto o0kFN; Y0W3U: } goto hKBJ1; bab8H: return json_encode($result); goto HtVOm; li6KQ: $i = $j = 0; goto nyzSl; mpwrc: $getDirContents = $this->getDirContents($this->folderCache); goto z3Aoa; XT02K: $this->removeEmptySubFolders($this->folderCache); goto bab8H; tOjcF: ArMSk: goto XT02K; HtVOm: } public function reset_player_cache() { goto yjSl4; yjSl4: $server = isset($_POST["\163\x65\x72\166\x65\162\x5f\x69\144"]) ? (int) $_POST["\x73\x65\x72\166\145\162\137\151\144"] : ''; goto Pn2Yu; Ox3W1: $film_meta = get_post_meta($post_id, HNMG_EPS, true); goto YPWmA; KqW51: $link = $data[$server - 1]["\x68\141\x75\x6e\x6d\x6f\166\151\145\163\137\x73\145\x72\x76\x65\162\137\x64\x61\x74\141"][$episode_slug]["\x68\x61\x75\156\155\x6f\166\x69\145\x73\x5f\145\160\137\x6c\x69\x6e\153"]; goto zp4Je; oT7OQ: $episode_slug = isset($_POST["\145\160\x69\163\x6f\144\145\x5f\163\x6c\x75\x67"]) ? str_replace("\55", "\137", wp_strip_all_tags($_POST["\x65\x70\151\163\x6f\x64\x65\137\163\154\x75\147"])) : ''; goto Ox3W1; Pn2Yu: $post_id = isset($_POST["\160\157\x73\x74\x5f\151\x64"]) ? (int) $_POST["\160\157\x73\164\x5f\151\144"] : ''; goto oT7OQ; YPWmA: $data = json_decode($film_meta, true); goto KqW51; iFI77: wp_send_json($cacheData); goto xH108; zp4Je: $cacheData = $this->delCache($link); goto iFI77; xH108: } public function readCache($name) { goto Cgp_g; NM6Lq: $createFolderCache = $this->createFolderCache($name); goto DN7I2; LCkA6: n1b0w: goto Yc0Gd; DSINC: $result = file_get_contents($file); goto LCkA6; oNStv: $result = file_get_contents($file); goto TbtdL; AID30: Gtc90: goto GiU_i; sOyC2: $result = ''; goto NM6Lq; TQ3vV: a9uuQ: goto nu6AE; Cgp_g: $name = md5(md5($name)); goto sOyC2; DN7I2: $file = $this->folderCache . "\57" . $createFolderCache . "\x2f" . $name . "\x2e\164\x78\x74"; goto e3K5B; TbtdL: goto DiUAp; goto TQ3vV; Yc0Gd: DiUAp: goto AID30; GiU_i: return $result; goto Hq8QC; CSjpT: if ($this->timeCache != '') { goto a9uuQ; } goto oNStv; e3K5B: if (!file_exists($file)) { goto Gtc90; } goto CSjpT; nu6AE: if (!($this->timeCache > time() - filemtime($file))) { goto n1b0w; } goto DSINC; Hq8QC: } public function getCache() { goto MaHFi; cJTrK: wXx1h: goto UoHyD; h96MS: foreach ($getDirContents as $key => $value) { goto j3M35; FF3pJ: HxZMc: goto Uo1n6; IzfgS: $result[] = array("\146\151\x6c\145" => $value); goto twJdi; j3M35: if (!strpos($value, "\x2e\x74\170\x74")) { goto BgH_Z; } goto IzfgS; twJdi: BgH_Z: goto FF3pJ; Uo1n6: } goto aQuAl; mgPNp: return json_encode($result); goto cJTrK; Al4sn: $i = 0; goto jGKQi; YfeHN: $getDirContents = $this->getDirContents($this->folderCache); goto Al4sn; MaHFi: $result = array(); goto YfeHN; jGKQi: if (!$getDirContents) { goto wXx1h; } goto h96MS; aQuAl: KuSV_: goto mgPNp; UoHyD: } public function saveCache($name, $data) { goto WJyxw; cmf1a: $index_file = WP_CONTENT_DIR . "\x2f\x69\x6e\x64\145\170\x2e\160\150\160"; goto ijuyw; mBCQr: $file = $dir . "\x2f" . $name . "\56\164\170\164"; goto CdboK; mwWDK: ES8Gw: goto Ymx_F; UO0Q_: $this->wp_filesystem->put_contents($file, $data, FS_CHMOD_FILE); goto cmf1a; CdboK: if (is_dir($dir)) { goto OR0DT; } goto RuHcL; Fv6Dr: if (chmod($this->folderCache, 0777)) { goto ES8Gw; } goto nMA3L; ijuyw: $this->wp_filesystem->put_contents($index_file, "\x3c\x3f\160\x68\x70\40\57\57\40\x53\151\x6c\145\x6e\x63\x65\40\x69\163\40\x67\x6f\154\144\x65\x6e\x2e", FS_CHMOD_FILE); goto Dlxo3; q_MRV: mkdir($this->folderCache, 0777, true); goto E0j9o; nMA3L: chmod($this->folderCache, 0777); goto mwWDK; Ymx_F: $dir = $this->folderCache . "\x2f" . $createFolderCache; goto mBCQr; jDDWc: if (is_dir($this->folderCache)) { goto mpkLT; } goto q_MRV; RuHcL: mkdir($dir, 0777, true); goto JyeRm; E0j9o: mpkLT: goto Fv6Dr; xv02p: $createFolderCache = $this->createFolderCache($name); goto jDDWc; WJyxw: $name = md5(md5($name)); goto xv02p; JyeRm: OR0DT: goto UO0Q_; Dlxo3: } public function delCache($name) { goto Vdl7U; fV3ax: goto q6laQ; goto ebILn; ebILn: jywUN: goto ak0uR; pqLAs: if (unlink($file)) { goto jywUN; } goto T1YYg; CJmtR: NNIfD: goto pqLAs; Cw_va: $result = array("\163\x74\141\x74\165\x73" => 0, "\162\145\x73\165\154\164" => "\x4c\151\x6e\x6b\x20\156\157\164\x20\x65\x78\x69\x73\x74\x73"); goto hE6l2; hE6l2: goto PycpN; goto CJmtR; cU1SW: $name = md5(md5($name)); goto lWjNZ; Vdl7U: $result = ''; goto cU1SW; ak0uR: $result = array("\x73\x74\x61\164\x75\163" => 1, "\x72\145\x73\x75\154\164" => "\104\x65\x6c\x65\164\x65\144"); goto jDE_B; uCTz9: $file = $this->folderCache . "\x2f" . $createFolderCache . "\57" . $name . "\56\164\x78\x74"; goto e2843; T1YYg: $result = array("\163\x74\x61\164\x75\163" => 0, "\162\145\x73\x75\154\x74" => "\x44\x65\x6c\x65\164\x65\x20\145\162\x72\x6f\162"); goto fV3ax; JGXbw: return $result; goto yvdlg; lWjNZ: $createFolderCache = $this->createFolderCache($name); goto uCTz9; jDE_B: q6laQ: goto V0gSe; V0gSe: PycpN: goto JGXbw; e2843: if (file_exists($file)) { goto NNIfD; } goto Cw_va; yvdlg: } public function cacheCount() { goto NjsdJ; Oskgj: if (!$getDirContents) { goto D9kd7; } goto JWBPV; ZMNUe: return json_encode($result); goto iom6V; LLBqI: $i = 1; goto Oskgj; Woup1: $getDirContents = $this->getDirContents($this->folderCache); goto LLBqI; JWBPV: foreach ($getDirContents as $key => $value) { goto hNc1y; RbPEN: $result["\x72\145\163\165\x6c\164"] = 1; goto HpAw5; FHr5S: $i++; goto E0vCV; HpAw5: $result["\164\157\x74\x61\154\x5f\143\141\143\x68\145"] = $i; goto FHr5S; E0vCV: oPxJI: goto GnwOR; GnwOR: giKa0: goto BsAwU; hNc1y: if (!strpos($value, "\56\164\x78\164")) { goto oPxJI; } goto RbPEN; BsAwU: } goto S1DdV; UXxBI: D9kd7: goto ZMNUe; NjsdJ: $result = array(); goto Woup1; S1DdV: Ia2RU: goto UXxBI; iom6V: } private function createFolderCache($name) { goto u_WT3; u_WT3: $folder1 = substr($name, 0, 2); goto o12jV; o12jV: $folder2 = substr($name, 2, 2); goto V5frt; V5frt: return $folder1 . "\57" . $folder2; goto WxAGN; WxAGN: } private function getDirContents($dir, &$results = array()) { goto rxRiF; vSdZZ: return $results; goto JdIFP; nLZMu: UhTI_: goto vSdZZ; MRKkL: foreach ($files as $key => $value) { goto BU2fY; rdwP2: LpK1a: goto E6KmL; Yeqcw: O_QwY: goto r7MCC; LSLEO: if (!is_dir($path)) { goto O_QwY; } goto uWQpW; Mfgs1: goto p5Pc8; goto Yeqcw; a82Dx: p5Pc8: goto rdwP2; uWQpW: if (!($value != "\x2e" && $value != "\x2e\56")) { goto K9Ejd; } goto QVIHi; BU2fY: $path = realpath($dir . DIRECTORY_SEPARATOR . $value); goto LSLEO; r7MCC: $results[] = $path; goto a82Dx; OvI3l: K9Ejd: goto Mfgs1; QVIHi: $this->getDirContents($path, $results); goto Ji1Zq; Ji1Zq: $results[] = $path; goto OvI3l; E6KmL: } goto nLZMu; rxRiF: $files = scandir($dir); goto MRKkL; JdIFP: } private function removeEmptySubFolders($path) { goto Od6yR; uR3w2: foreach (glob($path . DIRECTORY_SEPARATOR . "\52") as $file) { $empty &= is_dir($file) && $this->removeEmptySubFolders($file); rC5Uf: } goto AZdoh; Hvo_Q: return $empty && @rmdir($path); goto mX0jw; Od6yR: $empty = true; goto uR3w2; AZdoh: YzgP2: goto Hvo_Q; mX0jw: } }
