<?php
/*   __________________________________________________
    |  		Code By HauN - HauNYTB.COM  2.0.14    	  |
    |          Telegram: https://t.me/haunytb         |
    |    	   Url : https://haunytb.com    		  |
    |_________________________________________________|
*/
 namespace HNMG\EP_Load; class EP_Cache { public $timeCache; public $folderCache; public function __construct() { goto VKwjr; jknGS: $this->wp_filesystem = $wp_filesystem; goto hvjrA; Cf5Gu: WP_Filesystem(); goto jknGS; VKwjr: $this->folderCache = HNMG_CACHE; goto e21Ys; fiFlf: if (!function_exists("\127\x50\137\x46\151\x6c\145\x73\171\x73\x74\145\155")) { require_once ABSPATH . "\x77\x70\55\x61\x64\x6d\x69\156\57\151\156\143\154\x75\144\145\x73\x2f\146\x69\x6c\145\56\160\x68\160"; } goto Sm0SJ; Sm0SJ: global $wp_filesystem; goto Cf5Gu; e21Ys: if (is_dir($this->folderCache)) { goto PJml2; } goto ya6fn; ya6fn: wp_mkdir_p($this->folderCache); goto Ni283; Ni283: PJml2: goto GVhXd; GVhXd: $this->timeCache = 3600; goto fiFlf; hvjrA: } public function register() { goto Oj1W4; Oj1W4: if (!(HNCORE()->get_product_status() == "\x63\157\156\156\145\143\164\x65\x64")) { goto UksMj; } goto xjBqG; JXLrn: add_filter("\110\116\x4d\107\55\160\141\147\145\x73", [$this, "\150\x6e\x61\160\151\x73\157\144\x65\137\x63\141\x63\150\145\x5f\155\145\156\165"]); goto v8RZ7; TCC2S: add_action("\167\x70\137\141\x6a\141\x78\137\x6e\x6f\x70\162\151\166\x5f\x64\145\154\x65\x74\145\137\x61\x6c\154\x5f\x63\141\x63\150\145", [$this, "\144\x65\x6c\x65\164\145\137\x61\x6c\154\137\x63\141\x63\150\x65"]); goto P4s8Z; xmOro: add_action("\x77\160\x5f\x61\x6a\141\x78\137\156\x6f\x70\162\151\166\137\x72\x65\x73\x65\x74\137\160\x6c\141\171\x65\x72\137\x63\x61\143\150\x65", [$this, "\x72\145\163\145\164\137\160\x6c\x61\171\145\x72\137\143\x61\x63\150\145"]); goto DFc4x; v8RZ7: add_action("\167\x70\x5f\x61\152\141\170\137\144\145\x6c\x65\164\x65\137\x61\154\x6c\137\x63\x61\x63\150\145", [$this, "\x64\145\x6c\x65\164\x65\137\x61\154\x6c\x5f\x63\x61\143\x68\145"]); goto TCC2S; DFc4x: add_filter("\110\x4e\x4d\107\x2d\x74\x61\142\x73", [$this, "\x68\x6e\141\x70\151\163\x6f\x64\145\x5f\143\141\143\150\x65\137\155\145\156\165"]); goto JXLrn; xjBqG: add_action("\167\x70\137\141\152\x61\170\x5f\x72\x65\163\145\x74\x5f\160\154\141\x79\x65\162\137\143\x61\143\x68\145", [$this, "\162\145\x73\x65\x74\137\160\x6c\x61\x79\145\x72\137\143\x61\143\x68\x65"]); goto xmOro; P4s8Z: UksMj: goto tHJAL; tHJAL: } public function hnapisode_cache_menu($nav) { $nav["\61\62\60"] = array("\163\x6c\165\147" => "\150\x6e\x6d\147\55\x63\x61\143\x68\145\x2d\155\x61\156\141\147\x65\x72", "\143\x61\154\x6c\142\141\143\x6b" => array($this, "\x68\156\x6d\147\x5f\x63\141\143\150\145\137\155\x61\156\x61\147\145\137\160\x61\147\145"), "\x74\x69\x74\x6c\145" => __("\110\116\115\x47\40\x43\141\143\x68\145", "\150\156\155\x67\x65\160\x69\163"), "\151\143\x6f\x6e" => "\146\x61\55\x70\x6c\x61\171\x2d\x63\151\x72\x63\x6c\x65"); return $nav; } public function hnmg_cache_manage_page() { goto CYYg3; CdbCl: $get_cache = json_decode($this->getCache()); goto Tm0a0; Tm0a0: echo view("\110\116\x4d\x47\x3a\x3a\154\x61\171\157\x75\x74\163\56\143\x61\143\150\145", compact("\x63\141\x63\x68\x65\137\x63\x6f\x75\156\x74", "\147\145\164\137\143\141\143\150\145")); goto Ez2Hs; CYYg3: $cache_count = json_decode($this->cacheCount()); goto CdbCl; Ez2Hs: } public function delete_all_cache() { goto MnMin; nVHNd: $total_cache = $result["\164\157\164\141\x6c\x5f\143\x61\143\150\145"] ?? 0; goto Wi4QT; Wi4QT: $time_limit = $result["\164\151\x6d\145\137\x6c\x69\x6d\x69\x74"] ?? 0; goto WdgVC; f9u4Z: wp_die(); goto ZanR9; CmtTo: wp_send_json_success(["\163\x74\x61\164\165\x73" => $status, "\164\x6f\164\141\154\137\143\141\143\150\x65" => $total_cache, "\164\151\x6d\x65\137\154\151\x6d\151\164" => $time_limit, "\x63\141\143\x68\x65\137\144\x65\x6c\145\164\145\144" => $cache_deleted]); goto f9u4Z; MnMin: $result = json_decode($this->delAllCache(0), true); goto vemPK; vemPK: $status = "\x53\x75\x63\143\145\x73\163\146\x75\x6c\x6c\x79"; goto nVHNd; WdgVC: $cache_deleted = $result["\x63\x61\143\x68\145\x5f\144\145\x6c\x65\164\x65\144"] ?? 0; goto CmtTo; ZanR9: } public function delAllCache($timeCache) { goto lTpFI; lTpFI: $result = array("\163\164\x61\164\165\163" => 0, "\x74\157\164\141\154\x5f\x63\x61\143\150\x65" => 0, "\x74\x69\155\145\137\x6c\151\155\x69\164" => $timeCache, "\143\x61\x63\150\145\137\144\x65\154\x65\164\x65\x64" => 0, "\x63\x61\x63\x68\145\137\x63\x6f\x75\156\x74" => 0); goto L64mD; L64mD: $getDirContents = $this->getDirContents($this->folderCache); goto dWcki; MzIhU: $i = $j = 0; goto Uk3Fn; Uk3Fn: foreach ($getDirContents as $key => $value) { goto v7HeP; j4Lse: if (!unlink($value)) { goto MmcIT; } goto utbOd; t3Mbz: $j++; goto j4Lse; utbOd: $result["\163\x74\x61\164\165\x73"] = 1; goto Y7Dit; IcrfR: $i++; goto bUiOS; Y7Dit: MmcIT: goto Oom35; HYAmL: bTMGh: goto L0vPf; lypVZ: sNqgn: goto HYAmL; Oom35: WCfdb: goto lypVZ; bUiOS: if (!($timeCache <= time() - filemtime($value))) { goto WCfdb; } goto t3Mbz; v7HeP: if (!(strpos($value, "\x2e\164\x78\164") !== false)) { goto sNqgn; } goto IcrfR; L0vPf: } goto P3RI0; dWcki: if (!$getDirContents) { goto lu2o4; } goto MzIhU; mOYWA: $result["\164\157\164\x61\x6c\x5f\143\x61\x63\x68\x65"] = $i; goto L5OPN; v0hvI: $result["\143\x61\143\150\145\137\x63\x6f\x75\156\164"] = $i - $j; goto fCNQ7; hV_D0: return json_encode($result); goto qF3Ll; MOkqH: $this->removeEmptySubFolders($this->folderCache); goto hV_D0; P3RI0: NfWlw: goto mOYWA; fCNQ7: lu2o4: goto MOkqH; L5OPN: $result["\x63\x61\x63\150\145\x5f\x64\x65\154\145\x74\x65\144"] = $j; goto v0hvI; qF3Ll: } public function reset_player_cache() { goto TopEi; dK9d9: $cacheData = $this->delCache($link); goto YaMQk; OejmP: $link = $data[$server - 1]["\150\141\x75\156\x6d\157\x76\151\x65\x73\137\163\145\x72\x76\145\162\137\144\x61\164\x61"][$episode_slug]["\x68\141\x75\156\x6d\157\x76\151\x65\163\x5f\x65\x70\x5f\154\151\x6e\x6b"]; goto dK9d9; Fd7Ec: $data = json_decode($film_meta, true); goto OejmP; VjpyE: $post_id = isset($_POST["\x70\x6f\x73\164\137\151\144"]) ? (int) $_POST["\160\x6f\x73\164\137\x69\144"] : ''; goto NIeht; HRHZ6: $film_meta = get_haunmovies($post_id, HNMG_EPS, true); goto Fd7Ec; NIeht: $episode_slug = isset($_POST["\145\160\151\x73\157\144\145\x5f\x73\154\x75\x67"]) ? str_replace("\55", "\x5f", wp_strip_all_tags($_POST["\145\x70\151\163\x6f\x64\x65\x5f\163\154\165\147"])) : ''; goto HRHZ6; YaMQk: wp_send_json($cacheData); goto V9rRa; TopEi: $server = isset($_POST["\163\145\x72\x76\145\162\137\x69\144"]) ? (int) $_POST["\x73\145\x72\166\x65\x72\137\151\x64"] : ''; goto VjpyE; V9rRa: } public function readCache($name) { goto F8uht; LGY5A: $result = file_get_contents($file); goto FgeSS; U77vp: $createFolderCache = $this->createFolderCache($name); goto jdrcq; F8uht: $name = md5(md5($name)); goto f3mfc; hx10w: if (!($this->timeCache > time() - filemtime($file))) { goto lBs_Q; } goto LGY5A; FgeSS: lBs_Q: goto mHJj1; Y7vt3: return $result; goto q1iis; jdrcq: $file = $this->folderCache . "\x2f" . $createFolderCache . "\57" . $name . "\56\164\170\x74"; goto FOMm2; rucBO: voty1: goto Y7vt3; j2gBg: t3pCA: goto hx10w; j0w6f: if ($this->timeCache != '') { goto t3pCA; } goto pVMKs; cNKLv: goto XZGyC; goto j2gBg; f3mfc: $result = ''; goto U77vp; pVMKs: $result = file_get_contents($file); goto cNKLv; FOMm2: if (!file_exists($file)) { goto voty1; } goto j0w6f; mHJj1: XZGyC: goto rucBO; q1iis: } public function getCache() { goto R6vax; AU0ki: FFVyv: goto cX4Dh; m5s3v: if (!$getDirContents) { goto zKiyt; } goto NsJRf; d5Xz6: zKiyt: goto rCJT1; R6vax: $result = array(); goto D56EV; D56EV: $getDirContents = $this->getDirContents($this->folderCache); goto hPrxE; hPrxE: $i = 0; goto m5s3v; NsJRf: foreach ($getDirContents as $key => $value) { goto BoAJ2; LLhjP: EVia4: goto fl51O; fl51O: KWDLG: goto MUyDO; BoAJ2: if (!strpos($value, "\56\x74\170\164")) { goto EVia4; } goto FKV4c; FKV4c: $result[] = array("\146\151\154\145" => $value); goto LLhjP; MUyDO: } goto AU0ki; cX4Dh: return json_encode($result); goto d5Xz6; rCJT1: } public function saveCache($name, $data) { goto B2pnZ; H2A96: mkdir($this->folderCache, 0777, true); goto OsiPI; B2pnZ: $name = md5(md5($name)); goto bhxyf; uhZ3U: if (is_dir($this->folderCache)) { goto E966r; } goto H2A96; fHw5y: M5jAD: goto t5wen; e0maB: $dir = $this->folderCache . "\x2f" . $createFolderCache; goto xkJ93; kwXlX: if (is_dir($dir)) { goto M5jAD; } goto u3Fdb; w_4km: chmod($this->folderCache, 0777); goto bRtG0; d0D5y: if (chmod($this->folderCache, 0777)) { goto hnP3t; } goto w_4km; u3Fdb: mkdir($dir, 0777, true); goto fHw5y; t5wen: $this->wp_filesystem->put_contents($file, $data, FS_CHMOD_FILE); goto QMzg5; bhxyf: $createFolderCache = $this->createFolderCache($name); goto uhZ3U; bRtG0: hnP3t: goto e0maB; of3JE: $this->wp_filesystem->put_contents($index_file, "\x3c\x3f\x70\x68\160\x20\x2f\x2f\x20\x53\x69\154\x65\x6e\x63\x65\x20\151\163\40\x67\x6f\x6c\144\x65\156\56", FS_CHMOD_FILE); goto ABBRv; xkJ93: $file = $dir . "\x2f" . $name . "\x2e\164\170\x74"; goto kwXlX; OsiPI: E966r: goto d0D5y; QMzg5: $index_file = WP_CONTENT_DIR . "\57\x69\x6e\x64\x65\170\56\160\150\160"; goto of3JE; ABBRv: } public function delCache($name) { goto osJtz; ljMsv: QVDD0: goto azMnd; hnDMv: if (unlink($file)) { goto lApgK; } goto CArxg; GOY4y: $file = $this->folderCache . "\x2f" . $createFolderCache . "\x2f" . $name . "\56\x74\x78\164"; goto Fd4f5; HU3Vq: $createFolderCache = $this->createFolderCache($name); goto GOY4y; bsv_Z: $result = array("\x73\164\x61\164\x75\163" => 1, "\x72\x65\x73\165\154\164" => "\104\x65\x6c\x65\x74\145\x64"); goto dGay7; osJtz: $result = ''; goto BZ9bR; WzeMd: goto x2AHu; goto pm2ug; PYm5f: $result = array("\x73\x74\141\164\x75\163" => 0, "\162\x65\x73\x75\154\164" => "\x4c\x69\x6e\x6b\40\x6e\157\164\40\145\170\x69\163\164\163"); goto Cu9fI; EDJVT: hf95g: goto hnDMv; CArxg: $result = array("\x73\x74\x61\164\x75\163" => 0, "\162\x65\163\x75\154\164" => "\104\x65\x6c\x65\164\145\x20\x65\x72\x72\x6f\x72"); goto WzeMd; Cu9fI: goto QVDD0; goto EDJVT; dGay7: x2AHu: goto ljMsv; BZ9bR: $name = md5(md5($name)); goto HU3Vq; azMnd: return $result; goto qvJIT; pm2ug: lApgK: goto bsv_Z; Fd4f5: if (file_exists($file)) { goto hf95g; } goto PYm5f; qvJIT: } public function cacheCount() { goto A0z18; VXoxS: return json_encode($result); goto DlmBO; G_R5z: if (!$getDirContents) { goto bTZ8V; } goto X09Qf; L1U7n: bTZ8V: goto VXoxS; kxcmE: $getDirContents = $this->getDirContents($this->folderCache); goto W4REe; A0z18: $result = array(); goto kxcmE; I0sWD: SdNMX: goto L1U7n; W4REe: $i = 1; goto G_R5z; X09Qf: foreach ($getDirContents as $key => $value) { goto OMXuY; glZo3: dhJIJ: goto xf5rz; wmfah: $result["\x72\145\x73\x75\154\164"] = 1; goto kH9dh; WQeWI: $i++; goto glZo3; OMXuY: if (!strpos($value, "\x2e\x74\x78\x74")) { goto dhJIJ; } goto wmfah; kH9dh: $result["\164\157\164\x61\x6c\137\143\141\143\150\145"] = $i; goto WQeWI; xf5rz: wDCEC: goto dTJyV; dTJyV: } goto I0sWD; DlmBO: } private function createFolderCache($name) { goto OiZqR; hlzeU: $folder2 = substr($name, 2, 2); goto aNHHJ; OiZqR: $folder1 = substr($name, 0, 2); goto hlzeU; aNHHJ: return $folder1 . "\x2f" . $folder2; goto WCh4H; WCh4H: } private function getDirContents($dir, &$results = array()) { goto WATmG; WATmG: $files = scandir($dir); goto thnJT; Km4Ph: return $results; goto Bhl8p; thnJT: foreach ($files as $key => $value) { goto S7w9T; IT0Kr: NQVPl: goto N2clR; Nj78O: goto Kr1nE; goto V2gs0; oSZC6: $results[] = $path; goto Yz9OC; OS9tL: z1mXC: goto Nj78O; S7w9T: $path = realpath($dir . DIRECTORY_SEPARATOR . $value); goto wuovB; Jzv95: if (!($value != "\x2e" && $value != "\56\56")) { goto z1mXC; } goto raqFn; Yz9OC: Kr1nE: goto IT0Kr; V2gs0: ivO6f: goto oSZC6; raqFn: $this->getDirContents($path, $results); goto uBTnA; uBTnA: $results[] = $path; goto OS9tL; wuovB: if (!is_dir($path)) { goto ivO6f; } goto Jzv95; N2clR: } goto Nc4ZD; Nc4ZD: Vv1cO: goto Km4Ph; Bhl8p: } private function removeEmptySubFolders($path) { goto j029o; XS1z8: uYgc_: goto FXeT1; j029o: $empty = true; goto HUyqz; HUyqz: foreach (glob($path . DIRECTORY_SEPARATOR . "\52") as $file) { $empty &= is_dir($file) && $this->removeEmptySubFolders($file); o8yKv: } goto XS1z8; FXeT1: return $empty && @rmdir($path); goto sRUeF; sRUeF: } }
