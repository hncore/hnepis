<?php
/*   __________________________________________________
    |  		Code By HauN - HauNYTB.COM  2.0.14    	  |
    |          Telegram: https://t.me/haunytb         |
    |    	   Url : https://haunytb.com    		  |
    |_________________________________________________|
*/
 namespace HNMG\EP_Load; class EP_Cache { public $timeCache; public $folderCache; public function __construct() { goto VaA1A; jN0J1: if (is_dir($this->folderCache)) { goto MLYio; } goto cHQnH; UJH9u: MLYio: goto S5HpY; cHQnH: wp_mkdir_p($this->folderCache); goto UJH9u; DdhL2: if (!function_exists("\x57\x50\x5f\106\151\x6c\145\163\x79\163\x74\x65\x6d")) { require_once ABSPATH . "\x77\x70\x2d\141\x64\x6d\x69\156\57\x69\156\x63\x6c\x75\x64\145\163\x2f\x66\151\154\x65\56\x70\x68\x70"; } goto Rss7s; Rss7s: global $wp_filesystem; goto tdOpU; GOFou: $this->wp_filesystem = $wp_filesystem; goto E3QIM; tdOpU: WP_Filesystem(); goto GOFou; S5HpY: $this->timeCache = 3600; goto DdhL2; VaA1A: $this->folderCache = HNMG_CACHE; goto jN0J1; E3QIM: } public function register() { goto Qmm2p; iRFPq: O1KqI: goto Puscy; m0c1E: add_action("\x77\x70\x5f\141\x6a\x61\170\137\x6e\157\160\162\x69\x76\137\x64\x65\154\145\x74\x65\x5f\x61\x6c\154\x5f\x63\141\143\x68\x65", [$this, "\144\x65\154\145\x74\x65\137\141\x6c\154\137\x63\141\143\150\x65"]); goto iRFPq; g1nl0: add_action("\x77\x70\137\x61\152\141\x78\137\x72\x65\x73\145\164\137\160\154\141\x79\x65\x72\x5f\x63\x61\x63\150\x65", [$this, "\x72\145\x73\145\x74\137\x70\x6c\x61\171\145\x72\137\143\141\143\150\145"]); goto JrLRB; JrLRB: add_action("\x77\160\x5f\141\152\141\x78\x5f\156\x6f\160\x72\151\x76\x5f\x72\x65\x73\145\x74\137\x70\x6c\141\x79\x65\x72\x5f\143\141\143\x68\x65", [$this, "\162\x65\163\x65\x74\137\x70\x6c\x61\x79\x65\x72\x5f\143\x61\x63\150\x65"]); goto Jf75p; VQzj_: add_action("\167\160\137\x61\x6a\141\170\x5f\x64\145\154\x65\164\x65\x5f\x61\154\x6c\137\143\141\x63\x68\145", [$this, "\144\145\x6c\145\164\145\137\141\154\x6c\x5f\x63\x61\143\150\x65"]); goto m0c1E; Qmm2p: if (!(HNCORE()->get_product_status() == "\143\157\x6e\156\x65\x63\164\x65\x64")) { goto O1KqI; } goto g1nl0; W3F4p: add_filter("\x48\116\x4d\x47\55\160\x61\x67\145\163", [$this, "\150\156\x61\160\x69\163\x6f\144\x65\137\143\141\143\150\x65\x5f\x6d\145\156\x75"]); goto VQzj_; Jf75p: add_filter("\110\116\115\x47\x2d\164\141\142\x73", [$this, "\x68\x6e\141\x70\x69\x73\x6f\x64\145\x5f\x63\141\143\150\x65\x5f\155\x65\x6e\x75"]); goto W3F4p; Puscy: } public function hnapisode_cache_menu($nav) { $nav["\x31\62\60"] = array("\x73\154\165\147" => "\150\x6e\x6d\147\x2d\143\x61\143\150\x65\x2d\155\x61\156\x61\x67\x65\x72", "\x63\141\154\154\x62\141\143\x6b" => array($this, "\x68\x6e\155\147\x5f\x63\141\x63\x68\145\x5f\x6d\x61\x6e\141\147\x65\137\160\141\147\x65"), "\164\x69\x74\154\x65" => __("\110\116\115\107\x20\103\141\143\x68\x65", "\x68\x6e\155\147\x65\160\151\163"), "\x69\x63\x6f\156" => "\146\x61\x2d\160\154\141\x79\55\x63\151\162\143\154\x65"); return $nav; } public function hnmg_cache_manage_page() { goto enSsc; Sq5l5: $get_cache = json_decode($this->getCache()); goto bG7Rn; bG7Rn: echo view("\x48\116\115\107\x3a\x3a\154\x61\171\157\x75\164\x73\x2e\x63\141\143\x68\145", compact("\x63\x61\143\150\x65\x5f\x63\x6f\x75\x6e\164", "\x67\x65\164\137\x63\x61\x63\150\x65")); goto l8Kl8; enSsc: $cache_count = json_decode($this->cacheCount()); goto Sq5l5; l8Kl8: } public function delete_all_cache() { goto OyCjC; jq3bj: $status = "\123\165\143\143\x65\163\163\146\x75\x6c\154\x79"; goto GGCLY; o9zGb: wp_send_json_success(["\x73\164\141\164\165\163" => $status, "\x74\157\164\141\x6c\x5f\x63\141\143\x68\x65" => $total_cache, "\x74\x69\155\x65\137\154\151\155\x69\x74" => $time_limit, "\x63\141\143\x68\x65\x5f\144\145\x6c\x65\164\145\x64" => $cache_deleted]); goto C3G3G; JCH4W: $cache_deleted = $result["\143\141\x63\150\145\x5f\144\x65\154\145\164\145\x64"] ?? 0; goto o9zGb; GGCLY: $total_cache = $result["\x74\x6f\x74\x61\x6c\137\143\141\143\150\x65"] ?? 0; goto OaFlC; OaFlC: $time_limit = $result["\x74\151\155\x65\x5f\154\x69\x6d\151\164"] ?? 0; goto JCH4W; OyCjC: $result = json_decode($this->delAllCache(0), true); goto jq3bj; C3G3G: wp_die(); goto SP0p1; SP0p1: } public function delAllCache($timeCache) { goto mV0N9; ay2Tz: $this->removeEmptySubFolders($this->folderCache); goto C6UKW; Pj0hX: $result["\x74\x6f\x74\141\x6c\x5f\143\x61\143\150\145"] = $i; goto q2B1u; sEMMi: if (!$getDirContents) { goto r1zvm; } goto srZl1; srZl1: $i = $j = 0; goto Lu_lJ; wIbOb: DRWXT: goto Pj0hX; q2B1u: $result["\143\x61\143\150\x65\x5f\x64\145\154\x65\164\x65\x64"] = $j; goto GdOA7; C6UKW: return json_encode($result); goto Dpoie; Cx_SG: $getDirContents = $this->getDirContents($this->folderCache); goto sEMMi; GdOA7: $result["\x63\x61\x63\150\145\137\143\157\165\x6e\x74"] = $i - $j; goto DgDG3; mV0N9: $result = array("\163\164\141\x74\x75\163" => 0, "\x74\157\164\x61\x6c\x5f\x63\x61\143\150\x65" => 0, "\x74\151\x6d\x65\x5f\154\x69\155\x69\164" => $timeCache, "\x63\x61\143\x68\x65\137\144\145\154\x65\164\145\x64" => 0, "\x63\x61\143\150\145\137\x63\157\x75\x6e\164" => 0); goto Cx_SG; Lu_lJ: foreach ($getDirContents as $key => $value) { goto Hmmms; OH3O0: $j++; goto bP0mL; xFdo9: OJBrk: goto mZdbh; lST6f: $i++; goto znNAC; Hmmms: if (!(strpos($value, "\56\164\x78\164") !== false)) { goto argm8; } goto lST6f; wmJEW: tQEbI: goto E_uiE; WJFKB: ekx7a: goto xFdo9; bP0mL: if (!unlink($value)) { goto ekx7a; } goto KPU0e; KPU0e: $result["\163\164\x61\x74\165\x73"] = 1; goto WJFKB; mZdbh: argm8: goto wmJEW; znNAC: if (!($timeCache <= time() - filemtime($value))) { goto OJBrk; } goto OH3O0; E_uiE: } goto wIbOb; DgDG3: r1zvm: goto ay2Tz; Dpoie: } public function reset_player_cache() { goto L8b6D; TjzR3: $post_id = isset($_POST["\160\x6f\x73\x74\137\151\144"]) ? (int) $_POST["\160\157\x73\x74\x5f\x69\144"] : ''; goto ZLcJ_; ZLcJ_: $episode_slug = isset($_POST["\x65\160\x69\163\157\144\145\137\163\x6c\165\147"]) ? str_replace("\x2d", "\x5f", wp_strip_all_tags($_POST["\x65\x70\x69\x73\x6f\144\145\x5f\x73\x6c\165\147"])) : ''; goto k0Fr7; JLf5F: $data = json_decode($film_meta, true); goto Aa18S; Aa18S: $link = $data[$server - 1]["\x68\141\x75\x6e\155\x6f\166\151\x65\x73\x5f\x73\x65\x72\x76\x65\162\137\144\141\x74\141"][$episode_slug]["\x68\x61\165\x6e\155\x6f\x76\151\145\163\x5f\145\160\x5f\x6c\x69\156\153"]; goto sAyF9; k0Fr7: $film_meta = get_haunmovies($post_id, HNMG_EPS, true); goto JLf5F; sAyF9: $cacheData = $this->delCache($link); goto SuZOU; L8b6D: $server = isset($_POST["\163\x65\x72\x76\x65\162\137\151\144"]) ? (int) $_POST["\x73\x65\x72\x76\x65\x72\137\151\x64"] : ''; goto TjzR3; SuZOU: wp_send_json($cacheData); goto HzqMe; HzqMe: } public function readCache($name) { goto h1A8T; bF4uY: NzTyZ: goto fj4C8; kejNw: return $result; goto aw0IO; d1d4t: uflrh: goto kejNw; MH7lv: $file = $this->folderCache . "\x2f" . $createFolderCache . "\57" . $name . "\x2e\164\x78\x74"; goto waC33; ixQkA: $result = file_get_contents($file); goto h0y8N; or7qg: $result = file_get_contents($file); goto kvb9O; mfBLG: Wj2M3: goto d1d4t; waC33: if (!file_exists($file)) { goto uflrh; } goto XkCO6; Cg9ba: $createFolderCache = $this->createFolderCache($name); goto MH7lv; kvb9O: goto Wj2M3; goto bF4uY; h1A8T: $name = md5(md5($name)); goto r6VH6; r6VH6: $result = ''; goto Cg9ba; h0y8N: Q9asp: goto mfBLG; fj4C8: if (!($this->timeCache > time() - filemtime($file))) { goto Q9asp; } goto ixQkA; XkCO6: if ($this->timeCache != '') { goto NzTyZ; } goto or7qg; aw0IO: } public function getCache() { goto g0ZnQ; byyR7: if (!$getDirContents) { goto AEgCn; } goto VVJQE; HcRnj: YEsT0: goto rfmpg; N2WbH: AEgCn: goto b1hSI; g0ZnQ: $result = array(); goto XMqGD; rfmpg: return json_encode($result); goto N2WbH; VVJQE: foreach ($getDirContents as $key => $value) { goto glFBj; gSVCy: $result[] = array("\146\x69\x6c\145" => $value); goto VltTR; VltTR: wlMDL: goto jPRGb; glFBj: if (!strpos($value, "\56\x74\170\164")) { goto wlMDL; } goto gSVCy; jPRGb: b3K24: goto DtZsl; DtZsl: } goto HcRnj; dmCRR: $i = 0; goto byyR7; XMqGD: $getDirContents = $this->getDirContents($this->folderCache); goto dmCRR; b1hSI: } public function saveCache($name, $data) { goto AtbbZ; n85pt: $createFolderCache = $this->createFolderCache($name); goto lrt5O; X87vO: $this->wp_filesystem->put_contents($index_file, "\74\x3f\160\150\160\x20\57\x2f\x20\x53\151\154\x65\156\x63\145\40\151\163\x20\x67\157\x6c\144\x65\156\56", FS_CHMOD_FILE); goto iJkp6; R5cAW: $index_file = WP_CONTENT_DIR . "\x2f\151\x6e\144\145\x78\x2e\x70\150\160"; goto X87vO; llm43: if (chmod($this->folderCache, 0777)) { goto Eqw0c; } goto C6kR5; C6kR5: chmod($this->folderCache, 0777); goto neASc; V3qGR: $dir = $this->folderCache . "\x2f" . $createFolderCache; goto NztIt; V8Det: YxbPP: goto llm43; neASc: Eqw0c: goto V3qGR; AtbbZ: $name = md5(md5($name)); goto n85pt; NztIt: $file = $dir . "\57" . $name . "\56\x74\170\x74"; goto itCkO; EaMWX: $this->wp_filesystem->put_contents($file, $data, FS_CHMOD_FILE); goto R5cAW; k0r0X: mkdir($dir, 0777, true); goto ykPcF; a8yCj: mkdir($this->folderCache, 0777, true); goto V8Det; ykPcF: HR29o: goto EaMWX; itCkO: if (is_dir($dir)) { goto HR29o; } goto k0r0X; lrt5O: if (is_dir($this->folderCache)) { goto YxbPP; } goto a8yCj; iJkp6: } public function delCache($name) { goto L7HR9; erv3m: $file = $this->folderCache . "\57" . $createFolderCache . "\x2f" . $name . "\x2e\164\170\x74"; goto MAjDe; whQ54: HpWrV: goto UzY62; L7HR9: $result = ''; goto szugG; T01Li: c5l0E: goto whQ54; R3cAw: $result = array("\x73\164\141\164\x75\163" => 1, "\x72\145\163\165\154\x74" => "\x44\145\x6c\x65\164\145\x64"); goto T01Li; VgWr3: goto c5l0E; goto Um0V5; vZtNf: if (unlink($file)) { goto zR3Wr; } goto H594M; du0NX: UzqK2: goto vZtNf; H594M: $result = array("\163\x74\x61\x74\x75\163" => 0, "\162\145\163\165\154\x74" => "\104\x65\x6c\145\x74\x65\40\145\x72\162\157\x72"); goto VgWr3; Eg8jq: goto HpWrV; goto du0NX; To1x1: $createFolderCache = $this->createFolderCache($name); goto erv3m; MAjDe: if (file_exists($file)) { goto UzqK2; } goto PKj6Z; Um0V5: zR3Wr: goto R3cAw; PKj6Z: $result = array("\x73\x74\x61\x74\x75\163" => 0, "\162\x65\163\x75\x6c\x74" => "\x4c\151\156\x6b\x20\x6e\157\164\x20\145\x78\x69\x73\x74\x73"); goto Eg8jq; UzY62: return $result; goto ALujI; szugG: $name = md5(md5($name)); goto To1x1; ALujI: } public function cacheCount() { goto qF3kN; quEXL: $i = 1; goto w4z9X; qF3kN: $result = array(); goto XHbMO; w4z9X: if (!$getDirContents) { goto u1OQB; } goto qwYoS; UFzTs: ZZuSw: goto Q4Zd8; Q4Zd8: u1OQB: goto c17Py; c17Py: return json_encode($result); goto tUlyu; XHbMO: $getDirContents = $this->getDirContents($this->folderCache); goto quEXL; qwYoS: foreach ($getDirContents as $key => $value) { goto tFBmU; fDjJK: $i++; goto tGmqV; tFBmU: if (!strpos($value, "\x2e\164\170\x74")) { goto VYPbZ; } goto KsGNe; KsGNe: $result["\162\x65\x73\x75\154\x74"] = 1; goto MJ_ok; ZS_MP: CJdhA: goto fco8k; tGmqV: VYPbZ: goto ZS_MP; MJ_ok: $result["\x74\x6f\x74\141\x6c\x5f\143\141\143\x68\x65"] = $i; goto fDjJK; fco8k: } goto UFzTs; tUlyu: } private function createFolderCache($name) { goto wv4in; eVJO9: $folder2 = substr($name, 2, 2); goto oCGbt; oCGbt: return $folder1 . "\57" . $folder2; goto eE1we; wv4in: $folder1 = substr($name, 0, 2); goto eVJO9; eE1we: } private function getDirContents($dir, &$results = array()) { goto SNGtb; SNGtb: $files = scandir($dir); goto AeuNj; IZqo9: Me4jS: goto KMlhI; AeuNj: foreach ($files as $key => $value) { goto aUfrr; FR5u6: nXiVm: goto RpUj7; X4BD3: if (!is_dir($path)) { goto xjRHS; } goto ckl0r; Ek0Fv: $results[] = $path; goto iuAaj; DECrb: h8Gcj: goto z9r8Y; v1CDs: $this->getDirContents($path, $results); goto E7YOa; iuAaj: CiOth: goto FR5u6; rTE2E: xjRHS: goto Ek0Fv; z9r8Y: goto CiOth; goto rTE2E; aUfrr: $path = realpath($dir . DIRECTORY_SEPARATOR . $value); goto X4BD3; E7YOa: $results[] = $path; goto DECrb; ckl0r: if (!($value != "\x2e" && $value != "\56\x2e")) { goto h8Gcj; } goto v1CDs; RpUj7: } goto IZqo9; KMlhI: return $results; goto GAas2; GAas2: } private function removeEmptySubFolders($path) { goto PDPa2; nw1bK: Kbq7h: goto Exe0v; Cu1mJ: foreach (glob($path . DIRECTORY_SEPARATOR . "\52") as $file) { $empty &= is_dir($file) && $this->removeEmptySubFolders($file); nmtZa: } goto nw1bK; Exe0v: return $empty && @rmdir($path); goto CfYoK; PDPa2: $empty = true; goto Cu1mJ; CfYoK: } }
